import{Q as _}from"./QPage-BrFQSdfo.js";import{b_ as h,as as m,d as y,w as f,aa as N,b$ as M,h as b,k as P,aj as w,c0 as C,z as D,o as u,e as c,L as i,F as l,C as k,E as x}from"./index-CzwKTze0.js";import{u as A}from"./note-detail-commands-C36QLeC0.js";import{r as B}from"./min-page-height-D8LGJNJE.js";import{A as I}from"./AuthorInfo-DKdoTIw-.js";import{N as S}from"./NoteDetail-pDHM97sG.js";import{E as U}from"./EncryptionRequred-DoXCVFWF.js";import{u as v}from"./app-meta-CsVKGLSV.js";import"./mobile-viewport-changed-Ce5WEfO7.js";function E(e){if(e?.meta?.published)return h(`/detail/${e.id}`)}function p(e){const{title:t,description:o}=e.meta;return{title:t,meta:{"og:title":{property:"og:title",content:t},"og:type":{property:"og:type",content:"article"},...o&&{description:{name:"description",content:o}}}}}function R(e){const{fileTags:t}=e.meta;if(!t)return{};const o=t.reduce((r,n)=>({...r,[n]:{property:"article:tag",content:n}}),{});return{keywords:{name:"keywords",content:t.join(", ")},...o}}function j(e){const{images:t}=e.meta;return t?.length?{"og:image":{property:"og:image",content:M(t[0],e.author.id)}}:{}}function q(e){const{nickName:t}=e.author||{};return t?{"profile:username":{property:"profile:username",content:t},"article:author":{property:"article:author",content:t}}:{}}function H(e){const t=E(e);return t?{"og:url":{property:"og:url",content:t}}:{}}function T(e){return{...p(e),meta:{...p(e).meta,...R(e),...j(e),...q(e),...H(e)}}}function V(e,t){const{setMeta:o,useDefaultMeta:r}=v(t.value);f(()=>e.currentNote,n=>{n&&o(t.value)}),N(()=>{r()})}function F(){const e=m(),t=y(()=>{const o=e.currentNote;return o?T(o):{}});V(e,t)}const O=b({__name:"NoteDetailPage",async setup(e,{expose:t}){t();let o,r;const n=P(),a=m(),{currentNote:d}=w(a);n.params.id&&([o,r]=C(()=>a.selectNoteById(n.params.id)),await o,r()),f(()=>n.params.id,g=>g&&a.selectNoteById(n.params.id)),A(),F();const s={route:n,currentNoteStore:a,currentNote:d,get resetPageMinHeight(){return B},AuthorInfo:I,NoteDetail:S,EncryptionRequired:U};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}});function Q(e,t,o,r,n,a){return u(),c(_,{class:"height-auto","style-fn":r.resetPageMinHeight},{default:i(()=>[l(r.EncryptionRequired,{note:r.currentNote},{default:i(()=>[r.currentNote?.author&&r.currentNote&&!r.currentNote?.isMy?(u(),c(r.AuthorInfo,{key:0,author:r.currentNote?.author,class:"q-pb-lg"},{default:i(()=>[k(" >")]),_:1},8,["author"])):x("",!0),l(r.NoteDetail,{note:r.currentNote},null,8,["note"])]),_:1},8,["note"])]),_:1},8,["style-fn"])}const $=D(O,[["render",Q],["__file","NoteDetailPage.vue"]]);export{$ as default};
