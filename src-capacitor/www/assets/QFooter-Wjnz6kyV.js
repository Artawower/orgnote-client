import{ak as L,ai as V,aj as p,at as k,aZ as H,j as g,aq as R,au as q,i as S,al as w,am as _,r as z,ax as D,d as f,w as b,aB as N}from"./index-CzZLoq7O.js";import{u as P}from"./use-hydration-Ch_uMLlB.js";const F=typeof ResizeObserver!="undefined",O=F===!0?{}:{style:"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;",url:"about:blank"},I=L({name:"QResizeObserver",props:{debounce:{type:[String,Number],default:100}},emits:["resize"],setup(o,{emit:y}){let a=null,i,t={width:-1,height:-1};function u(n){n===!0||o.debounce===0||o.debounce==="0"?r():a===null&&(a=setTimeout(r,o.debounce))}function r(){if(a!==null&&(clearTimeout(a),a=null),i){const{offsetWidth:n,offsetHeight:l}=i;(n!==t.width||l!==t.height)&&(t={width:n,height:l},y("resize",t))}}const{proxy:v}=R();if(v.trigger=u,F===!0){let n;const l=h=>{i=v.$el.parentNode,i?(n=new ResizeObserver(u),n.observe(i),r()):h!==!0&&H(()=>{l(!0)})};return V(()=>{l()}),p(()=>{a!==null&&clearTimeout(a),n!==void 0&&(n.disconnect!==void 0?n.disconnect():i&&n.unobserve(i))}),k}else{let n=function(){a!==null&&(clearTimeout(a),a=null),c!==void 0&&(c.removeEventListener!==void 0&&c.removeEventListener("resize",u,q.passive),c=void 0)},l=function(){n(),i&&i.contentDocument&&(c=i.contentDocument.defaultView,c.addEventListener("resize",u,q.passive),r())};const{isHydrated:h}=P();let c;return V(()=>{H(()=>{i=v.$el,i&&l()})}),p(n),()=>{if(h.value===!0)return g("object",{class:"q--avoid-card-border",style:O.style,tabindex:-1,type:"text/html",data:O.url,"aria-hidden":"true",onLoad:l})}}}}),U=L({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(o,{slots:y,emit:a}){const{proxy:{$q:i}}=R(),t=S(_,w);if(t===w)return console.error("QFooter needs to be child of QLayout"),w;const u=z(parseInt(o.heightHint,10)),r=z(!0),v=z(D.value===!0||t.isContainer.value===!0?0:window.innerHeight),n=f(()=>o.reveal===!0||t.view.value.indexOf("F")!==-1||i.platform.is.ios&&t.isContainer.value===!0),l=f(()=>t.isContainer.value===!0?t.containerHeight.value:v.value),h=f(()=>{if(o.modelValue!==!0)return 0;if(n.value===!0)return r.value===!0?u.value:0;const e=t.scroll.value.position+l.value+u.value-t.height.value;return e>0?e:0}),c=f(()=>o.modelValue!==!0||n.value===!0&&r.value!==!0),Q=f(()=>o.modelValue===!0&&c.value===!0&&o.reveal===!0),B=f(()=>"q-footer q-layout__section--marginal "+(n.value===!0?"fixed":"absolute")+"-bottom"+(o.bordered===!0?" q-footer--bordered":"")+(c.value===!0?" q-footer--hidden":"")+(o.modelValue!==!0?" q-layout--prevent-focus"+(n.value!==!0?" hidden":""):"")),C=f(()=>{const e=t.rows.value.bottom,s={};return e[0]==="l"&&t.left.space===!0&&(s[i.lang.rtl===!0?"right":"left"]=`${t.left.size}px`),e[2]==="r"&&t.right.space===!0&&(s[i.lang.rtl===!0?"left":"right"]=`${t.right.size}px`),s});function d(e,s){t.update("footer",e,s)}function m(e,s){e.value!==s&&(e.value=s)}function $({height:e}){m(u,e),d("size",e)}function j(){if(o.reveal!==!0)return;const{direction:e,position:s,inflectionPoint:T}=t.scroll.value;m(r,e==="up"||s-T<100||t.height.value-l.value-s-u.value<300)}function E(e){Q.value===!0&&m(r,!0),a("focusin",e)}b(()=>o.modelValue,e=>{d("space",e),m(r,!0),t.animate()}),b(h,e=>{d("offset",e)}),b(()=>o.reveal,e=>{e===!1&&m(r,o.modelValue)}),b(r,e=>{t.animate(),a("reveal",e)}),b([u,t.scroll,t.height],j),b(()=>i.screen.height,e=>{t.isContainer.value!==!0&&m(v,e)});const x={};return t.instances.footer=x,o.modelValue===!0&&d("size",u.value),d("space",o.modelValue),d("offset",h.value),p(()=>{t.instances.footer===x&&(t.instances.footer=void 0,d("size",0),d("offset",0),d("space",!1))}),()=>{const e=N(y.default,[g(I,{debounce:0,onResize:$})]);return o.elevated===!0&&e.push(g("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),g("footer",{class:B.value,style:C.value,onFocusin:E},e)}}});export{I as Q,U as a};
