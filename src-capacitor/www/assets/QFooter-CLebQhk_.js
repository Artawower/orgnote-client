import{ad as L,aU as V,ab as p,a$ as S,bt as H,j as g,aj as R,b1 as O,i as _,aV as w,aW as k,r as z,b4 as D,d as f,w as b,ai as N}from"./index-BLR50dHh.js";import{u as P}from"./use-hydration-CJQrenyw.js";const F=typeof ResizeObserver<"u",q=F===!0?{}:{style:"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;",url:"about:blank"},I=L({name:"QResizeObserver",props:{debounce:{type:[String,Number],default:100}},emits:["resize"],setup(o,{emit:y}){let r=null,i,t={width:-1,height:-1};function u(n){n===!0||o.debounce===0||o.debounce==="0"?a():r===null&&(r=setTimeout(a,o.debounce))}function a(){if(r!==null&&(clearTimeout(r),r=null),i){const{offsetWidth:n,offsetHeight:l}=i;(n!==t.width||l!==t.height)&&(t={width:n,height:l},y("resize",t))}}const{proxy:v}=R();if(v.trigger=u,F===!0){let n;const l=h=>{i=v.$el.parentNode,i?(n=new ResizeObserver(u),n.observe(i),a()):h!==!0&&H(()=>{l(!0)})};return V(()=>{l()}),p(()=>{r!==null&&clearTimeout(r),n!==void 0&&(n.disconnect!==void 0?n.disconnect():i&&n.unobserve(i))}),S}else{let n=function(){r!==null&&(clearTimeout(r),r=null),c!==void 0&&(c.removeEventListener!==void 0&&c.removeEventListener("resize",u,O.passive),c=void 0)},l=function(){n(),i&&i.contentDocument&&(c=i.contentDocument.defaultView,c.addEventListener("resize",u,O.passive),a())};const{isHydrated:h}=P();let c;return V(()=>{H(()=>{i=v.$el,i&&l()})}),p(n),()=>{if(h.value===!0)return g("object",{class:"q--avoid-card-border",style:q.style,tabindex:-1,type:"text/html",data:q.url,"aria-hidden":"true",onLoad:l})}}}}),W=L({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(o,{slots:y,emit:r}){const{proxy:{$q:i}}=R(),t=_(k,w);if(t===w)return console.error("QFooter needs to be child of QLayout"),w;const u=z(parseInt(o.heightHint,10)),a=z(!0),v=z(D.value===!0||t.isContainer.value===!0?0:window.innerHeight),n=f(()=>o.reveal===!0||t.view.value.indexOf("F")!==-1||i.platform.is.ios&&t.isContainer.value===!0),l=f(()=>t.isContainer.value===!0?t.containerHeight.value:v.value),h=f(()=>{if(o.modelValue!==!0)return 0;if(n.value===!0)return a.value===!0?u.value:0;const e=t.scroll.value.position+l.value+u.value-t.height.value;return e>0?e:0}),c=f(()=>o.modelValue!==!0||n.value===!0&&a.value!==!0),Q=f(()=>o.modelValue===!0&&c.value===!0&&o.reveal===!0),$=f(()=>"q-footer q-layout__section--marginal "+(n.value===!0?"fixed":"absolute")+"-bottom"+(o.bordered===!0?" q-footer--bordered":"")+(c.value===!0?" q-footer--hidden":"")+(o.modelValue!==!0?" q-layout--prevent-focus"+(n.value!==!0?" hidden":""):"")),C=f(()=>{const e=t.rows.value.bottom,s={};return e[0]==="l"&&t.left.space===!0&&(s[i.lang.rtl===!0?"right":"left"]=`${t.left.size}px`),e[2]==="r"&&t.right.space===!0&&(s[i.lang.rtl===!0?"left":"right"]=`${t.right.size}px`),s});function d(e,s){t.update("footer",e,s)}function m(e,s){e.value!==s&&(e.value=s)}function j({height:e}){m(u,e),d("size",e)}function B(){if(o.reveal!==!0)return;const{direction:e,position:s,inflectionPoint:T}=t.scroll.value;m(a,e==="up"||s-T<100||t.height.value-l.value-s-u.value<300)}function E(e){Q.value===!0&&m(a,!0),r("focusin",e)}b(()=>o.modelValue,e=>{d("space",e),m(a,!0),t.animate()}),b(h,e=>{d("offset",e)}),b(()=>o.reveal,e=>{e===!1&&m(a,o.modelValue)}),b(a,e=>{t.animate(),r("reveal",e)}),b([u,t.scroll,t.height],B),b(()=>i.screen.height,e=>{t.isContainer.value!==!0&&m(v,e)});const x={};return t.instances.footer=x,o.modelValue===!0&&d("size",u.value),d("space",o.modelValue),d("offset",h.value),p(()=>{t.instances.footer===x&&(t.instances.footer=void 0,d("size",0),d("offset",0),d("space",!1))}),()=>{const e=N(y.default,[g(I,{debounce:0,onResize:j})]);return o.elevated===!0&&e.push(g("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),g("footer",{class:$.value,style:C.value,onFocusin:E},e)}}});export{I as Q,W as a};
