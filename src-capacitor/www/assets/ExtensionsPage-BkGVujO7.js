import{Q as P}from"./QPage-YHCRAyud.js";import{h as b,M as k,br as y,a1 as S,z as E,o as i,A as r,B as c,e as f,ab as v,D as o,E as u,F as x,C as m,a2 as _,L as M,bs as B,bt as C,bu as A,G as V,a3 as U}from"./index-D7E76tEZ.js";import{r as D}from"./min-page-height-C8LjVHEA.js";function I(t){if(!t)return"";const a=t.match(/^(?:https?:\/\/)?(?:[^@\n]+@)?(?:www\.)?([^:/\n?]+)/gim);return a?a[0].replace(/^(?:https?:\/\/)?(?:[^@\n]+@)?(?:www\.)?/gim,""):""}const Q=b({__name:"ExtensionPreview",props:{extension:{}},setup(t,{expose:a}){a();const e=t,n=k(),l=async()=>{if(e.extension.active)return await n.disableExtension(e.extension.manifest.name);await n.enableExtension(e.extension.manifest.name)},d=y(),s={props:e,extensionsStore:n,toggleExtensionStatus:l,packageManager:d,ActionBtn:S,get extractDomain(){return I}};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}}),T={class:"header"},z={class:"icon"},F=["alt","src"],N={class:"title"},j={class:"text-h4"},p={class:"source-info"},H={key:0,class:"author"},L={key:1,class:"builtin"},O=["href"],G={class:"body"},R={class:"description"},q={class:"actions"};function J(t,a,e,n,l,d){return i(),r("div",{key:e.extension.manifest.name,class:"extension"},[c("div",T,[c("div",z,[e.extension.manifest.icon?(i(),r("img",{key:0,alt:"extension.manifest.name icon",src:e.extension.manifest.icon},null,8,F)):(i(),f(v,{key:1,name:"extension",size:"2.5rem"}))]),c("div",N,[c("h4",j,o(e.extension.manifest.name)+" "+o(e.extension.manifest.version),1),c("div",p,[e.extension.manifest.author?(i(),r("span",H,o(e.extension.manifest.author)+"Â  ",1)):u("",!0),e.extension.manifest.sourceType==="builtin"?(i(),r("span",L,[x(v,{name:"verified",class:"builtin"}),m(" "+o(t.$t("built-in")),1)])):u("",!0),e.extension.manifest.sourceUrl?(i(),r("a",{key:2,class:"author link",href:e.extension.manifest.sourceUrl,target:"_blank"},o(n.extractDomain(e.extension.manifest.sourceUrl)),9,O)):u("",!0)])])]),c("div",G,[c("div",R,o(e.extension.manifest.description),1),c("div",q,[!e.extension.uploaded&&e.extension.manifest.sourceType!=="builtin"?(i(),f(n.ActionBtn,{key:0,icon:"delete",theme:"magenta",loading:n.packageManager.loading,disabled:n.packageManager.loading,onClick:a[0]||(a[0]=s=>n.packageManager.addSource(e.extension.manifest.sourceUrl))},{default:_(()=>[m(o(t.$t("download")),1)]),_:1},8,["loading","disabled"])):u("",!0),e.extension.uploaded&&e.extension.manifest.sourceType!=="builtin"?(i(),f(n.ActionBtn,{key:1,icon:"delete",theme:"red",onClick:a[1]||(a[1]=s=>n.extensionsStore.deleteExtension(e.extension))},{default:_(()=>[m(o(t.$t("delete")),1)]),_:1})):u("",!0),e.extension.uploaded||e.extension.manifest.sourceType==="builtin"?(i(),f(n.ActionBtn,{key:2,icon:e.extension.active?"cancel":"download_for_offline",theme:e.extension.active?"red":"magenta",onClick:n.toggleExtensionStatus},{default:_(()=>[m(o(e.extension.active?t.$t("disable"):t.$t("enable")),1)]),_:1},8,["icon","theme"])):u("",!0)])])])}const K=E(Q,[["render",J],["__scopeId","data-v-02abb0ba"],["__file","ExtensionPreview.vue"]]),W=b({__name:"ExtensionsPage",setup(t,{expose:a}){a();const e=k(),n=async()=>{const g=await C({accept:".js"}),w=await A(g);e.uploadExtension(w)},l=M(),d=y(),h={extensionsStore:e,uploadExtension:n,completionStore:l,packageManager:d,addSource:async()=>{const g=await l.readCompletion("git URL");d.addSource(g)},get resetPageMinHeight(){return D},ExtensionPreview:K,ActionBtn:S,SearchInput:B};return Object.defineProperty(h,"__isScriptSetup",{enumerable:!1,value:!0}),h}}),X={class:"scroll-container"},Y={class:"search-header"},Z={class:"actions"},$={class:"extensions"};function ee(t,a,e,n,l,d){return i(),r("div",X,[x(P,{"style-fn":n.resetPageMinHeight,class:"center-container"},{default:_(()=>[c("div",Y,[x(n.SearchInput,{modelValue:n.extensionsStore.searchQuery,"onUpdate:modelValue":a[0]||(a[0]=s=>n.extensionsStore.searchQuery=s),autofocus:!0,theme:"heavy"},null,8,["modelValue"])]),c("div",Z,[x(n.ActionBtn,{onClick:n.addSource,icon:"fab fa-git-alt",size:"lg",loading:n.packageManager.loading},{default:_(()=>[m(o(t.$t("add from git")),1)]),_:1},8,["loading"]),x(n.ActionBtn,{onClick:n.uploadExtension,icon:"upload",size:"lg",loading:n.packageManager.loading},{default:_(()=>[m(o(t.$t("upload")),1)]),_:1},8,["loading"])]),c("div",$,[(i(!0),r(V,null,U(n.extensionsStore.filteredExtensions,s=>(i(),f(n.ExtensionPreview,{extension:s,key:s.manifest.name+s.uploaded},null,8,["extension"]))),128))])]),_:1},8,["style-fn"])])}const ie=E(W,[["render",ee],["__scopeId","data-v-7bf982fe"],["__file","ExtensionsPage.vue"]]);export{ie as default};
