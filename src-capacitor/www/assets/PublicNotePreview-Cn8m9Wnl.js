import{u as Z,a as Q,Q as J}from"./view-B98kT0Eb.js";import{m as K,r as T,w as H,cw as $,bw as O,d as _,h as E,b6 as A,by as U,q as Y,R as F,z as R,o as r,A as P,b1 as ee,B as w,e as m,cu as te,E as h,F as c,H as N,a2 as i,cW as V,b2 as oe,aT as z,a9 as q,aa as I,C,D as p,bi as B,ak as G,cX as ae,cY as se,j as x,ab as W,aB as le,cZ as ne,c_ as ie,c$ as re,ap as ce,G as de,a3 as ue,bc as me,t as j,s as fe,l as ve,cy as he,d0 as _e,a7 as L,bh as be,d1 as ge,bq as pe}from"./index-CHdFPrnc.js";import{A as we}from"./AuthorInfo-Cs9peq4h.js";function ye(t){return t.replace(/\.[^/.]+$/,"")}const Se=()=>{const t=K(),o=T("sm"),s=()=>o.value=t.screen.gt.sm?"xs":"sm";return H(()=>t.screen.gt.sm,s),s(),{iconSize:o}},ke=$("selected-notes",()=>{const t=T(new Set),o=O(),s=_(()=>t.value.size===o.notes.length),e=()=>{if(s.value){t.value.clear();return}t.value=new Set(o.notes.map(d=>d.id))},u=d=>{if(t.value.has(d)){t.value.delete(d);return}t.value.add(d)},f=d=>t.value.has(d),a=_(()=>o.notes.length===t.value.size),n=_(()=>t.value.size>0),l=()=>t.value.clear();return{toggleBulkNotesSelection:e,allNotesSelected:s,toggleNoteSelection:u,isNoteSelected:f,isAllNotesSelected:a,isSomeNotesSelected:n,selectedNotesIds:_(()=>[...t.value]),clearSelectedNotes:l}}),Ne=E({__name:"NoteFooter",props:{selectable:{type:Boolean},note:{}},setup(t,{expose:o}){o();const s=t,e=A(s,"selectable"),u=A(s,"note"),f=ke(),a=U(),n=k=>{a.notify(`Feature ${k} is not implemented yet!`)},l=O(),d=Y(),y=async()=>{await l.markAsDeleted([u.value.id]),d.push({name:F.Home})},v=()=>{d.push({name:F.EditNote,params:{id:u.value.id}})},{iconSize:g}=Se(),S={props:s,selectable:e,note:u,selectedNotesStore:f,notifications:a,showNotImplemented:n,notesStore:l,router:d,deleteNote:y,editNote:v,iconSize:g};return Object.defineProperty(S,"__isScriptSetup",{enumerable:!1,value:!0}),S}}),Pe={class:"footer column q-py-bp-lg full-width"},xe={class:"note-actions full-width row justify-between"},Ce={class:"left"},ze={class:"right row gap-sm action-btns"};function qe(t,o,s,e,u,f){return r(),P("div",Pe,[ee(t.$slots,"default",{},void 0,!0),w("div",xe,[w("div",Ce,[e.selectable?(r(),m(te,{key:0,size:e.iconSize,"model-value":e.selectedNotesStore.isNoteSelected(e.note.id),"onUpdate:modelValue":o[0]||(o[0]=a=>e.selectedNotesStore.toggleNoteSelection(e.note.id))},null,8,["size","model-value"])):h("",!0)]),w("div",ze,[c(N,{onClick:o[1]||(o[1]=a=>e.notesStore.toggleBookmark(e.note)),size:e.iconSize,flat:"",round:"",icon:e.note.bookmarked?"o_bookmark":"o_bookmark_added",class:"q-pa-none"},null,8,["size","icon"]),c(N,{size:e.iconSize,flat:"",round:"",icon:"far fa-paper-plane",class:"q-pa-none"},{default:i(()=>[c(V,{class:"flex row no-wrap"},{default:i(()=>[c(N,{flat:"",rounded:"",size:"md",icon:"fa-brands fa-square-twitter",class:"q-pa-sm",onClick:o[2]||(o[2]=a=>e.showNotImplemented("Twitter share"))}),c(N,{flat:"",rounded:"",size:"md",icon:"fa-brands fa-telegram",class:"q-pa-sm",onClick:o[3]||(o[3]=a=>e.showNotImplemented("Telegram share"))}),c(N,{flat:"",rounded:"",size:"md",icon:"far fa-copy",class:"q-pa-sm",onClick:o[4]||(o[4]=a=>e.showNotImplemented("Copy link"))})]),_:1})]),_:1},8,["size"]),c(N,{size:e.iconSize,flat:"",round:"",icon:"fas fa-ellipsis",class:"q-pa-none"},{default:i(()=>[c(V,null,{default:i(()=>[c(oe,{style:{"min-width":"100px"}},{default:i(()=>[e.note.isMy?z((r(),m(q,{key:0,clickable:"",onClick:e.deleteNote},{default:i(()=>[c(I,{class:"text-capitalize"},{default:i(()=>[C(p(t.$t("delete")),1)]),_:1})]),_:1})),[[B]]):h("",!0),e.note.isMy?z((r(),m(q,{key:1,clickable:"",onClick:e.editNote},{default:i(()=>[c(I,{class:"text-capitalize"},{default:i(()=>[C(p(t.$t("edit")),1)]),_:1})]),_:1})),[[B]]):h("",!0),e.note.isMy?h("",!0):z((r(),m(q,{key:2,clickable:"",onClick:o[5]||(o[5]=a=>e.showNotImplemented(t.$t("report")))},{default:i(()=>[c(I,{class:"text-capitalize"},{default:i(()=>[C(p(t.$t("report")),1)]),_:1})]),_:1})),[[B]]),e.note.isMy?h("",!0):z((r(),m(q,{key:3,clickable:"",onClick:o[6]||(o[6]=a=>e.showNotImplemented(t.$t("save")))},{default:i(()=>[c(I,{class:"text-capitalize"},{default:i(()=>[C(p(t.$t("save")),1)]),_:1})]),_:1})),[[B]])]),_:1})]),_:1})]),_:1},8,["size"])])])])}const Ie=R(Ne,[["render",qe],["__scopeId","data-v-c2f65daa"],["__file","NoteFooter.vue"]]),Be=G({name:"QBreadcrumbsEl",props:{...ae,label:String,icon:String,tag:{type:String,default:"span"}},emits:["click"],setup(t,{slots:o}){const{linkTag:s,linkAttrs:e,linkClass:u,navigateOnClick:f}=se(),a=_(()=>({class:"q-breadcrumbs__el q-link flex inline items-center relative-position "+(t.disable!==!0?"q-link--focusable"+u.value:"q-breadcrumbs__el--disable"),...e.value,onClick:f})),n=_(()=>"q-breadcrumbs__el-icon"+(t.label!==void 0?" q-breadcrumbs__el-icon--with-label":""));return()=>{const l=[];return t.icon!==void 0&&l.push(x(W,{class:n.value,name:t.icon})),t.label!==void 0&&l.push(t.label),x(s.value,{...a.value},le(o.default,l))}}}),Fe=["",!0],Qe=G({name:"QBreadcrumbs",props:{...ne,separator:{type:String,default:"/"},separatorColor:String,activeColor:{type:String,default:"primary"},gutter:{type:String,validator:t=>["none","xs","sm","md","lg","xl"].includes(t),default:"sm"}},setup(t,{slots:o}){const s=ie(t),e=_(()=>`flex items-center ${s.value}${t.gutter==="none"?"":` q-gutter-${t.gutter}`}`),u=_(()=>t.separatorColor?` text-${t.separatorColor}`:""),f=_(()=>` text-${t.activeColor}`);return()=>{if(o.default===void 0)return;const a=re(ce(o.default));if(a.length===0)return;let n=1;const l=[],d=a.filter(v=>v.type!==void 0&&v.type.name==="QBreadcrumbsEl").length,y=o.separator!==void 0?o.separator:()=>t.separator;return a.forEach(v=>{if(v.type!==void 0&&v.type.name==="QBreadcrumbsEl"){const g=n<d,S=v.props!==null&&Fe.includes(v.props.disable),k=(g===!0?"":" q-breadcrumbs--last")+(S!==!0&&g===!0?f.value:"");n++,l.push(x("div",{class:`flex items-center${k}`},[v])),g===!0&&l.push(x("div",{class:"q-breadcrumbs__separator"+u.value},y()))}else l.push(v)}),x("div",{class:"q-breadcrumbs"},[x("div",{class:e.value},l)])}}}),Ae=E({__name:"FilePath",props:{filePath:{}},setup(t,{expose:o}){o();const s=t,e=A(s,"filePath"),u=U(),a={props:s,filePath:e,notifications:u,searchInFolder:n=>u.notify(`This functionality is not implemented yet. You clicked on ${n}`),get removeFileExtension(){return ye}};return Object.defineProperty(a,"__isScriptSetup",{enumerable:!1,value:!0}),a}});function Te(t,o,s,e,u,f){return r(),m(Qe,{class:"text-italic color-secondary pointer flex breadcrumbs"},{separator:i(()=>[c(W,{size:"1.5em",name:"chevron_right",class:"color-secondary"})]),default:i(()=>[(r(!0),P(de,null,ue(e.filePath,(a,n)=>(r(),m(Be,{class:"color-secondary text-no-wrap",label:n===e.filePath.length-1?e.removeFileExtension(a):a,key:a,onClick:me(l=>e.searchInFolder(a),["stop","prevent"])},null,8,["label","onClick"]))),128))]),_:1})}const Ee=R(Ae,[["render",Te],["__file","FilePath.vue"]]),Re=E({__name:"PublicNotePreview",props:{notePreview:{},showAuthor:{type:Boolean},selectable:{type:Boolean},height:{},hideFooter:{type:Boolean},fullHeight:{type:Boolean}},setup(t,{expose:o}){var M,D;o();const s=t,{notePreview:e,selectable:u}=j(s),f=_(()=>`${s.height}px`),a=Y(),n=b=>{const X=b.isMy?F.RawEditor:F.NoteDetail;a.push({name:X,params:{id:b.id}})},l=Z(),d=_(()=>l.tile),y=fe(),{showUserProfiles:v}=j(y),g=T((D=(M=e.value)==null?void 0:M.meta.images)==null?void 0:D[0]);H(()=>{var b;return(b=e.value)==null?void 0:b.meta.images},b=>{g.value=b==null?void 0:b[0]});const S=ve(),k={props:s,notePreview:e,selectable:u,height:f,router:a,openNoteDetail:n,viewStore:l,isTile:d,settingsStore:y,showUserProfiles:v,previewImage:g,authStore:S,NoteFooter:Ie,TagList:he,AuthorInfo:we,FilePath:Ee,ImageResolver:_e};return Object.defineProperty(k,"__isScriptSetup",{enumerable:!1,value:!0}),k}}),Me={key:0,class:"q-px-sm"},De={class:"full-width"},Ve={class:"text-overline"},je={class:"text-h4 text-weight-bold pointer"},Le={class:"text-caption rft description"},He={key:0,class:"italic color-secondary"},Oe={key:1,class:"mock-picture pointer rounded-borders"};function Ue(t,o,s,e,u,f){return r(),P("article",{style:pe({height:e.height})},[e.notePreview?(r(),m(J,{key:0,class:"full-height color-main",flat:""},{default:i(()=>{var a;return[(a=e.notePreview)!=null&&a.author&&e.showUserProfiles&&s.showAuthor?(r(),P("div",Me,[c(e.AuthorInfo,{author:e.notePreview.author},null,8,["author"])])):h("",!0),c(Q,{horizontal:"",class:L([{"note-card-content":e.isTile||!s.fullHeight,column:e.isTile,"full-height":s.fullHeight},"pointer q-px-sm"]),onClick:o[0]||(o[0]=n=>e.openNoteDetail(e.notePreview))},{default:i(()=>[e.isTile&&e.previewImage?(r(),m(e.ImageResolver,{key:0,src:e.previewImage},null,8,["src"])):h("",!0),c(Q,{class:L(["fit q-pa-none q-pt-sm note-text-content",{"content-with-img":!!e.previewImage}])},{default:i(()=>{var n,l;return[w("div",De,[w("div",Ve,p(e.notePreview.meta.category),1),w("div",je,p(e.notePreview.meta.title),1),e.notePreview.filePath?(r(),m(e.FilePath,{key:0,"file-path":e.notePreview.filePath,class:"q-py-xs"},null,8,["file-path"])):h("",!0),w("div",Le,[e.settingsStore.config.common.developerMode?(r(),P("span",He," ["+p(new Date(e.notePreview.updatedAt).toLocaleString())+"] ",1)):h("",!0),C(" "+p(e.notePreview.meta.description),1)])]),c(e.TagList,{tags:(l=(n=e.notePreview)==null?void 0:n.meta)==null?void 0:l.fileTags,inline:!0},null,8,["tags"])]}),_:1},8,["class"]),!e.isTile&&e.previewImage?(r(),m(Q,{key:1,class:"flex col-3 flex-start q-pa-none q-pt-sm justify-end img-preview-section"},{default:i(()=>{var n,l,d;return[e.previewImage?(r(),m(e.ImageResolver,{key:0,"author-id":(d=(n=e.notePreview.author)==null?void 0:n.id)!=null?d:(l=e.authStore.user)==null?void 0:l.id,width:"112px",height:"112px",src:e.previewImage},null,8,["author-id","src"])):(r(),P("div",Oe))]}),_:1})):h("",!0)]),_:1},8,["class"]),s.hideFooter?h("",!0):(r(),m(be,{key:1,class:"q-px-none justify-between q-my-sm actions"},{default:i(()=>[c(e.NoteFooter,{note:e.notePreview,selectable:e.selectable},null,8,["note","selectable"])]),_:1})),s.hideFooter?h("",!0):(r(),m(ge,{key:2}))]}),_:1})):h("",!0)],4)}const Xe=R(Re,[["render",Ue],["__scopeId","data-v-e2469e36"],["__file","PublicNotePreview.vue"]]);export{Xe as P,ke as u};
