import{Q as N}from"./QPage-BrFQSdfo.js";import{cQ as h,r as i,cT as u,h as v,d,k as g,z as b,o as P,A as T,F as m,L as x,B as y}from"./index-CzwKTze0.js";import{r as F}from"./min-page-height-D8LGJNJE.js";import{N as I}from"./NoteList-vPNSLM3H.js";import"./AsyncItemContainer-CBF6uEvi.js";import"./view-C-iT-fi2.js";import"./PublicNotePreview-Iam3jDMG.js";import"./AuthorInfo-DKdoTIw-.js";const _=100,p=0,S=h("publicNotes",()=>{const l=i([]),e=i({limit:_,offset:p}),a=i(0),s=i(),c=t=>{const o={...e.value,...t};o.searchText=o.searchText?.trim(),o.limit||=_,o.offset||=p,e.value=o};return{notes:l,selectedNote:s,total:a,filters:e,loadNotes:async()=>{try{const t=await u.notes.notesGet(e.value.limit,e.value.offset,e.value.userId,e.value.searchText);l.value=t.data.data,a.value=t.data.meta.total,c({limit:t.data.meta.limit,offset:t.data.meta.offset})}catch(t){console.log("ðŸ¦„: [line 24][notes.ts] \x1B[35me: ",t)}},fetchNotes:async t=>{if(e.value.offset!==t){c({offset:t});try{const o=await u.notes.notesGet(e.value.limit,e.value.offset,e.value.userId,e.value.searchText);l.value=[...l.value,...o.data.data],a.value=o.data.meta.total}catch{}}},selectNote:t=>{s.value=t},setFilters:c}}),L=v({__name:"PublicNotesPage",setup(l,{expose:e}){e();const a=S(),s=d(()=>a.filters.limit),c=d(()=>a.filters.offset),r=g(),n=()=>{a.setFilters({searchText:r.query.search,userId:r.params.userId,limit:+r.query.limit,offset:+r.query.offset})},f=()=>{n(),a.loadNotes()},t=i(null);f();const o={publicNotesStore:a,limit:s,offset:c,route:r,setFiltersFromQuery:n,reloadNotes:f,scrollTarget:t,get resetPageMinHeight(){return F},NoteList:I};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}}),B={ref:"scrollTarget",class:"scroll-container"},k={class:"container page-container"};function C(l,e,a,s,c,r){return P(),T("div",B,[m(N,{"style-fn":s.resetPageMinHeight,class:"center-container"},{default:x(()=>[y("div",k,[m(s.NoteList,{selectable:!1,notes:s.publicNotesStore.notes,limit:s.limit,offset:s.offset,total:s.publicNotesStore.total,"fetch-notes":s.publicNotesStore.fetchNotes,"scroll-target":s.scrollTarget,height:254,ref:"publicNotesRef"},null,8,["notes","limit","offset","total","fetch-notes","scroll-target"])])]),_:1},8,["style-fn"])],512)}const D=b(L,[["render",C],["__scopeId","data-v-d5ae3bce"],["__file","PublicNotesPage.vue"]]);export{D as default};
