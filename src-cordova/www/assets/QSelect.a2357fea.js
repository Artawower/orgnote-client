var Ot=Object.defineProperty,Dt=Object.defineProperties;var Tt=Object.getOwnPropertyDescriptors;var pe=Object.getOwnPropertySymbols;var At=Object.prototype.hasOwnProperty,Lt=Object.prototype.propertyIsEnumerable;var et=(e,c,a)=>c in e?Ot(e,c,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[c]=a,S=(e,c)=>{for(var a in c||(c={}))At.call(c,a)&&et(e,a,c[a]);if(pe)for(var a of pe(c))Lt.call(c,a)&&et(e,a,c[a]);return e},F=(e,c)=>Dt(e,Tt(c));import{Q as Pt}from"./QField.998f0984.js";import{q as He,aw as Ht,ax as Mt,e as o,a1 as Rt,aJ as Et,y as Me,l as d,ag as qe,ay as $t,V as X,r as q,w as J,a0 as K,C as rt,aC as tt,x as zt,aL as Kt,aM as de,aA as Qt,aN as Nt,R as Pe,S as ae,as as jt,ak as Ut,L as Wt}from"./index.e984fdbd.js";import{u as Xt,a as Jt}from"./use-dark.7db7512f.js";import{a as Gt,Q as Yt}from"./QItemSection.a70c5a61.js";import{Q as Zt}from"./QItemLabel.9a747067.js";import{u as pt,a as eu,b as tu,c as uu,r as ut,d as lt,Q as lu}from"./QMenu.238e7f87.js";import{u as nu,a as au,b as iu}from"./use-key-composition.07f9b325.js";import{u as ou}from"./use-timeout.4482b188.js";import{u as ru}from"./use-tick.499fe767.js";import{u as su,a as cu,b as du,d as vu,e as fu}from"./use-form.e039ee21.js";import{a as mu}from"./focus-manager.387b0375.js";import{u as st,a as gu,c as hu,f as nt,d as yu,n as at}from"./use-field.b9562a6a.js";import{u as Su,a as bu}from"./use-virtual-scroll.f6d4a7dc.js";const Cu={xs:8,sm:10,md:14,lg:20,xl:24};var ku=He({name:"QChip",props:F(S(S({},Xt),Ht),{dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}}),emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:c,emit:a}){const{proxy:{$q:D}}=Me(),T=Jt(e,D),r=Mt(e,Cu),C=o(()=>e.selected===!0||e.icon!==void 0),m=o(()=>e.selected===!0?e.iconSelected||D.iconSet.chip.selected:e.icon),h=o(()=>e.iconRemove||D.iconSet.chip.remove),I=o(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),x=o(()=>{const f=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(f?` text-${f} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(I.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(T.value===!0?" q-chip--dark q-dark":"")}),O=o(()=>e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0});function R(f){f.keyCode===13&&w(f)}function w(f){e.disable||(a("update:selected",!e.selected),a("click",f))}function L(f){(f.keyCode===void 0||f.keyCode===13)&&(X(f),e.disable===!1&&(a("update:modelValue",!1),a("remove")))}function _(){const f=[];I.value===!0&&f.push(d("div",{class:"q-focus-helper"})),C.value===!0&&f.push(d(qe,{class:"q-chip__icon q-chip__icon--left",name:m.value}));const G=e.label!==void 0?[d("div",{class:"ellipsis"},[e.label])]:void 0;return f.push(d("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},$t(c.default,G))),e.iconRight&&f.push(d(qe,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&f.push(d(qe,F(S({class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:h.value},O.value),{onClick:L,onKeyup:L}))),f}return()=>{if(e.modelValue===!1)return;const f={class:x.value,style:r.value};return I.value===!0&&Object.assign(f,O.value,{onClick:w,onKeyup:R}),Rt("div",f,_(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[Et,e.ripple]])}}});let Ve=0;const wu={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},it={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]};var xu=He({name:"QDialog",inheritAttrs:!1,props:F(S(S({},su),pt),{transitionShow:String,transitionHide:String,persistent:Boolean,autoClose:Boolean,allowFocusOutside:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,position:{type:String,default:"standard",validator:e=>e==="standard"||["top","bottom","left","right"].includes(e)}}),emits:[...cu,"shake","click","escape-key"],setup(e,{slots:c,emit:a,attrs:D}){const T=Me(),r=q(null),C=q(!1),m=q(!1),h=q(!1);let I,x=null,O,R;const w=o(()=>e.persistent!==!0&&e.noRouteDismiss!==!0&&e.seamless!==!0),{preventBodyScroll:L}=au(),{registerTimeout:_,removeTimeout:f}=ou(),{registerTick:G,removeTick:A}=ru(),{showPortal:ie,hidePortal:ve,portalIsAccessible:k,renderPortal:$}=eu(T,r,Ce,!0),{hide:z}=du({showing:C,hideOnRouteChange:w,handleShow:ye,handleHide:Se,processOnMount:!0}),{addToHistory:fe,removeFromHistory:me}=nu(C,z,w),ge=o(()=>`q-dialog__inner flex no-pointer-events q-dialog__inner--${e.maximized===!0?"maximized":"minimized"} q-dialog__inner--${e.position} ${wu[e.position]}`+(h.value===!0?" q-dialog__inner--animating":"")+(e.fullWidth===!0?" q-dialog__inner--fullwidth":"")+(e.fullHeight===!0?" q-dialog__inner--fullheight":"")+(e.square===!0?" q-dialog__inner--square":"")),P=o(()=>"q-transition--"+(e.transitionShow===void 0?it[e.position][0]:e.transitionShow)),Ie=o(()=>"q-transition--"+(e.transitionHide===void 0?it[e.position][1]:e.transitionHide)),_e=o(()=>m.value===!0?Ie.value:P.value),oe=o(()=>`--q-transition-duration: ${e.transitionDuration}ms`),Q=o(()=>C.value===!0&&e.seamless!==!0),Be=o(()=>e.autoClose===!0?{onClick:Fe}:{}),he=o(()=>[`q-dialog fullscreen no-pointer-events q-dialog--${Q.value===!0?"modal":"seamless"}`,D.class]);J(C,s=>{K(()=>{m.value=s})}),J(()=>e.maximized,s=>{C.value===!0&&j(s)}),J(Q,s=>{L(s),s===!0?(tu(E),uu(re)):(ut(E),lt(re))});function ye(s){f(),A(),fe(),x=e.noRefocus===!1&&document.activeElement!==null?document.activeElement:null,j(e.maximized),ie(),h.value=!0,e.noFocus!==!0&&(document.activeElement!==null&&document.activeElement.blur(),G(n)),_(()=>{if(T.proxy.$q.platform.is.ios===!0){if(e.seamless!==!0&&document.activeElement){const{top:H,bottom:Y}=document.activeElement.getBoundingClientRect(),{innerHeight:se}=window,Z=window.visualViewport!==void 0?window.visualViewport.height:se;H>0&&Y>Z/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-Z,Y>=se?1/0:Math.ceil(document.scrollingElement.scrollTop+Y-Z/2))),document.activeElement.scrollIntoView()}R=!0,r.value.click(),R=!1}ie(!0),h.value=!1,a("show",s)},e.transitionDuration)}function Se(s){f(),A(),me(),N(!0),h.value=!0,ve(),x!==null&&(x.focus(),x=null),_(()=>{ve(!0),h.value=!1,a("hide",s)},e.transitionDuration)}function n(s){mu(()=>{let H=r.value;H===null||H.contains(document.activeElement)===!0||(H=H.querySelector(s||"[autofocus], [data-autofocus]")||H,H.focus({preventScroll:!0}))})}function y(){n(),a("shake");const s=r.value;s!==null&&(s.classList.remove("q-animate--scale"),s.classList.add("q-animate--scale"),clearTimeout(I),I=setTimeout(()=>{r.value!==null&&(s.classList.remove("q-animate--scale"),n())},170))}function re(){e.seamless!==!0&&(e.persistent===!0||e.noEscDismiss===!0?e.maximized!==!0&&e.noShake!==!0&&y():(a("escape-key"),z()))}function N(s){clearTimeout(I),(s===!0||C.value===!0)&&(j(!1),e.seamless!==!0&&(L(!1),ut(E),lt(re))),s!==!0&&(x=null)}function j(s){s===!0?O!==!0&&(Ve<1&&document.body.classList.add("q-body--dialog"),Ve++,O=!0):O===!0&&(Ve<2&&document.body.classList.remove("q-body--dialog"),Ve--,O=!1)}function Fe(s){R!==!0&&(z(s),a("click",s))}function be(s){e.persistent!==!0&&e.noBackdropDismiss!==!0?z(s):e.noShake!==!0&&y()}function E(s){e.allowFocusOutside!==!0&&k.value===!0&&Kt(r.value,s.target)!==!0&&n('[tabindex]:not([tabindex="-1"])')}Object.assign(T.proxy,{focus:n,shake:y,__updateRefocusTarget(s){x=s||null}}),rt(N);function Ce(){return d("div",F(S({},D),{class:he.value}),[d(tt,{name:"q-transition--fade",appear:!0},()=>Q.value===!0?d("div",{class:"q-dialog__backdrop fixed-full",style:oe.value,"aria-hidden":"true",onMousedown:be}):null),d(tt,{name:_e.value,appear:!0},()=>C.value===!0?d("div",S({ref:r,class:ge.value,style:oe.value,tabindex:-1},Be.value),zt(c.default)):null)])}return $}});const ot=e=>["add","add-unique","toggle"].includes(e),Vu=".*+?^${}()|[]\\",qu=Object.keys(st);var $u=He({name:"QSelect",inheritAttrs:!1,props:F(S(S(S({},Su),vu),st),{modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:ot},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function}),emits:[...gu,"add","remove","input-value","new-value","keyup","keypress","keydown","filter-abort"],setup(e,{slots:c,emit:a}){const{proxy:D}=Me(),{$q:T}=D,r=q(!1),C=q(!1),m=q(-1),h=q(""),I=q(!1),x=q(!1);let O,R,w,L,_,f,G,A,ie;const ve=q(null),k=q(null),$=q(null),z=q(null),fe=q(null),me=fu(e),ge=iu(Xe),P=o(()=>Array.isArray(e.options)?e.options.length:0),Ie=o(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:_e,virtualScrollSliceSizeComputed:oe,localResetVirtualScroll:Q,padVirtualScroll:Be,onVirtualScrollEvt:he,scrollTo:ye,setVirtualScrollSize:Se}=bu({virtualScrollLength:P,getVirtualScrollTarget:yt,getVirtualScrollEl:Ue,virtualScrollItemSizeComputed:Ie}),n=hu(),y=o(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,l=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const u=e.mapOptions===!0&&R!==void 0?R:[],i=l.map(g=>ht(g,u));return e.modelValue===null&&t===!0?i.filter(g=>g!==null):i}return l}),re=o(()=>{const t={};return qu.forEach(l=>{const u=e[l];u!==void 0&&(t[l]=u)}),t}),N=o(()=>e.optionsDark===null?n.isDark.value:e.optionsDark),j=o(()=>nt(y.value)),Fe=o(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||y.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),be=o(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),E=o(()=>P.value===0),Ce=o(()=>y.value.map(t=>B.value(t)).join(", ")),s=o(()=>e.optionsHtml===!0?()=>!0:t=>t!=null&&t.html===!0),H=o(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||y.value.some(s.value))),Y=o(()=>n.focused.value===!0?e.tabindex:-1),se=o(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":r.value===!0?"true":"false","aria-owns":`${n.targetUid.value}_lb`,"aria-controls":`${n.targetUid.value}_lb`};return m.value>=0&&(t["aria-activedescendant"]=`${n.targetUid.value}_${m.value}`),t}),Z=o(()=>{const t={id:`${n.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"};return m.value>=0&&(t["aria-activedescendant"]=`${n.targetUid.value}_${m.value}`),t}),Re=o(()=>y.value.map((t,l)=>({index:l,opt:t,html:s.value(t),selected:!0,removeAtIndex:gt,toggleOption:U,tabindex:Y.value}))),ct=o(()=>{if(P.value===0)return[];const{from:t,to:l}=_e.value;return e.options.slice(t,l).map((u,i)=>{const g=p.value(u)===!0,v=t+i,b={clickable:!0,active:!1,activeClass:ft.value,manualFocus:!0,focused:!1,disable:g,tabindex:-1,dense:e.optionsDense,dark:N.value,role:"option",id:`${n.targetUid.value}_${v}`,onClick:()=>{U(u)}};return g!==!0&&(Te(u)===!0&&(b.active=!0),m.value===v&&(b.focused=!0),b["aria-selected"]=b.active===!0?"true":"false",T.platform.is.desktop===!0&&(b.onMousemove=()=>{r.value===!0&&ee(v)})),{index:v,opt:u,html:s.value(u),label:B.value(u),selected:b.active,focused:b.focused,toggleOption:U,setOptionIndex:ee,itemProps:b}})}),dt=o(()=>e.dropdownIcon!==void 0?e.dropdownIcon:T.iconSet.arrow.dropdown),vt=o(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),ft=o(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),M=o(()=>De(e.optionValue,"value")),B=o(()=>De(e.optionLabel,"label")),p=o(()=>De(e.optionDisable,"disable")),ke=o(()=>y.value.map(t=>M.value(t))),mt=o(()=>{const t={onInput:Xe,onChange:ge,onKeydown:je,onKeyup:Qe,onKeypress:Ne,onFocus:ze,onClick(l){w===!0&&ae(l)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=ge,t});J(y,t=>{R=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&n.innerLoading.value!==!0&&(C.value!==!0&&r.value!==!0||j.value!==!0)&&(L!==!0&&ne(),(C.value===!0||r.value===!0)&&te(""))},{immediate:!0}),J(()=>e.fillInput,ne),J(r,Ae),J(P,Ft);function Ee(t){return e.emitValue===!0?M.value(t):t}function Oe(t){if(t>-1&&t<y.value.length)if(e.multiple===!0){const l=e.modelValue.slice();a("remove",{index:t,value:l.splice(t,1)[0]}),a("update:modelValue",l)}else a("update:modelValue",null)}function gt(t){Oe(t),n.focus()}function $e(t,l){const u=Ee(t);if(e.multiple!==!0){e.fillInput===!0&&ce(B.value(t),!0,!0),a("update:modelValue",u);return}if(y.value.length===0){a("add",{index:0,value:u}),a("update:modelValue",e.multiple===!0?[u]:u);return}if(l===!0&&Te(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const i=e.modelValue.slice();a("add",{index:i.length,value:u}),i.push(u),a("update:modelValue",i)}function U(t,l){if(n.editable.value!==!0||t===void 0||p.value(t)===!0)return;const u=M.value(t);if(e.multiple!==!0){l!==!0&&(ce(e.fillInput===!0?B.value(t):"",!0,!0),W()),k.value!==null&&k.value.focus(),(y.value.length===0||de(M.value(y.value[0]),u)!==!0)&&a("update:modelValue",e.emitValue===!0?u:t);return}if((w!==!0||I.value===!0)&&n.focus(),ze(),y.value.length===0){const v=e.emitValue===!0?u:t;a("add",{index:0,value:v}),a("update:modelValue",e.multiple===!0?[v]:v);return}const i=e.modelValue.slice(),g=ke.value.findIndex(v=>de(v,u));if(g>-1)a("remove",{index:g,value:i.splice(g,1)[0]});else{if(e.maxValues!==void 0&&i.length>=e.maxValues)return;const v=e.emitValue===!0?u:t;a("add",{index:i.length,value:v}),i.push(v)}a("update:modelValue",i)}function ee(t){if(T.platform.is.desktop!==!0)return;const l=t>-1&&t<P.value?t:-1;m.value!==l&&(m.value=l)}function we(t=1,l){if(r.value===!0){let u=m.value;do u=at(u+t,-1,P.value-1);while(u!==-1&&u!==m.value&&p.value(e.options[u])===!0);m.value!==u&&(ee(u),ye(u),l!==!0&&e.useInput===!0&&e.fillInput===!0&&xe(u>=0?B.value(e.options[u]):f))}}function ht(t,l){const u=i=>de(M.value(i),t);return e.options.find(u)||l.find(u)||t}function De(t,l){const u=t!==void 0?t:l;return typeof u=="function"?u:i=>i!==null&&typeof i=="object"&&u in i?i[u]:i}function Te(t){const l=M.value(t);return ke.value.find(u=>de(u,l))!==void 0}function ze(t){e.useInput===!0&&k.value!==null&&(t===void 0||k.value===t.target&&t.target.value===Ce.value)&&k.value.select()}function Ke(t){jt(t,27)===!0&&r.value===!0&&(ae(t),W(),ne()),a("keyup",t)}function Qe(t){const{value:l}=t.target;if(t.keyCode!==void 0){Ke(t);return}if(t.target.value="",clearTimeout(O),ne(),typeof l=="string"&&l.length>0){const u=l.toLocaleLowerCase(),i=v=>{const b=e.options.find(V=>v.value(V).toLocaleLowerCase()===u);return b===void 0?!1:(y.value.indexOf(b)===-1?U(b):W(),!0)},g=v=>{i(M)!==!0&&(i(B)===!0||v===!0||te(l,!0,()=>g(!0)))};g()}else n.clearValue(t)}function Ne(t){a("keypress",t)}function je(t){if(a("keydown",t),Ut(t)===!0)return;const l=h.value.length>0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),u=t.shiftKey!==!0&&e.multiple!==!0&&(m.value>-1||l===!0);if(t.keyCode===27){Pe(t);return}if(t.keyCode===9&&u===!1){ue();return}if(t.target===void 0||t.target.id!==n.targetUid.value)return;if(t.keyCode===40&&n.innerLoading.value!==!0&&r.value===!1){X(t),le();return}if(t.keyCode===8&&e.hideSelected!==!0&&h.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?Oe(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&a("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof h.value!="string"||h.value.length===0)&&(X(t),m.value=-1,we(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&oe.value!==void 0&&(X(t),m.value=Math.max(-1,Math.min(P.value,m.value+(t.keyCode===33?-1:1)*oe.value.view)),we(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(X(t),we(t.keyCode===38?-1:1,e.multiple));const i=P.value;if((A===void 0||ie<Date.now())&&(A=""),i>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===t.ctrlKey&&(t.keyCode!==32||A.length>0)){r.value!==!0&&le(t);const g=t.key.toLocaleLowerCase(),v=A.length===1&&A[0]===g;ie=Date.now()+1500,v===!1&&(X(t),A+=g);const b=new RegExp("^"+A.split("").map(Le=>Vu.indexOf(Le)>-1?"\\"+Le:Le).join(".*"),"i");let V=m.value;if(v===!0||V<0||b.test(B.value(e.options[V]))!==!0)do V=at(V+1,-1,i-1);while(V!==m.value&&(p.value(e.options[V])===!0||b.test(B.value(e.options[V]))!==!0));m.value!==V&&K(()=>{ee(V),ye(V),V>=0&&e.useInput===!0&&e.fillInput===!0&&xe(B.value(e.options[V]))});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||A!=="")&&(t.keyCode!==9||u===!1))){if(t.keyCode!==9&&X(t),m.value>-1&&m.value<i){U(e.options[m.value]);return}if(l===!0){const g=(v,b)=>{if(b){if(ot(b)!==!0)return}else b=e.newValueMode;if(v==null)return;ce("",e.multiple!==!0,!0),(b==="toggle"?U:$e)(v,b==="add-unique"),e.multiple!==!0&&(k.value!==null&&k.value.focus(),W())};if(e.onNewValue!==void 0?a("new-value",h.value,g):g(h.value),e.multiple!==!0)return}r.value===!0?ue():n.innerLoading.value!==!0&&le()}}function Ue(){return w===!0?fe.value:$.value!==null&&$.value.__qPortalInnerRef.value!==null?$.value.__qPortalInnerRef.value:void 0}function yt(){return Ue()}function St(){return e.hideSelected===!0?[]:c["selected-item"]!==void 0?Re.value.map(t=>c["selected-item"](t)).slice():c.selected!==void 0?[].concat(c.selected()):e.useChips===!0?Re.value.map((t,l)=>d(ku,{key:"option-"+l,removable:n.editable.value===!0&&p.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:Y.value,onRemove(){t.removeAtIndex(l)}},()=>d("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:B.value(t.opt)}))):[d("span",{[H.value===!0?"innerHTML":"textContent"]:e.displayValue!==void 0?e.displayValue:Ce.value})]}function We(){if(E.value===!0)return c["no-option"]!==void 0?c["no-option"]({inputValue:h.value}):void 0;const t=c.option!==void 0?c.option:u=>d(Yt,S({key:u.index},u.itemProps),()=>d(Gt,()=>d(Zt,()=>d("span",{[u.html===!0?"innerHTML":"textContent"]:u.label}))));let l=Be("div",ct.value.map(t));return c["before-options"]!==void 0&&(l=c["before-options"]().concat(l)),Wt(c["after-options"],l)}function bt(t,l){const u=l===!0?S(S({},se.value),n.splitAttrs.attributes.value):void 0,i=S(F(S({ref:l===!0?k:void 0,key:"i_t",class:Fe.value,style:e.inputStyle,value:h.value!==void 0?h.value:"",type:"search"},u),{id:l===!0?n.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t!==!0&&e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0}),mt.value);return t!==!0&&w===!0&&(Array.isArray(i.class)===!0?i.class=[...i.class,"no-pointer-events"]:i.class+=" no-pointer-events"),d("input",i)}function Xe(t){clearTimeout(O),!(t&&t.target&&t.target.qComposing===!0)&&(xe(t.target.value||""),L=!0,f=h.value,n.focused.value!==!0&&(w!==!0||I.value===!0)&&n.focus(),e.onFilter!==void 0&&(O=setTimeout(()=>{te(h.value)},e.inputDebounce)))}function xe(t){h.value!==t&&(h.value=t,a("input-value",t))}function ce(t,l,u){L=u!==!0,e.useInput===!0&&(xe(t),(l===!0||u!==!0)&&(f=t),l!==!0&&te(t))}function te(t,l,u){if(e.onFilter===void 0||l!==!0&&n.focused.value!==!0)return;n.innerLoading.value===!0?a("filter-abort"):(n.innerLoading.value=!0,x.value=!0),t!==""&&e.multiple!==!0&&y.value.length>0&&L!==!0&&t===B.value(y.value[0])&&(t="");const i=setTimeout(()=>{r.value===!0&&(r.value=!1)},10);clearTimeout(_),_=i,a("filter",t,(g,v)=>{(l===!0||n.focused.value===!0)&&_===i&&(clearTimeout(_),typeof g=="function"&&g(),x.value=!1,K(()=>{n.innerLoading.value=!1,n.editable.value===!0&&(l===!0?r.value===!0&&W():r.value===!0?Ae(!0):r.value=!0),typeof v=="function"&&K(()=>{v(D)}),typeof u=="function"&&K(()=>{u(D)})}))},()=>{n.focused.value===!0&&_===i&&(clearTimeout(_),n.innerLoading.value=!1,x.value=!1),r.value===!0&&(r.value=!1)})}function Ct(){return d(lu,F(S({ref:$,class:be.value,style:e.popupContentStyle,modelValue:r.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&E.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:N.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,square:vt.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0},Z.value),{onScrollPassive:he,onBeforeShow:Ge,onBeforeHide:kt,onShow:wt}),We)}function kt(t){Ye(t),ue()}function wt(){Se()}function xt(t){ae(t),k.value!==null&&k.value.focus(),I.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function Vt(t){ae(t),K(()=>{I.value=!1})}function qt(){const t=[d(Pt,F(S(F(S({class:`col-auto ${n.fieldClass.value}`},re.value),{for:n.targetUid.value,dark:N.value,square:!0,loading:x.value,itemAligned:!1,filled:!0,stackLabel:h.value.length>0}),n.splitAttrs.listeners.value),{onFocus:xt,onBlur:Vt}),F(S({},c),{rawControl:()=>n.getControl(!0),before:void 0,after:void 0}))];return r.value===!0&&t.push(d("div",F(S({ref:fe,class:be.value+" scroll",style:e.popupContentStyle},Z.value),{onClick:Pe,onScrollPassive:he}),We())),d(xu,{ref:z,modelValue:C.value,position:e.useInput===!0?"top":void 0,transitionShow:G,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:Ge,onBeforeHide:It,onHide:_t,onShow:Bt},()=>d("div",{class:"q-select__dialog"+(N.value===!0?" q-select__dialog--dark q-dark":"")+(I.value===!0?" q-select__dialog--focused":"")},t))}function It(t){Ye(t),z.value!==null&&z.value.__updateRefocusTarget(n.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),n.focused.value=!1}function _t(t){W(),n.focused.value===!1&&a("blur",t),ne()}function Bt(){const t=document.activeElement;(t===null||t.id!==n.targetUid.value)&&k.value!==null&&k.value!==t&&k.value.focus(),Se()}function ue(){C.value!==!0&&(m.value=-1,r.value===!0&&(r.value=!1),n.focused.value===!1&&(clearTimeout(_),_=void 0,n.innerLoading.value===!0&&(a("filter-abort"),n.innerLoading.value=!1,x.value=!1)))}function le(t){n.editable.value===!0&&(w===!0?(n.onControlFocusin(t),C.value=!0,K(()=>{n.focus()})):n.focus(),e.onFilter!==void 0?te(h.value):(E.value!==!0||c["no-option"]!==void 0)&&(r.value=!0))}function W(){C.value=!1,ue()}function ne(){e.useInput===!0&&ce(e.multiple!==!0&&e.fillInput===!0&&y.value.length>0&&B.value(y.value[0])||"",!0,!0)}function Ae(t){let l=-1;if(t===!0){if(y.value.length>0){const u=M.value(y.value[0]);l=e.options.findIndex(i=>de(M.value(i),u))}Q(l)}ee(l)}function Ft(t,l){r.value===!0&&n.innerLoading.value===!1&&(Q(-1,!0),K(()=>{r.value===!0&&n.innerLoading.value===!1&&(t>l?Q():Ae(!0))}))}function Je(){C.value===!1&&$.value!==null&&$.value.updatePosition()}function Ge(t){t!==void 0&&ae(t),a("popup-show",t),n.hasPopupOpen=!0,n.onControlFocusin(t)}function Ye(t){t!==void 0&&ae(t),a("popup-hide",t),n.hasPopupOpen=!1,n.onControlFocusout(t)}function Ze(){w=T.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?c["no-option"]!==void 0||e.onFilter!==void 0||E.value===!1:!0),G=T.platform.is.ios===!0&&w===!0&&e.useInput===!0?"fade":e.transitionShow}return Qt(Ze),Nt(Je),Ze(),rt(()=>{clearTimeout(O)}),Object.assign(D,{showPopup:le,hidePopup:W,removeAtIndex:Oe,add:$e,toggleOption:U,getOptionIndex:()=>m.value,setOptionIndex:ee,moveOptionSelection:we,filter:te,updateMenuPosition:Je,updateInputValue:ce,isOptionSelected:Te,getEmittingOptionValue:Ee,isOptionDisabled:(...t)=>p.value.apply(null,t)===!0,getOptionValue:(...t)=>M.value.apply(null,t),getOptionLabel:(...t)=>B.value.apply(null,t)}),Object.assign(n,{innerValue:y,fieldClass:o(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:ve,targetRef:k,hasValue:j,showPopup:le,floatingLabel:o(()=>e.hideSelected!==!0&&j.value===!0||typeof h.value=="number"||h.value.length>0||nt(e.displayValue)),getControlChild:()=>{if(n.editable.value!==!1&&(C.value===!0||E.value!==!0||c["no-option"]!==void 0))return w===!0?qt():Ct();n.hasPopupOpen===!0&&(n.hasPopupOpen=!1)},controlEvents:{onFocusin(t){n.onControlFocusin(t)},onFocusout(t){n.onControlFocusout(t,()=>{ne(),ue()})},onClick(t){if(Pe(t),w!==!0&&r.value===!0){ue(),k.value!==null&&k.value.focus();return}le(t)}},getControl:t=>{const l=St(),u=t===!0||C.value!==!0||w!==!0;if(e.useInput===!0)l.push(bt(t,u));else if(n.editable.value===!0){const g=u===!0?se.value:void 0;l.push(d("input",F(S({ref:u===!0?k:void 0,key:"d_t",class:"q-select__focus-target",id:u===!0?n.targetUid.value:void 0,readonly:!0,"data-autofocus":t!==!0&&e.autofocus===!0||void 0},g),{onKeydown:je,onKeyup:Ke,onKeypress:Ne}))),u===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length>0&&l.push(d("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,onKeyup:Qe}))}if(me.value!==void 0&&e.disable!==!0&&ke.value.length>0){const g=ke.value.map(v=>d("option",{value:v,selected:!0}));l.push(d("select",{class:"hidden",name:me.value,multiple:e.multiple},g))}const i=e.useInput===!0||u!==!0?void 0:n.splitAttrs.attributes.value;return d("div",S({class:"q-field__native row items-center"},i),l)},getInnerAppend:()=>e.loading!==!0&&x.value!==!0&&e.hideDropdownIcon!==!0?[d(qe,{class:"q-select__dropdown-icon"+(r.value===!0?" rotate-180":""),name:dt.value})]:null}),yu(n)}});export{$u as Q};
