var Ee=Object.defineProperty;var ue=Object.getOwnPropertySymbols;var Me=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable;var fe=(e,t,l)=>t in e?Ee(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,k=(e,t)=>{for(var l in t||(t={}))Me.call(t,l)&&fe(e,l,t[l]);if(ue)for(var l of ue(t))xe.call(t,l)&&fe(e,l,t[l]);return e};import{g as Ae,c as de}from"./Ripple.d018c11c.js";import{z as Ve,r as R,c as $,w as Se,R as He,h as A,N as Re,af as Te,O as qe,P as Oe,y as ke,g as Be}from"./index.e5e5ad80.js";import{r as I}from"./rtl.4b414a6d.js";const Fe=[null,document,document.body,document.scrollingElement,document.documentElement];function je(e,t){let l=Ae(t);if(l===void 0){if(e==null)return window;l=e.closest(".scroll,.scroll-y,.overflow-auto")}return Fe.includes(l)?window:l}function We(e){return e===window?window.pageYOffset||window.scrollY||document.body.scrollTop||0:e.scrollTop}function Le(e){return e===window?window.pageXOffset||window.scrollX||document.body.scrollLeft||0:e.scrollLeft}function me(e,t,l=0){const u=arguments[3]===void 0?performance.now():arguments[3],d=We(e);if(l<=0){d!==t&&ee(e,t);return}requestAnimationFrame(n=>{const g=n-u,p=d+(t-d)/Math.max(g,l)*g;ee(e,p),p!==t&&me(e,t,l-g,n)})}function we(e,t,l=0){const u=arguments[3]===void 0?performance.now():arguments[3],d=Le(e);if(l<=0){d!==t&&te(e,t);return}requestAnimationFrame(n=>{const g=n-u,p=d+(t-d)/Math.max(g,l)*g;te(e,p),p!==t&&we(e,t,l-g,n)})}function ee(e,t){if(e===window){window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,t);return}e.scrollTop=t}function te(e,t){if(e===window){window.scrollTo(t,window.pageYOffset||window.scrollY||document.body.scrollTop||0);return}e.scrollLeft=t}function Ue(e,t,l){if(l){me(e,t,l);return}ee(e,t)}function Ge(e,t,l){if(l){we(e,t,l);return}te(e,t)}let j;function Je(){if(j!==void 0)return j;const e=document.createElement("p"),t=document.createElement("div");de(e,{width:"100%",height:"200px"}),de(t,{position:"absolute",top:"0px",left:"0px",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),t.appendChild(e),document.body.appendChild(t);const l=e.offsetWidth;t.style.overflow="scroll";let u=e.offsetWidth;return l===u&&(u=t.clientWidth),t.remove(),j=l-u,j}function Ke(e,t=!0){return!e||e.nodeType!==Node.ELEMENT_NODE?!1:t?e.scrollHeight>e.clientHeight&&(e.classList.contains("scroll")||e.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(e)["overflow-y"])):e.scrollWidth>e.clientWidth&&(e.classList.contains("scroll")||e.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(e)["overflow-x"]))}const M=1e3,Pe=["start","center","end","start-force","center-force","end-force"],pe=Array.prototype.filter,_e=window.getComputedStyle(document.body).overflowAnchor===void 0?Ve:function(e,t){e!==null&&(cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;const l=e.children||[];pe.call(l,d=>d.dataset&&d.dataset.qVsAnchor!==void 0).forEach(d=>{delete d.dataset.qVsAnchor});const u=l[t];u&&u.dataset&&(u.dataset.qVsAnchor="")}))};function B(e,t){return e+t}function D(e,t,l,u,d,n,g,p){const y=e===window?document.scrollingElement||document.documentElement:e,E=d===!0?"offsetWidth":"offsetHeight",r={scrollStart:0,scrollViewSize:-g-p,scrollMaxSize:0,offsetStart:-g,offsetEnd:-p};if(d===!0?(e===window?(r.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,r.scrollViewSize+=document.documentElement.clientWidth):(r.scrollStart=y.scrollLeft,r.scrollViewSize+=y.clientWidth),r.scrollMaxSize=y.scrollWidth,n===!0&&(r.scrollStart=(I===!0?r.scrollMaxSize-r.scrollViewSize:0)-r.scrollStart)):(e===window?(r.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,r.scrollViewSize+=document.documentElement.clientHeight):(r.scrollStart=y.scrollTop,r.scrollViewSize+=y.clientHeight),r.scrollMaxSize=y.scrollHeight),l!==null)for(let m=l.previousElementSibling;m!==null;m=m.previousElementSibling)m.classList.contains("q-virtual-scroll--skip")===!1&&(r.offsetStart+=m[E]);if(u!==null)for(let m=u.nextElementSibling;m!==null;m=m.nextElementSibling)m.classList.contains("q-virtual-scroll--skip")===!1&&(r.offsetEnd+=m[E]);if(t!==e){const m=y.getBoundingClientRect(),h=t.getBoundingClientRect();d===!0?(r.offsetStart+=h.left-m.left,r.offsetEnd-=h.width):(r.offsetStart+=h.top-m.top,r.offsetEnd-=h.height),e!==window&&(r.offsetStart+=r.scrollStart),r.offsetEnd+=r.scrollMaxSize-r.offsetStart}return r}function ve(e,t,l,u){t==="end"&&(t=(e===window?document.body:e)[l===!0?"scrollWidth":"scrollHeight"]),e===window?l===!0?(u===!0&&(t=(I===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-t),window.scrollTo(t,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,t):l===!0?(u===!0&&(t=(I===!0?e.scrollWidth-e.offsetWidth:0)-t),e.scrollLeft=t):e.scrollTop=t}function P(e,t,l,u){if(l>=u)return 0;const d=t.length,n=Math.floor(l/M),g=Math.floor((u-1)/M)+1;let p=e.slice(n,g).reduce(B,0);return l%M!==0&&(p-=t.slice(n*M,l).reduce(B,0)),u%M!==0&&u!==d&&(p-=t.slice(u,g*M).reduce(B,0)),p}const Ne={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},Qe=k({virtualScrollHorizontal:Boolean,onVirtualScroll:Function},Ne);function Ze({virtualScrollLength:e,getVirtualScrollTarget:t,getVirtualScrollEl:l,virtualScrollItemSizeComputed:u}){const d=Be(),{props:n,emit:g,proxy:p}=d,{$q:y}=p;let E,r,m,h=[],S;const V=R(0),T=R(0),F=R({}),W=R(null),L=R(null),q=R(null),w=R({from:0,to:0}),le=$(()=>n.tableColspan!==void 0?n.tableColspan:100);u===void 0&&(u=$(()=>n.virtualScrollItemSize));const oe=$(()=>u.value+";"+n.virtualScrollHorizontal),he=$(()=>oe.value+";"+n.virtualScrollSliceRatioBefore+";"+n.virtualScrollSliceRatioAfter);Se(he,()=>{O()}),Se(oe,U);function U(){J(r,!0)}function ie(o){J(o===void 0?r:o)}function _(o,i){const c=t();if(c==null||c.nodeType===8)return;const v=D(c,l(),W.value,L.value,n.virtualScrollHorizontal,y.lang.rtl,n.virtualScrollStickySizeStart,n.virtualScrollStickySizeEnd);m!==v.scrollViewSize&&O(v.scrollViewSize),N(c,v,Math.min(e.value-1,Math.max(0,parseInt(o,10)||0)),0,Pe.indexOf(i)>-1?i:r>-1&&o>r?"end":"start")}function ge(){const o=t();if(o==null||o.nodeType===8)return;const i=D(o,l(),W.value,L.value,n.virtualScrollHorizontal,y.lang.rtl,n.virtualScrollStickySizeStart,n.virtualScrollStickySizeEnd),c=e.value-1,v=i.scrollMaxSize-i.offsetStart-i.offsetEnd-T.value;if(E===i.scrollStart)return;if(i.scrollMaxSize<=0){N(o,i,0,0);return}m!==i.scrollViewSize&&O(i.scrollViewSize),G(w.value.from);const z=Math.floor(i.scrollMaxSize-Math.max(i.scrollViewSize,i.offsetEnd)-Math.min(S[c],i.scrollViewSize/2));if(z>0&&Math.ceil(i.scrollStart)>=z){N(o,i,c,i.scrollMaxSize-i.offsetEnd-h.reduce(B,0));return}let f=0,a=i.scrollStart-i.offsetStart,b=a;if(a<=v&&a+i.scrollViewSize>=V.value)a-=V.value,f=w.value.from,b=a;else for(let s=0;a>=h[s]&&f<c;s++)a-=h[s],f+=M;for(;a>0&&f<c;)a-=S[f],a>-i.scrollViewSize?(f++,b=a):b=S[f]+a;N(o,i,f,b)}function N(o,i,c,v,z){const f=typeof z=="string"&&z.indexOf("-force")>-1,a=f===!0?z.replace("-force",""):z,b=a!==void 0?a:"start";let s=Math.max(0,c-F.value[b]),x=s+F.value.total;x>e.value&&(x=e.value,s=Math.max(0,x-F.value.total)),E=i.scrollStart;const C=s!==w.value.from||x!==w.value.to;if(C===!1&&a===void 0){ne(c);return}const{activeElement:se}=document,H=q.value;C===!0&&H!==null&&H!==se&&H.contains(se)===!0&&(H.addEventListener("focusout",re),setTimeout(()=>{H!==null&&H.removeEventListener("focusout",re)})),_e(H,c-s);const ye=a!==void 0?S.slice(s,c).reduce(B,0):0;if(C===!0){const X=x>=w.value.from&&s<=w.value.to?w.value.to:x;w.value={from:s,to:X},V.value=P(h,S,0,s),T.value=P(h,S,x,e.value),requestAnimationFrame(()=>{w.value.to!==x&&E===i.scrollStart&&(w.value={from:w.value.from,to:x},T.value=P(h,S,x,e.value))})}requestAnimationFrame(()=>{if(E!==i.scrollStart)return;C===!0&&G(s);const X=S.slice(s,c).reduce(B,0),Y=X+i.offsetStart+V.value,ae=Y+S[c];let Q=Y+v;if(a!==void 0){const be=X-ye,Z=i.scrollStart+be;Q=f!==!0&&Z<Y&&ae<Z+i.scrollViewSize?Z:a==="end"?ae-i.scrollViewSize:Y-(a==="start"?0:Math.round((i.scrollViewSize-S[c])/2))}E=Q,ve(o,Q,n.virtualScrollHorizontal,y.lang.rtl),ne(c)})}function G(o){const i=q.value;if(i){const c=pe.call(i.children,s=>s.classList&&s.classList.contains("q-virtual-scroll--skip")===!1),v=c.length,z=n.virtualScrollHorizontal===!0?s=>s.getBoundingClientRect().width:s=>s.offsetHeight;let f=o,a,b;for(let s=0;s<v;){for(a=z(c[s]),s++;s<v&&c[s].classList.contains("q-virtual-scroll--with-prev")===!0;)a+=z(c[s]),s++;b=a-S[f],b!==0&&(S[f]+=b,h[Math.floor(f/M)]+=b),f++}}}function re(){q.value!==null&&q.value!==void 0&&q.value.focus()}function J(o,i){const c=1*u.value;(i===!0||Array.isArray(S)===!1)&&(S=[]);const v=S.length;S.length=e.value;for(let f=e.value-1;f>=v;f--)S[f]=c;const z=Math.floor((e.value-1)/M);h=[];for(let f=0;f<=z;f++){let a=0;const b=Math.min((f+1)*M,e.value);for(let s=f*M;s<b;s++)a+=S[s];h.push(a)}r=-1,E=void 0,V.value=P(h,S,0,w.value.from),T.value=P(h,S,w.value.to,e.value),o>=0?(G(w.value.from),He(()=>{_(o)})):K()}function O(o){if(o===void 0&&typeof window!="undefined"){const a=t();a!=null&&a.nodeType!==8&&(o=D(a,l(),W.value,L.value,n.virtualScrollHorizontal,y.lang.rtl,n.virtualScrollStickySizeStart,n.virtualScrollStickySizeEnd).scrollViewSize)}m=o;const i=parseFloat(n.virtualScrollSliceRatioBefore)||0,c=parseFloat(n.virtualScrollSliceRatioAfter)||0,v=1+i+c,z=o===void 0||o<=0?1:Math.ceil(o/u.value),f=Math.max(1,z,Math.ceil((n.virtualScrollSliceSize>0?n.virtualScrollSliceSize:10)/v));F.value={total:Math.ceil(f*v),start:Math.ceil(f*i),center:Math.ceil(f*(.5+i)),end:Math.ceil(f*(1+i)),view:z}}function ze(o,i){const c=n.virtualScrollHorizontal===!0?"width":"height",v={["--q-virtual-scroll-item-"+c]:u.value+"px"};return[o==="tbody"?A(o,{class:"q-virtual-scroll__padding",key:"before",ref:W},[A("tr",[A("td",{style:k({[c]:`${V.value}px`},v),colspan:le.value})])]):A(o,{class:"q-virtual-scroll__padding",key:"before",ref:W,style:k({[c]:`${V.value}px`},v)}),A(o,{class:"q-virtual-scroll__content",key:"content",ref:q,tabindex:-1},i.flat()),o==="tbody"?A(o,{class:"q-virtual-scroll__padding",key:"after",ref:L},[A("tr",[A("td",{style:k({[c]:`${T.value}px`},v),colspan:le.value})])]):A(o,{class:"q-virtual-scroll__padding",key:"after",ref:L,style:k({[c]:`${T.value}px`},v)})]}function ne(o){r!==o&&(n.onVirtualScroll!==void 0&&g("virtual-scroll",{index:o,from:w.value.from,to:w.value.to-1,direction:o<r?"decrease":"increase",ref:p}),r=o)}O();const K=Re(ge,y.platform.is.ios===!0?120:35);Te(()=>{O()});let ce=!1;return qe(()=>{ce=!0}),Oe(()=>{if(ce!==!0)return;const o=t();E!==void 0&&o!==void 0&&o!==null&&o.nodeType!==8?ve(o,E,n.virtualScrollHorizontal,y.lang.rtl):_(r)}),ke(()=>{K.cancel()}),Object.assign(p,{scrollTo:_,reset:U,refresh:ie}),{virtualScrollSliceRange:w,virtualScrollSliceSizeComputed:F,setVirtualScrollSize:O,onVirtualScrollEvt:K,localResetVirtualScroll:J,padVirtualScroll:ze,scrollTo:_,reset:U,refresh:ie}}export{We as a,Le as b,Je as c,Ge as d,Ze as e,je as g,Ke as h,Ue as s,Qe as u};
