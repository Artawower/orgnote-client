import{r as g,C as H,v as p,j as L,x,y as S,U as V,h as y,n as q,z as O,i as _,k as z,l as D,a as d,w as m,G as N}from"./index.446b2176.js";function P(){const n=g(!H.value);return n.value===!1&&p(()=>{n.value=!0}),n}const F=typeof ResizeObserver!="undefined",C=F===!0?{}:{style:"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;",url:"about:blank"};var I=L({name:"QResizeObserver",props:{debounce:{type:[String,Number],default:100}},emits:["resize"],setup(n,{emit:w}){let u=null,i,t={width:-1,height:-1};function l(o){o===!0||n.debounce===0||n.debounce==="0"?a():u===null&&(u=setTimeout(a,n.debounce))}function a(){if(u!==null&&(clearTimeout(u),u=null),i){const{offsetWidth:o,offsetHeight:r}=i;(o!==t.width||r!==t.height)&&(t={width:o,height:r},w("resize",t))}}const{proxy:v}=q();if(F===!0){let o;const r=f=>{i=v.$el.parentNode,i?(o=new ResizeObserver(l),o.observe(i),a()):f!==!0&&V(()=>{r(!0)})};return p(()=>{r()}),x(()=>{u!==null&&clearTimeout(u),o!==void 0&&(o.disconnect!==void 0?o.disconnect():i&&o.unobserve(i))}),S}else{let f=function(){u!==null&&(clearTimeout(u),u=null),r!==void 0&&(r.removeEventListener!==void 0&&r.removeEventListener("resize",l,O.passive),r=void 0)},b=function(){f(),i&&i.contentDocument&&(r=i.contentDocument.defaultView,r.addEventListener("resize",l,O.passive),a())};const o=P();let r;return p(()=>{V(()=>{i=v.$el,i&&b()})}),x(f),v.trigger=l,()=>{if(o.value===!0)return y("object",{style:C.style,tabindex:-1,type:"text/html",data:C.url,"aria-hidden":"true",onLoad:b})}}}}),U=L({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(n,{slots:w,emit:u}){const{proxy:{$q:i}}=q(),t=_(D,z);if(t===z)return console.error("QFooter needs to be child of QLayout"),z;const l=g(parseInt(n.heightHint,10)),a=g(!0),v=g(H.value===!0||t.isContainer.value===!0?0:window.innerHeight),o=d(()=>n.reveal===!0||t.view.value.indexOf("F")>-1||i.platform.is.ios&&t.isContainer.value===!0),r=d(()=>t.isContainer.value===!0?t.containerHeight.value:v.value),f=d(()=>{if(n.modelValue!==!0)return 0;if(o.value===!0)return a.value===!0?l.value:0;const e=t.scroll.value.position+r.value+l.value-t.height.value;return e>0?e:0}),b=d(()=>n.modelValue!==!0||o.value===!0&&a.value!==!0),Q=d(()=>n.modelValue===!0&&b.value===!0&&n.reveal===!0),$=d(()=>"q-footer q-layout__section--marginal "+(o.value===!0?"fixed":"absolute")+"-bottom"+(n.bordered===!0?" q-footer--bordered":"")+(b.value===!0?" q-footer--hidden":"")+(n.modelValue!==!0?" q-layout--prevent-focus"+(o.value!==!0?" hidden":""):"")),B=d(()=>{const e=t.rows.value.bottom,s={};return e[0]==="l"&&t.left.space===!0&&(s[i.lang.rtl===!0?"right":"left"]=`${t.left.size}px`),e[2]==="r"&&t.right.space===!0&&(s[i.lang.rtl===!0?"left":"right"]=`${t.right.size}px`),s});function c(e,s){t.update("footer",e,s)}function h(e,s){e.value!==s&&(e.value=s)}function E({height:e}){h(l,e),c("size",e)}function T(){if(n.reveal!==!0)return;const{direction:e,position:s,inflectionPoint:k}=t.scroll.value;h(a,e==="up"||s-k<100||t.height.value-r.value-s-l.value<300)}function j(e){Q.value===!0&&h(a,!0),u("focusin",e)}m(()=>n.modelValue,e=>{c("space",e),h(a,!0),t.animate()}),m(f,e=>{c("offset",e)}),m(()=>n.reveal,e=>{e===!1&&h(a,n.modelValue)}),m(a,e=>{t.animate(),u("reveal",e)}),m([l,t.scroll,t.height],T),m(()=>i.screen.height,e=>{t.isContainer.value!==!0&&h(v,e)});const R={};return t.instances.footer=R,n.modelValue===!0&&c("size",l.value),c("space",n.modelValue),c("offset",f.value),x(()=>{t.instances.footer===R&&(t.instances.footer=void 0,c("size",0),c("offset",0),c("space",!1))}),()=>{const e=N(w.default,[y(I,{debounce:0,onResize:E})]);return n.elevated===!0&&e.push(y("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),y("footer",{class:$.value,style:B.value,onFocusin:j},e)}}});export{I as Q,U as a};
