import{f as ye}from"./ClosePopup.6775e2be.js";import{u as ze,a as qe}from"./selection.f044c102.js";import{y as Me,r as F,a as _,w as Q,U as Ee,M as Ve,aG as ce,O as ue,P as fe,x as de,h as z,n as ve,j as Se,m as Ae,s as xe,z as ne,v as _e,G as ke,g as Te,aE as Re,o as Be,X as Fe,aj as Oe,ac as He,b4 as Ce}from"./index.446b2176.js";let X=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const o=document.createElement("div");Object.assign(o.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(o),e.scrollLeft=-1e3,X=e.scrollLeft>=0,e.remove()}const V=1e3,Le=["start","center","end","start-force","center-force","end-force"],me=Array.prototype.filter,Ne=window.getComputedStyle(document.body).overflowAnchor===void 0?Me:function(e,o){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const f=e.children||[];me.call(f,d=>d.dataset&&d.dataset.qVsAnchor!==void 0).forEach(d=>{delete d.dataset.qVsAnchor});const a=f[o];a&&a.dataset&&(a.dataset.qVsAnchor="")}))};function C(e,o){return e+o}function Z(e,o,f,a,d,i,b,q){const g=e===window?document.scrollingElement||document.documentElement:e,y=d===!0?"offsetWidth":"offsetHeight",r={scrollStart:0,scrollViewSize:-b-q,scrollMaxSize:0,offsetStart:-b,offsetEnd:-q};if(d===!0?(e===window?(r.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,r.scrollViewSize+=document.documentElement.clientWidth):(r.scrollStart=g.scrollLeft,r.scrollViewSize+=g.clientWidth),r.scrollMaxSize=g.scrollWidth,i===!0&&(r.scrollStart=(X===!0?r.scrollMaxSize-r.scrollViewSize:0)-r.scrollStart)):(e===window?(r.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,r.scrollViewSize+=document.documentElement.clientHeight):(r.scrollStart=g.scrollTop,r.scrollViewSize+=g.clientHeight),r.scrollMaxSize=g.scrollHeight),f!==null)for(let S=f.previousElementSibling;S!==null;S=S.previousElementSibling)S.classList.contains("q-virtual-scroll--skip")===!1&&(r.offsetStart+=S[y]);if(a!==null)for(let S=a.nextElementSibling;S!==null;S=S.nextElementSibling)S.classList.contains("q-virtual-scroll--skip")===!1&&(r.offsetEnd+=S[y]);if(o!==e){const S=g.getBoundingClientRect(),p=o.getBoundingClientRect();d===!0?(r.offsetStart+=p.left-S.left,r.offsetEnd-=p.width):(r.offsetStart+=p.top-S.top,r.offsetEnd-=p.height),e!==window&&(r.offsetStart+=r.scrollStart),r.offsetEnd+=r.scrollMaxSize-r.offsetStart}return r}function se(e,o,f,a){o==="end"&&(o=(e===window?document.body:e)[f===!0?"scrollWidth":"scrollHeight"]),e===window?f===!0?(a===!0&&(o=(X===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-o),window.scrollTo(o,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,o):f===!0?(a===!0&&(o=(X===!0?e.scrollWidth-e.offsetWidth:0)-o),e.scrollLeft=o):e.scrollTop=o}function L(e,o,f,a){if(f>=a)return 0;const d=o.length,i=Math.floor(f/V),b=Math.floor((a-1)/V)+1;let q=e.slice(i,b).reduce(C,0);return f%V!==0&&(q-=o.slice(i*V,f).reduce(C,0)),a%V!==0&&a!==d&&(q-=o.slice(a,b*V).reduce(C,0)),q}const We={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},$e={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...We};function je({virtualScrollLength:e,getVirtualScrollTarget:o,getVirtualScrollEl:f,virtualScrollItemSizeComputed:a}){const d=ve(),{props:i,emit:b,proxy:q}=d,{$q:g}=q;let y,r,S,p=[],v;const k=F(0),A=F(0),T=F({}),R=F(null),E=F(null),B=F(null),h=F({from:0,to:0}),I=_(()=>i.tableColspan!==void 0?i.tableColspan:100);a===void 0&&(a=_(()=>i.virtualScrollItemSize));const ee=_(()=>a.value+";"+i.virtualScrollHorizontal),he=_(()=>ee.value+";"+i.virtualScrollSliceRatioBefore+";"+i.virtualScrollSliceRatioAfter);Q(he,()=>{H()}),Q(ee,Y);function Y(){U(r,!0)}function te(t){U(t===void 0?r:t)}function N(t,l){const n=o();if(n==null||n.nodeType===8)return;const m=Z(n,f(),R.value,E.value,i.virtualScrollHorizontal,g.lang.rtl,i.virtualScrollStickySizeStart,i.virtualScrollStickySizeEnd);S!==m.scrollViewSize&&H(m.scrollViewSize),W(n,m,Math.min(e.value-1,Math.max(0,parseInt(t,10)||0)),0,Le.indexOf(l)>-1?l:r>-1&&t>r?"end":"start")}function pe(){const t=o();if(t==null||t.nodeType===8)return;const l=Z(t,f(),R.value,E.value,i.virtualScrollHorizontal,g.lang.rtl,i.virtualScrollStickySizeStart,i.virtualScrollStickySizeEnd),n=e.value-1,m=l.scrollMaxSize-l.offsetStart-l.offsetEnd-A.value;if(y===l.scrollStart)return;if(l.scrollMaxSize<=0){W(t,l,0,0);return}S!==l.scrollViewSize&&H(l.scrollViewSize),G(h.value.from);const w=Math.floor(l.scrollMaxSize-Math.max(l.scrollViewSize,l.offsetEnd)-Math.min(v[n],l.scrollViewSize/2));if(w>0&&Math.ceil(l.scrollStart)>=w){W(t,l,n,l.scrollMaxSize-l.offsetEnd-p.reduce(C,0));return}let u=0,c=l.scrollStart-l.offsetStart,M=c;if(c<=m&&c+l.scrollViewSize>=k.value)c-=k.value,u=h.value.from,M=c;else for(let s=0;c>=p[s]&&u<n;s++)c-=p[s],u+=V;for(;c>0&&u<n;)c-=v[u],c>-l.scrollViewSize?(u++,M=c):M=v[u]+c;W(t,l,u,M)}function W(t,l,n,m,w){const u=typeof w=="string"&&w.indexOf("-force")>-1,c=u===!0?w.replace("-force",""):w,M=c!==void 0?c:"start";let s=Math.max(0,n-T.value[M]),x=s+T.value.total;x>e.value&&(x=e.value,s=Math.max(0,x-T.value.total)),y=l.scrollStart;const $=s!==h.value.from||x!==h.value.to;if($===!1&&c===void 0){oe(n);return}const{activeElement:ie}=document,O=B.value;$===!0&&O!==null&&O!==ie&&O.contains(ie)===!0&&(O.addEventListener("focusout",le),setTimeout(()=>{O!==null&&O.removeEventListener("focusout",le)})),Ne(O,n-s);const we=c!==void 0?v.slice(s,n).reduce(C,0):0;if($===!0){const j=x>=h.value.from&&s<=h.value.to?h.value.to:x;h.value={from:s,to:j},k.value=L(p,v,0,s),A.value=L(p,v,x,e.value),requestAnimationFrame(()=>{h.value.to!==x&&y===l.scrollStart&&(h.value={from:h.value.from,to:x},A.value=L(p,v,x,e.value))})}requestAnimationFrame(()=>{if(y!==l.scrollStart)return;$===!0&&G(s);const j=v.slice(s,n).reduce(C,0),P=j+l.offsetStart+k.value,ae=P+v[n];let J=P+m;if(c!==void 0){const be=j-we,K=l.scrollStart+be;J=u!==!0&&K<P&&ae<K+l.scrollViewSize?K:c==="end"?ae-l.scrollViewSize:P-(c==="start"?0:Math.round((l.scrollViewSize-v[n])/2))}y=J,se(t,J,i.virtualScrollHorizontal,g.lang.rtl),oe(n)})}function G(t){const l=B.value;if(l){const n=me.call(l.children,s=>s.classList&&s.classList.contains("q-virtual-scroll--skip")===!1),m=n.length,w=i.virtualScrollHorizontal===!0?s=>s.getBoundingClientRect().width:s=>s.offsetHeight;let u=t,c,M;for(let s=0;s<m;){for(c=w(n[s]),s++;s<m&&n[s].classList.contains("q-virtual-scroll--with-prev")===!0;)c+=w(n[s]),s++;M=c-v[u],M!==0&&(v[u]+=M,p[Math.floor(u/V)]+=M),u++}}}function le(){B.value!==null&&B.value!==void 0&&B.value.focus()}function U(t,l){const n=1*a.value;(l===!0||Array.isArray(v)===!1)&&(v=[]);const m=v.length;v.length=e.value;for(let u=e.value-1;u>=m;u--)v[u]=n;const w=Math.floor((e.value-1)/V);p=[];for(let u=0;u<=w;u++){let c=0;const M=Math.min((u+1)*V,e.value);for(let s=u*V;s<M;s++)c+=v[s];p.push(c)}r=-1,y=void 0,k.value=L(p,v,0,h.value.from),A.value=L(p,v,h.value.to,e.value),t>=0?(G(h.value.from),Ee(()=>{N(t)})):D()}function H(t){if(t===void 0&&typeof window!="undefined"){const c=o();c!=null&&c.nodeType!==8&&(t=Z(c,f(),R.value,E.value,i.virtualScrollHorizontal,g.lang.rtl,i.virtualScrollStickySizeStart,i.virtualScrollStickySizeEnd).scrollViewSize)}S=t;const l=parseFloat(i.virtualScrollSliceRatioBefore)||0,n=parseFloat(i.virtualScrollSliceRatioAfter)||0,m=1+l+n,w=t===void 0||t<=0?1:Math.ceil(t/a.value),u=Math.max(1,w,Math.ceil((i.virtualScrollSliceSize>0?i.virtualScrollSliceSize:10)/m));T.value={total:Math.ceil(u*m),start:Math.ceil(u*l),center:Math.ceil(u*(.5+l)),end:Math.ceil(u*(1+l)),view:w}}function ge(t,l){const n=i.virtualScrollHorizontal===!0?"width":"height",m={["--q-virtual-scroll-item-"+n]:a.value+"px"};return[t==="tbody"?z(t,{class:"q-virtual-scroll__padding",key:"before",ref:R},[z("tr",[z("td",{style:{[n]:`${k.value}px`,...m},colspan:I.value})])]):z(t,{class:"q-virtual-scroll__padding",key:"before",ref:R,style:{[n]:`${k.value}px`,...m}}),z(t,{class:"q-virtual-scroll__content",key:"content",ref:B,tabindex:-1},l.flat()),t==="tbody"?z(t,{class:"q-virtual-scroll__padding",key:"after",ref:E},[z("tr",[z("td",{style:{[n]:`${A.value}px`,...m},colspan:I.value})])]):z(t,{class:"q-virtual-scroll__padding",key:"after",ref:E,style:{[n]:`${A.value}px`,...m}})]}function oe(t){r!==t&&(i.onVirtualScroll!==void 0&&b("virtualScroll",{index:t,from:h.value.from,to:h.value.to-1,direction:t<r?"decrease":"increase",ref:q}),r=t)}H();const D=Ve(pe,g.platform.is.ios===!0?120:35);ce(()=>{H()});let re=!1;return ue(()=>{re=!0}),fe(()=>{if(re!==!0)return;const t=o();y!==void 0&&t!==void 0&&t!==null&&t.nodeType!==8?se(t,y,i.virtualScrollHorizontal,g.lang.rtl):N(r)}),de(()=>{D.cancel()}),Object.assign(q,{scrollTo:N,reset:Y,refresh:te}),{virtualScrollSliceRange:h,virtualScrollSliceSizeComputed:T,setVirtualScrollSize:H,onVirtualScrollEvt:D,localResetVirtualScroll:U,padVirtualScroll:ge,scrollTo:N,reset:Y,refresh:te}}const Pe=["horizontal","vertical","cell","none"];var Qe=Se({name:"QMarkupTable",props:{...ze,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,wrapCells:Boolean,separator:{type:String,default:"horizontal",validator:e=>Pe.includes(e)}},setup(e,{slots:o}){const f=ve(),a=qe(e,f.proxy.$q),d=_(()=>`q-markup-table q-table__container q-table__card q-table--${e.separator}-separator`+(a.value===!0?" q-table--dark q-table__card--dark q-dark":"")+(e.dense===!0?" q-table--dense":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")+(e.square===!0?" q-table--square":"")+(e.wrapCells===!1?" q-table--no-wrap":""));return()=>z("div",{class:d.value},[z("table",{class:"q-table"},Ae(o.default))])}});function Xe(e,o){return z("div",e,[z("table",{class:"q-table"},o)])}const Ye={list:ye,table:Qe},Ge=["list","table","__qtable"];var Ke=Se({name:"QVirtualScroll",props:{...$e,type:{type:String,default:"list",validator:e=>Ge.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:{default:void 0}},setup(e,{slots:o,attrs:f}){let a;const d=F(null),i=_(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:b,localResetVirtualScroll:q,padVirtualScroll:g,onVirtualScrollEvt:y}=je({virtualScrollLength:i,getVirtualScrollTarget:k,getVirtualScrollEl:v}),r=_(()=>{if(i.value===0)return[];const E=(B,h)=>({index:b.value.from+h,item:B});return e.itemsFn===void 0?e.items.slice(b.value.from,b.value.to).map(E):e.itemsFn(b.value.from,b.value.to-b.value.from).map(E)}),S=_(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),p=_(()=>e.scrollTarget!==void 0?{}:{tabindex:0});Q(i,()=>{q()}),Q(()=>e.scrollTarget,()=>{T(),A()});function v(){return d.value.$el||d.value}function k(){return a}function A(){a=xe(v(),e.scrollTarget),a.addEventListener("scroll",y,ne.passive)}function T(){a!==void 0&&(a.removeEventListener("scroll",y,ne.passive),a=void 0)}function R(){let E=g(e.type==="list"?"div":"tbody",r.value.map(o.default));return o.before!==void 0&&(E=o.before().concat(E)),ke(o.after,E)}return ce(()=>{q()}),_e(()=>{A()}),fe(()=>{A()}),ue(()=>{T()}),de(()=>{T()}),()=>{if(o.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?Xe({ref:d,class:"q-table__middle "+S.value},R()):z(Ye[e.type],{...f,ref:d,class:[f.class,S.value],...p.value},R)}}});const Ze=Te({__name:"AsyncItemContainer",props:{index:{},itemsList:{},height:{}},setup(e){const o=e,f=Re(o,"itemsList"),a=_(()=>{const{index:d}=o;return f.value[d]});return(d,i)=>(Be(),Fe("div",{style:Ce({height:d.height+"px"})},[a.value?Oe(d.$slots,"default",{key:0,item:a.value,index:d.index}):He("",!0)],4))}});export{Ke as Q,Ze as _,je as a,X as r,$e as u};
