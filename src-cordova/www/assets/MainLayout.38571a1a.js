var Vt=Object.defineProperty,It=Object.defineProperties;var jt=Object.getOwnPropertyDescriptors;var Ye=Object.getOwnPropertySymbols;var Qt=Object.prototype.hasOwnProperty,Ht=Object.prototype.propertyIsEnumerable;var Ge=(e,o,i)=>o in e?Vt(e,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[o]=i,K=(e,o)=>{for(var i in o||(o={}))Qt.call(o,i)&&Ge(e,i,o[i]);if(Ye)for(var i of Ye(o))Ht.call(o,i)&&Ge(e,i,o[i]);return e},ue=(e,o)=>It(e,jt(o));import{m as xe,n as He,p as Nt,q as ge,i as bt,s as Ne,v as yt,e as k,l as Q,x as _t,y as pe,z as Ut,w as j,A as Kt,B as Te,C as ke,D as wt,E as Wt,F as Xt,G as Zt,r as F,H as Yt,I as Oe,J as Ce,K as Gt,L as xt,M as Jt,N as ye,O as ea,P as ze,Q as Re,R as Je,S as _e,T as Ie,U as De,V as ta,W as aa,X as oa,Y as na,Z as je,_ as et,$ as tt,a0 as fe,a1 as at,k as me,a2 as Ue,o as H,a3 as se,a4 as _,a5 as z,a6 as la,a7 as Ke,a8 as U,a9 as ra,f as te,aa as ot,ab as X,ac as re,h as N,ad as he,ae as le,af as ie,ag as Me,ah as ia,ai as kt,aj as sa,ak as ua,al as ca,am as da,an as fa,ao as Ae,ap as va,aq as ma,ar as ha,as as ga,at as pa,au as ba}from"./index.ee248633.js";import{Q as qe,a as ya}from"./QFooter.833c5f21.js";import{Q as J,a as W}from"./QItemSection.18fcffc9.js";import{Q as nt}from"./QList.b92d5e2d.js";import{Q as _a,u as wa}from"./view.913dc8a4.js";import{u as St,a as Ct}from"./use-dark.6eb9a25b.js";import{c as xa,u as ka,a as Sa,b as Ca,d as za,e as Ma}from"./use-form.49a0a13a.js";import{b as ve,u as qa,a as $a,f as lt,c as Ta,d as Fa}from"./use-field.a5be7325.js";import{u as Pa,a as Ea,b as Ba}from"./use-key-composition.6a290b4f.js";import{u as Oa}from"./use-timeout.54d95478.js";import{_ as We}from"./plugin-vue_export-helper.21dcd24c.js";import{a as Ra}from"./focus-manager.387b0375.js";import{Q as Da,_ as Aa}from"./AsyncItemContainer.61e2c122.js";import{d as La}from"./debounce.124e7565.js";import"./use-virtual-scroll.cb3ec405.js";import"./rtl.4b414a6d.js";const Va=e=>e.endsWith(".org"),Ia=e=>new Promise((o,i)=>{const r=new FileReader;r.onload=()=>{o(r.result)},r.onerror=()=>{i(r.error)},r.readAsText(e)}),zt=async e=>new Promise((o,i)=>{e.file(o,i)}),ja=async e=>{const o=await zt(e),i=await Ia(o);return{filePath:e.fullPath.slice(1).split("/"),content:i}};function Qa(e,o){const i=document.querySelector(e),r=document.querySelector(o);if(!i||!r)return 0;const t=i.getBoundingClientRect().top,l=i.getBoundingClientRect().bottom,s=r.getBoundingClientRect().top;return r.getBoundingClientRect().bottom>l?1:t>=s?-1:0}var Qe=(e=>(e.openSearch="openSearch",e.restoreLastCompletionSession="restoreLastCompletionSession",e.toggleExecuteCommand="toggleExecuteCommand",e))(Qe||{});function Mt(){const{registerKeybindings:e,executeCommand:o,uregisterKeybindings:i}=xe(),r=He(),t=xe(),l=Nt(),s=[{command:"toggleExecuteCommand",keySequence:"Alt+KeyX",description:"Toggle command executor",group:"Completion",allowOnInput:!0,handler:()=>{r.toggleCompletion(),t.initCompletion()}},{command:"openSearch",keySequence:"/",description:"search notes",group:"Search",handler:()=>{r.openCompletion(),l.initCompletion()}},{command:"restoreLastCompletionSession",keySequence:"'",description:" Restore last completion session",group:"Search",handler:()=>{r.restoreLastCompletionSession()}}],n=[{handler:()=>{r.closeCompletion()},command:"exitCommandExecutor",keySequence:"Escape",description:"Exit command executor",group:"Completion",allowOnInput:!0},{handler:()=>{r.nextCandidate()},command:"nextCandidate",keySequence:"Control+KeyJ",description:"Next candidate",group:"Completion",allowOnInput:!0},{handler:()=>{r.previousCandidate()},command:"previousCandidate",keySequence:"Control+KeyK",description:"Previous candidate",group:"Completion",allowOnInput:!0},{command:"executeCandidate",keySequence:"Enter",description:"Execute candidate",group:"Completion",allowOnInput:!0,ignorePrompt:!0,handler:()=>{!r.opened||o(r.selectedCandidate)}}];return{register:()=>{e(s)},registerDynamicCommands:()=>{e(n)},unregisterDynamicCommands:()=>{i(n)}}}var Ha=ge({name:"QPageContainer",setup(e,{slots:o}){const{proxy:{$q:i}}=pe(),r=bt(Ne,()=>{console.error("QPageContainer needs to be child of QLayout")});yt(Ut,!0);const t=k(()=>{const l={};return r.header.space===!0&&(l.paddingTop=`${r.header.size}px`),r.right.space===!0&&(l[`padding${i.lang.rtl===!0?"Left":"Right"}`]=`${r.right.size}px`),r.footer.space===!0&&(l.paddingBottom=`${r.footer.size}px`),r.left.space===!0&&(l[`padding${i.lang.rtl===!0?"Right":"Left"}`]=`${r.left.size}px`),l});return()=>Q("div",{class:"q-page-container",style:t.value},_t(o.default))}});const{passive:rt}=Wt,Na=["both","horizontal","vertical"];var qt=ge({name:"QScrollObserver",props:{axis:{type:String,validator:e=>Na.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:{default:void 0}},emits:["scroll"],setup(e,{emit:o}){const i={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let r=null,t,l;j(()=>e.scrollTarget,()=>{y(),n()});function s(){r!==null&&r();const f=Math.max(0,Xt(t)),C=Zt(t),h={top:f-i.position.top,left:C-i.position.left};if(e.axis==="vertical"&&h.top===0||e.axis==="horizontal"&&h.left===0)return;const P=Math.abs(h.top)>=Math.abs(h.left)?h.top<0?"up":"down":h.left<0?"left":"right";i.position={top:f,left:C},i.directionChanged=i.direction!==P,i.delta=h,i.directionChanged===!0&&(i.direction=P,i.inflectionPoint=i.position),o("scroll",K({},i))}function n(){t=Kt(l,e.scrollTarget),t.addEventListener("scroll",a,rt),a(!0)}function y(){t!==void 0&&(t.removeEventListener("scroll",a,rt),t=void 0)}function a(f){if(f===!0||e.debounce===0||e.debounce==="0")s();else if(r===null){const[C,h]=e.debounce?[setTimeout(s,e.debounce),clearTimeout]:[requestAnimationFrame(s),cancelAnimationFrame];r=()=>{h(C),r=null}}}const L=pe();return Te(()=>{l=L.proxy.$el.parentNode,n()}),ke(()=>{r!==null&&r(),y()}),Object.assign(L.proxy,{trigger:a,getPosition:()=>i}),wt}}),Ua=ge({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:o,emit:i}){const{proxy:{$q:r}}=pe(),t=F(null),l=F(r.screen.height),s=F(e.container===!0?0:r.screen.width),n=F({position:0,direction:"down",inflectionPoint:0}),y=F(0),a=F(Yt.value===!0?0:Oe()),L=k(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),f=k(()=>e.container===!1?{minHeight:r.screen.height+"px"}:null),C=k(()=>a.value!==0?{[r.lang.rtl===!0?"left":"right"]:`${a.value}px`}:null),h=k(()=>a.value!==0?{[r.lang.rtl===!0?"right":"left"]:0,[r.lang.rtl===!0?"left":"right"]:`-${a.value}px`,width:`calc(100% + ${a.value}px)`}:null);function P(S){if(e.container===!0||document.qScrollPrevented!==!0){const D={position:S.position.top,direction:S.direction,directionChanged:S.directionChanged,inflectionPoint:S.inflectionPoint.top,delta:S.delta.top};n.value=D,e.onScroll!==void 0&&i("scroll",D)}}function R(S){const{height:D,width:u}=S;let p=!1;l.value!==D&&(p=!0,l.value=D,e.onScrollHeight!==void 0&&i("scroll-height",D),E()),s.value!==u&&(p=!0,s.value=u),p===!0&&e.onResize!==void 0&&i("resize",S)}function q({height:S}){y.value!==S&&(y.value=S,E())}function E(){if(e.container===!0){const S=l.value>y.value?Oe():0;a.value!==S&&(a.value=S)}}let B;const V={instances:{},view:k(()=>e.view),isContainer:k(()=>e.container),rootRef:t,height:l,containerHeight:y,scrollbarWidth:a,totalWidth:k(()=>s.value+a.value),rows:k(()=>{const S=e.view.toLowerCase().split(" ");return{top:S[0].split(""),middle:S[1].split(""),bottom:S[2].split("")}}),header:Ce({size:0,offset:0,space:!1}),right:Ce({size:300,offset:0,space:!1}),footer:Ce({size:0,offset:0,space:!1}),left:Ce({size:300,offset:0,space:!1}),scroll:n,animate(){B!==void 0?clearTimeout(B):document.body.classList.add("q-body--layout-animate"),B=setTimeout(()=>{document.body.classList.remove("q-body--layout-animate"),B=void 0},155)},update(S,D,u){V[S][D]=u}};if(yt(Ne,V),Oe()>0){let u=function(){S=null,D.classList.remove("hide-scrollbar")},p=function(){if(S===null){if(D.scrollHeight>r.screen.height)return;D.classList.add("hide-scrollbar")}else clearTimeout(S);S=setTimeout(u,300)},b=function(g){S!==null&&g==="remove"&&(clearTimeout(S),u()),window[`${g}EventListener`]("resize",p)},S=null;const D=document.body;j(()=>e.container!==!0?"add":"remove",b),e.container!==!0&&b("add"),Gt(()=>{b("remove")})}return()=>{const S=xt(o.default,[Q(qt,{onScroll:P}),Q(qe,{onResize:R})]),D=Q("div",{class:L.value,style:f.value,ref:e.container===!0?void 0:t,tabindex:-1},S);return e.container===!0?Q("div",{class:"q-layout-container overflow-hidden",ref:t},[Q(qe,{onResize:q}),Q("div",{class:"absolute-full",style:C.value},[Q("div",{class:"scroll",style:h.value},[D])])]):D}}});const Xe={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},Ka=Object.keys(Xe);Xe.all=!0;function it(e){const o={};for(const i of Ka)e[i]===!0&&(o[i]=!0);return Object.keys(o).length===0?Xe:(o.horizontal===!0?o.left=o.right=!0:o.left===!0&&o.right===!0&&(o.horizontal=!0),o.vertical===!0?o.up=o.down=!0:o.up===!0&&o.down===!0&&(o.vertical=!0),o.horizontal===!0&&o.vertical===!0&&(o.all=!0),o)}function st(e,o){return o.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof o.handler=="function"&&e.target.nodeName.toUpperCase()!=="INPUT"&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(o.uid)===-1)}function Le(e,o,i){const r=Ie(e);let t,l=r.left-o.event.x,s=r.top-o.event.y,n=Math.abs(l),y=Math.abs(s);const a=o.direction;a.horizontal===!0&&a.vertical!==!0?t=l<0?"left":"right":a.horizontal!==!0&&a.vertical===!0?t=s<0?"up":"down":a.up===!0&&s<0?(t="up",n>y&&(a.left===!0&&l<0?t="left":a.right===!0&&l>0&&(t="right"))):a.down===!0&&s>0?(t="down",n>y&&(a.left===!0&&l<0?t="left":a.right===!0&&l>0&&(t="right"))):a.left===!0&&l<0?(t="left",n<y&&(a.up===!0&&s<0?t="up":a.down===!0&&s>0&&(t="down"))):a.right===!0&&l>0&&(t="right",n<y&&(a.up===!0&&s<0?t="up":a.down===!0&&s>0&&(t="down")));let L=!1;if(t===void 0&&i===!1){if(o.event.isFirst===!0||o.event.lastDir===void 0)return{};t=o.event.lastDir,L=!0,t==="left"||t==="right"?(r.left-=l,n=0,l=0):(r.top-=s,y=0,s=0)}return{synthetic:L,payload:{evt:e,touch:o.event.mouse!==!0,mouse:o.event.mouse===!0,position:r,direction:t,isFirst:o.event.isFirst,isFinal:i===!0,duration:Date.now()-o.event.time,distance:{x:n,y},offset:{x:l,y:s},delta:{x:r.left-o.event.lastX,y:r.top-o.event.lastY}}}}let Wa=0;var we=Jt({name:"touch-pan",beforeMount(e,{value:o,modifiers:i}){if(i.mouse!==!0&&ye.has.touch!==!0)return;function r(l,s){i.mouse===!0&&s===!0?ta(l):(i.stop===!0&&_e(l),i.prevent===!0&&Je(l))}const t={uid:"qvtp_"+Wa++,handler:o,modifiers:i,direction:it(i),noop:wt,mouseStart(l){st(l,t)&&ea(l)&&(ze(t,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),t.start(l,!0))},touchStart(l){if(st(l,t)){const s=l.target;ze(t,"temp",[[s,"touchmove","move","notPassiveCapture"],[s,"touchcancel","end","passiveCapture"],[s,"touchend","end","passiveCapture"]]),t.start(l)}},start(l,s){if(ye.is.firefox===!0&&Re(e,!0),t.lastEvt=l,s===!0||i.stop===!0){if(t.direction.all!==!0&&(s!==!0||t.modifiers.mouseAllDir!==!0)){const a=l.type.indexOf("mouse")>-1?new MouseEvent(l.type,l):new TouchEvent(l.type,l);l.defaultPrevented===!0&&Je(a),l.cancelBubble===!0&&_e(a),Object.assign(a,{qKeyEvent:l.qKeyEvent,qClickOutside:l.qClickOutside,qAnchorHandled:l.qAnchorHandled,qClonedBy:l.qClonedBy===void 0?[t.uid]:l.qClonedBy.concat(t.uid)}),t.initialEvent={target:l.target,event:a}}_e(l)}const{left:n,top:y}=Ie(l);t.event={x:n,y,time:Date.now(),mouse:s===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:n,lastY:y}},move(l){if(t.event===void 0)return;const s=Ie(l),n=s.left-t.event.x,y=s.top-t.event.y;if(n===0&&y===0)return;t.lastEvt=l;const a=t.event.mouse===!0,L=()=>{r(l,a),i.preserveCursor!==!0&&(document.documentElement.style.cursor="grabbing"),a===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),xa(),t.styleCleanup=h=>{if(t.styleCleanup=void 0,i.preserveCursor!==!0&&(document.documentElement.style.cursor=""),document.body.classList.remove("non-selectable"),a===!0){const P=()=>{document.body.classList.remove("no-pointer-events--children")};h!==void 0?setTimeout(()=>{P(),h()},50):P()}else h!==void 0&&h()}};if(t.event.detected===!0){t.event.isFirst!==!0&&r(l,t.event.mouse);const{payload:h,synthetic:P}=Le(l,t,!1);h!==void 0&&(t.handler(h)===!1?t.end(l):(t.styleCleanup===void 0&&t.event.isFirst===!0&&L(),t.event.lastX=h.position.left,t.event.lastY=h.position.top,t.event.lastDir=P===!0?void 0:h.direction,t.event.isFirst=!1));return}if(t.direction.all===!0||a===!0&&t.modifiers.mouseAllDir===!0){L(),t.event.detected=!0,t.move(l);return}const f=Math.abs(n),C=Math.abs(y);f!==C&&(t.direction.horizontal===!0&&f>C||t.direction.vertical===!0&&f<C||t.direction.up===!0&&f<C&&y<0||t.direction.down===!0&&f<C&&y>0||t.direction.left===!0&&f>C&&n<0||t.direction.right===!0&&f>C&&n>0?(t.event.detected=!0,t.move(l)):t.end(l,!0))},end(l,s){if(t.event!==void 0){if(De(t,"temp"),ye.is.firefox===!0&&Re(e,!1),s===!0)t.styleCleanup!==void 0&&t.styleCleanup(),t.event.detected!==!0&&t.initialEvent!==void 0&&t.initialEvent.target.dispatchEvent(t.initialEvent.event);else if(t.event.detected===!0){t.event.isFirst===!0&&t.handler(Le(l===void 0?t.lastEvt:l,t).payload);const{payload:n}=Le(l===void 0?t.lastEvt:l,t,!0),y=()=>{t.handler(n)};t.styleCleanup!==void 0?t.styleCleanup(y):y()}t.event=void 0,t.initialEvent=void 0,t.lastEvt=void 0}}};e.__qtouchpan=t,i.mouse===!0&&ze(t,"main",[[e,"mousedown","mouseStart",`passive${i.mouseCapture===!0?"Capture":""}`]]),ye.has.touch===!0&&ze(t,"main",[[e,"touchstart","touchStart",`passive${i.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,o){const i=e.__qtouchpan;i!==void 0&&(o.oldValue!==o.value&&(typeof value!="function"&&i.end(),i.handler=o.value),i.direction=it(o.modifiers))},beforeUnmount(e){const o=e.__qtouchpan;o!==void 0&&(o.event!==void 0&&o.end(),De(o,"main"),De(o,"temp"),ye.is.firefox===!0&&Re(e,!1),o.styleCleanup!==void 0&&o.styleCleanup(),delete e.__qtouchpan)}});const ut=["vertical","horizontal"],Ve={vertical:{offset:"offsetY",scroll:"scrollTop",dir:"down",dist:"y"},horizontal:{offset:"offsetX",scroll:"scrollLeft",dir:"right",dist:"x"}},ct={prevent:!0,mouse:!0,mouseAllDir:!0},dt=e=>e>=250?50:Math.ceil(e/5);var Xa=ge({name:"QScrollArea",props:ue(K({},St),{thumbStyle:Object,verticalThumbStyle:Object,horizontalThumbStyle:Object,barStyle:[Array,String,Object],verticalBarStyle:[Array,String,Object],horizontalBarStyle:[Array,String,Object],contentStyle:[Array,String,Object],contentActiveStyle:[Array,String,Object],delay:{type:[String,Number],default:1e3},visible:{type:Boolean,default:null},tabindex:[String,Number],onScroll:Function}),setup(e,{slots:o,emit:i}){const r=F(!1),t=F(!1),l=F(!1),s={vertical:F(0),horizontal:F(0)},n={vertical:{ref:F(null),position:F(0),size:F(0)},horizontal:{ref:F(null),position:F(0),size:F(0)}},y=pe(),a=Ct(e,y.proxy.$q);let L,f;const C=F(null),h=k(()=>"q-scrollarea"+(a.value===!0?" q-scrollarea--dark":""));n.vertical.percentage=k(()=>{const m=n.vertical.size.value-s.vertical.value;if(m<=0)return 0;const v=ve(n.vertical.position.value/m,0,1);return Math.round(v*1e4)/1e4}),n.vertical.thumbHidden=k(()=>(e.visible===null?l.value:e.visible)!==!0&&r.value===!1&&t.value===!1||n.vertical.size.value<=s.vertical.value+1),n.vertical.thumbStart=k(()=>n.vertical.percentage.value*(s.vertical.value-n.vertical.thumbSize.value)),n.vertical.thumbSize=k(()=>Math.round(ve(s.vertical.value*s.vertical.value/n.vertical.size.value,dt(s.vertical.value),s.vertical.value))),n.vertical.style=k(()=>ue(K(K({},e.thumbStyle),e.verticalThumbStyle),{top:`${n.vertical.thumbStart.value}px`,height:`${n.vertical.thumbSize.value}px`})),n.vertical.thumbClass=k(()=>"q-scrollarea__thumb q-scrollarea__thumb--v absolute-right"+(n.vertical.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),n.vertical.barClass=k(()=>"q-scrollarea__bar q-scrollarea__bar--v absolute-right"+(n.vertical.thumbHidden.value===!0?" q-scrollarea__bar--invisible":"")),n.horizontal.percentage=k(()=>{const m=n.horizontal.size.value-s.horizontal.value;if(m<=0)return 0;const v=ve(n.horizontal.position.value/m,0,1);return Math.round(v*1e4)/1e4}),n.horizontal.thumbHidden=k(()=>(e.visible===null?l.value:e.visible)!==!0&&r.value===!1&&t.value===!1||n.horizontal.size.value<=s.horizontal.value+1),n.horizontal.thumbStart=k(()=>n.horizontal.percentage.value*(s.horizontal.value-n.horizontal.thumbSize.value)),n.horizontal.thumbSize=k(()=>Math.round(ve(s.horizontal.value*s.horizontal.value/n.horizontal.size.value,dt(s.horizontal.value),s.horizontal.value))),n.horizontal.style=k(()=>ue(K(K({},e.thumbStyle),e.horizontalThumbStyle),{left:`${n.horizontal.thumbStart.value}px`,width:`${n.horizontal.thumbSize.value}px`})),n.horizontal.thumbClass=k(()=>"q-scrollarea__thumb q-scrollarea__thumb--h absolute-bottom"+(n.horizontal.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),n.horizontal.barClass=k(()=>"q-scrollarea__bar q-scrollarea__bar--h absolute-bottom"+(n.horizontal.thumbHidden.value===!0?" q-scrollarea__bar--invisible":""));const P=k(()=>n.vertical.thumbHidden.value===!0&&n.horizontal.thumbHidden.value===!0?e.contentStyle:e.contentActiveStyle),R=[[we,m=>{p(m,"vertical")},void 0,K({vertical:!0},ct)]],q=[[we,m=>{p(m,"horizontal")},void 0,K({horizontal:!0},ct)]];function E(){const m={};return ut.forEach(v=>{const M=n[v];m[v+"Position"]=M.position.value,m[v+"Percentage"]=M.percentage.value,m[v+"Size"]=M.size.value,m[v+"ContainerSize"]=s[v].value}),m}const B=aa(()=>{const m=E();m.ref=y.proxy,i("scroll",m)},0);function V(m,v,M){if(ut.includes(m)===!1){console.error("[QScrollArea]: wrong first param of setScrollPosition (vertical/horizontal)");return}(m==="vertical"?et:tt)(C.value,v,M)}function S({height:m,width:v}){let M=!1;s.vertical.value!==m&&(s.vertical.value=m,M=!0),s.horizontal.value!==v&&(s.horizontal.value=v,M=!0),M===!0&&x()}function D({position:m}){let v=!1;n.vertical.position.value!==m.top&&(n.vertical.position.value=m.top,v=!0),n.horizontal.position.value!==m.left&&(n.horizontal.position.value=m.left,v=!0),v===!0&&x()}function u({height:m,width:v}){n.horizontal.size.value!==v&&(n.horizontal.size.value=v,x()),n.vertical.size.value!==m&&(n.vertical.size.value=m,x())}function p(m,v){const M=n[v];if(m.isFirst===!0){if(M.thumbHidden.value===!0)return;f=M.position.value,t.value=!0}else if(t.value!==!0)return;m.isFinal===!0&&(t.value=!1);const c=Ve[v],A=s[v].value,ae=(M.size.value-A)/(A-M.thumbSize.value),oe=m.distance[c.dist],G=f+(m.direction===c.dir?1:-1)*oe*ae;T(G,v)}function b(m,v){const M=n[v];if(M.thumbHidden.value!==!0){const c=m[Ve[v].offset];if(c<M.thumbStart.value||c>M.thumbStart.value+M.thumbSize.value){const A=c-M.thumbSize.value/2;T(A/s[v].value*M.size.value,v)}M.ref.value!==null&&M.ref.value.dispatchEvent(new MouseEvent(m.type,m))}}function g(m){b(m,"vertical")}function w(m){b(m,"horizontal")}function x(){r.value===!0?clearTimeout(L):r.value=!0,L=setTimeout(()=>{r.value=!1},e.delay),e.onScroll!==void 0&&B()}function T(m,v){C.value[Ve[v].scroll]=m}function $(){l.value=!0}function I(){l.value=!1}Object.assign(y.proxy,{getScrollTarget:()=>C.value,getScroll:E,getScrollPosition:()=>({top:n.vertical.position.value,left:n.horizontal.position.value}),getScrollPercentage:()=>({top:n.vertical.percentage.value,left:n.horizontal.percentage.value}),setScrollPosition:V,setScrollPercentage(m,v,M){V(m,v*(n[m].size.value-s[m].value),M)}});let Y=null;return oa(()=>{Y={top:n.vertical.position.value,left:n.horizontal.position.value}}),na(()=>{if(Y===null)return;const m=C.value;m!==null&&(tt(m,Y.left),et(m,Y.top))}),ke(B.cancel),()=>Q("div",{class:h.value,onMouseenter:$,onMouseleave:I},[Q("div",{ref:C,class:"q-scrollarea__container scroll relative-position fit hide-scrollbar",tabindex:e.tabindex!==void 0?e.tabindex:void 0},[Q("div",{class:"q-scrollarea__content absolute",style:P.value},xt(o.default,[Q(qe,{debounce:0,onResize:u})])),Q(qt,{axis:"both",onScroll:D})]),Q(qe,{debounce:0,onResize:S}),Q("div",{class:n.vertical.barClass.value,style:[e.barStyle,e.verticalBarStyle],"aria-hidden":"true",onMousedown:g}),Q("div",{class:n.horizontal.barClass.value,style:[e.barStyle,e.horizontalBarStyle],"aria-hidden":"true",onMousedown:w}),je(Q("div",{ref:n.vertical.ref,class:n.vertical.thumbClass.value,style:n.vertical.style.value,"aria-hidden":"true"}),R),je(Q("div",{ref:n.horizontal.ref,class:n.horizontal.thumbClass.value,style:n.horizontal.style.value,"aria-hidden":"true"}),q)])}});const ft=150;var Za=ge({name:"QDrawer",inheritAttrs:!1,props:ue(K(K({},ka),St),{side:{type:String,default:"left",validator:e=>["left","right"].includes(e)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:e=>["default","desktop","mobile"].includes(e),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean}),emits:[...Sa,"on-layout","mini-state"],setup(e,{slots:o,emit:i,attrs:r}){const t=pe(),{proxy:{$q:l}}=t,s=Ct(e,l),{preventBodyScroll:n}=Ea(),{registerTimeout:y}=Oa(),a=bt(Ne,()=>{console.error("QDrawer needs to be child of QLayout")});let L,f,C;const h=F(e.behavior==="mobile"||e.behavior!=="desktop"&&a.totalWidth.value<=e.breakpoint),P=k(()=>e.mini===!0&&h.value!==!0),R=k(()=>P.value===!0?e.miniWidth:e.width),q=F(e.showIfAbove===!0&&h.value===!1?!0:e.modelValue===!0),E=k(()=>e.persistent!==!0&&(h.value===!0||c.value===!0));function B(d,O){if(u(),d!==!1&&a.animate(),ne(0),h.value===!0){const ee=a.instances[Y.value];ee!==void 0&&ee.belowBreakpoint===!0&&ee.hide(!1),ce(1),a.isContainer.value!==!0&&n(!0)}else ce(0),d!==!1&&Pe(!1);y(()=>{d!==!1&&Pe(!0),O!==!0&&i("show",d)},ft)}function V(d,O){p(),d!==!1&&a.animate(),ce(0),ne(w.value*R.value),Ee(),O!==!0&&y(()=>{i("hide",d)},ft)}const{show:S,hide:D}=Ca({showing:q,hideOnRouteChange:E,handleShow:B,handleHide:V}),{addToHistory:u,removeFromHistory:p}=Pa(q,D,E),b={belowBreakpoint:h,hide:D},g=k(()=>e.side==="right"),w=k(()=>(l.lang.rtl===!0?-1:1)*(g.value===!0?1:-1)),x=F(0),T=F(!1),$=F(!1),I=F(R.value*w.value),Y=k(()=>g.value===!0?"left":"right"),m=k(()=>q.value===!0&&h.value===!1&&e.overlay===!1?e.miniToOverlay===!0?e.miniWidth:R.value:0),v=k(()=>e.overlay===!0||e.miniToOverlay===!0||a.view.value.indexOf(g.value?"R":"L")>-1||l.platform.is.ios===!0&&a.isContainer.value===!0),M=k(()=>e.overlay===!1&&q.value===!0&&h.value===!1),c=k(()=>e.overlay===!0&&q.value===!0&&h.value===!1),A=k(()=>"fullscreen q-drawer__backdrop"+(q.value===!1&&T.value===!1?" hidden":"")),ae=k(()=>({backgroundColor:`rgba(0,0,0,${x.value*.4})`})),oe=k(()=>g.value===!0?a.rows.value.top[2]==="r":a.rows.value.top[0]==="l"),G=k(()=>g.value===!0?a.rows.value.bottom[2]==="r":a.rows.value.bottom[0]==="l"),be=k(()=>{const d={};return a.header.space===!0&&oe.value===!1&&(v.value===!0?d.top=`${a.header.offset}px`:a.header.space===!0&&(d.top=`${a.header.size}px`)),a.footer.space===!0&&G.value===!1&&(v.value===!0?d.bottom=`${a.footer.offset}px`:a.footer.space===!0&&(d.bottom=`${a.footer.size}px`)),d}),Ft=k(()=>{const d={width:`${R.value}px`,transform:`translateX(${I.value}px)`};return h.value===!0?d:Object.assign(d,be.value)}),Pt=k(()=>"q-drawer__content fit "+(a.isContainer.value!==!0?"scroll":"overflow-auto")),Et=k(()=>`q-drawer q-drawer--${e.side}`+($.value===!0?" q-drawer--mini-animate":"")+(e.bordered===!0?" q-drawer--bordered":"")+(s.value===!0?" q-drawer--dark q-dark":"")+(T.value===!0?" no-transition":q.value===!0?"":" q-layout--prevent-focus")+(h.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":` q-drawer--${P.value===!0?"mini":"standard"}`+(v.value===!0||M.value!==!0?" fixed":"")+(e.overlay===!0||e.miniToOverlay===!0?" q-drawer--on-top":"")+(oe.value===!0?" q-drawer--top-padding":""))),Bt=k(()=>{const d=l.lang.rtl===!0?e.side:Y.value;return[[we,At,void 0,{[d]:!0,mouse:!0}]]}),Ot=k(()=>{const d=l.lang.rtl===!0?Y.value:e.side;return[[we,Ze,void 0,{[d]:!0,mouse:!0}]]}),Rt=k(()=>{const d=l.lang.rtl===!0?Y.value:e.side;return[[we,Ze,void 0,{[d]:!0,mouse:!0,mouseAllDir:!0}]]});function Fe(){Lt(h,e.behavior==="mobile"||e.behavior!=="desktop"&&a.totalWidth.value<=e.breakpoint)}j(h,d=>{d===!0?(L=q.value,q.value===!0&&D(!1)):e.overlay===!1&&e.behavior!=="mobile"&&L!==!1&&(q.value===!0?(ne(0),ce(0),Ee()):S(!1))}),j(()=>e.side,(d,O)=>{a.instances[O]===b&&(a.instances[O]=void 0,a[O].space=!1,a[O].offset=0),a.instances[d]=b,a[d].size=R.value,a[d].space=M.value,a[d].offset=m.value}),j(a.totalWidth,()=>{(a.isContainer.value===!0||document.qScrollPrevented!==!0)&&Fe()}),j(()=>e.behavior+e.breakpoint,Fe),j(a.isContainer,d=>{q.value===!0&&n(d!==!0),d===!0&&Fe()}),j(a.scrollbarWidth,()=>{ne(q.value===!0?0:void 0)}),j(m,d=>{de("offset",d)}),j(M,d=>{i("on-layout",d),de("space",d)}),j(g,()=>{ne()}),j(R,d=>{ne(),Be(e.miniToOverlay,d)}),j(()=>e.miniToOverlay,d=>{Be(d,R.value)}),j(()=>l.lang.rtl,()=>{ne()}),j(()=>e.mini,()=>{e.modelValue===!0&&(Dt(),a.animate())}),j(P,d=>{i("mini-state",d)});function ne(d){d===void 0?fe(()=>{d=q.value===!0?0:R.value,ne(w.value*d)}):(a.isContainer.value===!0&&g.value===!0&&(h.value===!0||Math.abs(d)===R.value)&&(d+=w.value*a.scrollbarWidth.value),I.value=d)}function ce(d){x.value=d}function Pe(d){const O=d===!0?"remove":a.isContainer.value!==!0?"add":"";O!==""&&document.body.classList[O]("q-body--drawer-toggle")}function Dt(){clearTimeout(f),t.proxy&&t.proxy.$el&&t.proxy.$el.classList.add("q-drawer--mini-animate"),$.value=!0,f=setTimeout(()=>{$.value=!1,t&&t.proxy&&t.proxy.$el&&t.proxy.$el.classList.remove("q-drawer--mini-animate")},150)}function At(d){if(q.value!==!1)return;const O=R.value,ee=ve(d.distance.x,0,O);if(d.isFinal===!0){ee>=Math.min(75,O)===!0?S():(a.animate(),ce(0),ne(w.value*O)),T.value=!1;return}ne((l.lang.rtl===!0?g.value!==!0:g.value)?Math.max(O-ee,0):Math.min(0,ee-O)),ce(ve(ee/O,0,1)),d.isFirst===!0&&(T.value=!0)}function Ze(d){if(q.value!==!0)return;const O=R.value,ee=d.direction===e.side,Se=(l.lang.rtl===!0?ee!==!0:ee)?ve(d.distance.x,0,O):0;if(d.isFinal===!0){Math.abs(Se)<Math.min(75,O)===!0?(a.animate(),ce(1),ne(0)):D(),T.value=!1;return}ne(w.value*Se),ce(ve(1-Se/O,0,1)),d.isFirst===!0&&(T.value=!0)}function Ee(){n(!1),Pe(!0)}function de(d,O){a.update(e.side,d,O)}function Lt(d,O){d.value!==O&&(d.value=O)}function Be(d,O){de("size",d===!0?e.miniWidth:O)}return a.instances[e.side]=b,Be(e.miniToOverlay,R.value),de("space",M.value),de("offset",m.value),e.showIfAbove===!0&&e.modelValue!==!0&&q.value===!0&&e["onUpdate:modelValue"]!==void 0&&i("update:modelValue",!0),Te(()=>{i("on-layout",M.value),i("mini-state",P.value),L=e.showIfAbove===!0;const d=()=>{(q.value===!0?B:V)(!1,!0)};if(a.totalWidth.value!==0){fe(d);return}C=j(a.totalWidth,()=>{C(),C=void 0,q.value===!1&&e.showIfAbove===!0&&h.value===!1?S(!1):d()})}),ke(()=>{C!==void 0&&C(),clearTimeout(f),q.value===!0&&Ee(),a.instances[e.side]===b&&(a.instances[e.side]=void 0,de("size",0),de("offset",0),de("space",!1))}),()=>{const d=[];h.value===!0&&(e.noSwipeOpen===!1&&d.push(je(Q("div",{key:"open",class:`q-drawer__opener fixed-${e.side}`,"aria-hidden":"true"}),Bt.value)),d.push(at("div",{ref:"backdrop",class:A.value,style:ae.value,"aria-hidden":"true",onClick:D},void 0,"backdrop",e.noSwipeBackdrop!==!0&&q.value===!0,()=>Rt.value)));const O=P.value===!0&&o.mini!==void 0,ee=[Q("div",ue(K({},r),{key:""+O,class:[Pt.value,r.class]}),O===!0?o.mini():_t(o.default))];return e.elevated===!0&&q.value===!0&&ee.push(Q("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),d.push(at("aside",{ref:"content",class:Et.value,style:Ft.value},ee,"contentclose",e.noSwipeClose!==!0&&h.value===!0,()=>Ot.value)),Q("div",{class:"q-drawer-container"},d)}}}),Ya="icons/brain.png";const Ga=U("div",{class:"github-btn btn-iconed"},null,-1),Ja=me({__name:"LoginButtons",props:{vertical:{type:Boolean}},setup(e){const o=e,i=Ue(),r=F(o.vertical),t=()=>{i.authViaGithub()};return(l,s)=>(H(),se("div",{class:Ke(["q-gutter-sm login-button flex flex-center",r.value?"q-py-md":"q-pa-md"])},[_(la,{onClick:t,round:"",flat:"",outline:""},{default:z(()=>[Ga]),_:1})],2))}}),eo={};function to(e,o){return" Share your knowledge. It is a way to achieve immortality (Dalai Lama) "}var vt=We(eo,[["render",to]]),ao="assets/google-play.3a23d09f.svg";const $t="0.8.19";const oo={class:"download-links"},no=U("img",{src:ao,height:"26"},null,-1),lo=[no],ro=me({__name:"DownloadLinks",setup(e){const o=`/builds/second-brain-${$t}.apk`;return(i,r)=>(H(),se("div",oo,[U("a",{href:o,target:"_blank"},lo)]))}});const io=["src"],so={class:"text-center q-mt-lg"},uo={class:"text-center subtitle text-weight-light text-italic"},co=U("br",null,null,-1),fo={class:"text-center subtitle text-weight-light text-italic"},vo=U("img",{src:Ya},null,-1),mo=U("br",null,null,-1),ho={class:"text-center subtitle text-weight-light text-italic"},go={class:"text-center q-mt-lg full-width"},po=me({__name:"SideBar",props:{user:{},opened:{type:Boolean}},setup(e){const o=e,i=()=>{window.open(t.value.profileUrl,"_blank")},r=Ue(),t=ra(o,"user"),l=F(!0),s=()=>r.logout(),{executeCommand:n}=xe(),y=()=>{n({command:Qe.openSearch})},a=F(o.opened),L=()=>{a.value=!a.value};return j(()=>o.opened,f=>{a.value=f}),(f,C)=>(H(),te(Za,{"show-if-above":"",mini:a.value,modelValue:l.value,"onUpdate:modelValue":C[1]||(C[1]=h=>l.value=h),width:320,breakpoint:0,bordered:""},{default:z(()=>[_(Xa,{class:"fit"},{default:z(()=>[_(nt,null,{default:z(()=>[t.value?(H(),se(Me,{key:0},[a.value?re("",!0):(H(),te(J,{key:0,clickable:"",class:"column justify-center avatar-item",onClick:i},{default:z(()=>[_(ot,{size:"160px",class:"q-mx-auto"},{default:z(()=>[U("img",{src:t.value.avatarUrl},null,8,io)]),_:1}),U("div",so,X(t.value.nickName),1),U("div",uo,X(t.value.email),1),co,U("div",fo,[_(vt)])]),_:1})),_(J,{clickable:"",to:{name:N(he).UserNotes,params:{userId:t.value.id}}},{default:z(()=>[_(W,{avatar:""},{default:z(()=>[_(le,{name:"account_box"})]),_:1}),_(W,null,{default:z(()=>[ie(X(f.$t("My notes")),1)]),_:1})]),_:1},8,["to"]),_(J,{to:{name:N(he).NoteList},clickable:"",exact:""},{default:z(()=>[_(W,{avatar:""},{default:z(()=>[_(le,{name:"feed"})]),_:1}),_(W,null,{default:z(()=>[ie(X(f.$t("All articles")),1)]),_:1})]),_:1},8,["to"]),_(J,{clickable:"",onClick:y},{default:z(()=>[_(W,{avatar:""},{default:z(()=>[_(le,{name:"search"})]),_:1}),_(W,null,{default:z(()=>[ie(X(f.$t("search")),1)]),_:1})]),_:1}),N(r).user?(H(),te(J,{key:1,clickable:"",to:{name:N(he).UserGraph,params:{userId:N(r).user.id}}},{default:z(()=>[_(W,{avatar:""},{default:z(()=>[_(le,{name:"hub"})]),_:1}),_(W,null,{default:z(()=>[ie(X(f.$t("Graph")),1)]),_:1})]),_:1},8,["to"])):re("",!0),t.value?(H(),te(J,{key:2,to:{name:N(he).EditNote},clickable:""},{default:z(()=>[_(W,{avatar:""},{default:z(()=>[_(le,{name:"add"})]),_:1}),_(W,null,{default:z(()=>[ie(X(f.$t("Create note")),1)]),_:1})]),_:1},8,["to"])):re("",!0),_(J,{class:"hidden",to:{name:N(he).Extensions},clickable:""},{default:z(()=>[_(W,{avatar:""},{default:z(()=>[_(le,{name:"extension"})]),_:1}),_(W,{class:"text-capitalize"},{default:z(()=>[ie(X(f.$t("extensions")),1)]),_:1})]),_:1},8,["to"]),t.value?(H(),te(J,{key:3,onClick:s,clickable:""},{default:z(()=>[_(W,{avatar:""},{default:z(()=>[_(le,{name:"logout"})]),_:1}),_(W,{class:"text-capitalize"},{default:z(()=>[ie(X(f.$t("logout")),1)]),_:1})]),_:1})):re("",!0)],64)):(H(),se(Me,{key:1},[a.value?re("",!0):(H(),te(J,{key:0,clickable:"",class:"column justify-center"},{default:z(()=>[_(ot,{size:"160px",class:"q-mx-auto"},{default:z(()=>[vo]),_:1}),mo,U("div",ho,[_(vt)])]),_:1})),a.value?re("",!0):(H(),te(J,{key:1},{default:z(()=>[U("div",go,X(f.$t("login to create your first note")),1)]),_:1})),_(Ja,{vertical:a.value},null,8,["vertical"])],64)),a.value?re("",!0):(H(),se(Me,{key:2},[_(J,{class:"text-italic flex-center"},{default:z(()=>[ie(X(N($t)),1)]),_:1}),_(J,null,{default:z(()=>[_(ro)]),_:1})],64))]),_:1}),_(nt,null,{default:z(()=>[_(_a),t.value?(H(),te(J,{key:0,clickable:"",onClick:C[0]||(C[0]=h=>N(n)({command:N(Qe).toggleExecuteCommand}))},{default:z(()=>[_(W,{avatar:""},{default:z(()=>[_(le,{name:"terminal"})]),_:1}),_(W,{class:"text-capitalize"},{default:z(()=>[ie(X(f.$t("execute command")),1)]),_:1})]),_:1})):re("",!0),t.value?(H(),te(J,{key:1,to:{name:N(he).Settings},clickable:""},{default:z(()=>[_(W,{avatar:""},{default:z(()=>[_(le,{name:"settings"})]),_:1}),_(W,{class:"text-capitalize"},{default:z(()=>[ie(X(f.$t("settings")),1)]),_:1})]),_:1},8,["to"])):re("",!0),_(J,{onClick:L,clickable:""},{default:z(()=>[_(W,{avatar:""},{default:z(()=>[_(le,{name:a.value?"arrow_circle_right":"arrow_circle_left"},null,8,["name"])]),_:1}),_(W,{class:"text-capitalize"},{default:z(()=>[ie(X(f.$t("toggle sidebar")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["mini","modelValue"]))}});const bo={},yo=U("div",{id:"mini-buffer"},null,-1);function _o(e,o){return H(),te(ya,{class:"mini-buffer"},{default:z(()=>[yo]),_:1})}var wo=We(bo,[["render",_o]]);const mt={date:"####/##/##",datetime:"####/##/## ##:##",time:"##:##",fulltime:"##:##:##",phone:"(###) ### - ####",card:"#### #### #### ####"},$e={"#":{pattern:"[\\d]",negate:"[^\\d]"},S:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]"},N:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]"},A:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleUpperCase()},a:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleLowerCase()},X:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleUpperCase()},x:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleLowerCase()}},Tt=Object.keys($e);Tt.forEach(e=>{$e[e].regex=new RegExp($e[e].pattern)});const xo=new RegExp("\\\\([^.*+?^${}()|([\\]])|([.*+?^${}()|[\\]])|(["+Tt.join("")+"])|(.)","g"),ht=/[.*+?^${}()|[\]\\]/g,Z=String.fromCharCode(1),ko={mask:String,reverseFillMask:Boolean,fillMask:[Boolean,String],unmaskedValue:Boolean};function So(e,o,i,r){let t,l,s,n;const y=F(null),a=F(f());function L(){return e.autogrow===!0||["textarea","text","search","url","tel","password"].includes(e.type)}j(()=>e.type+e.autogrow,h),j(()=>e.mask,u=>{if(u!==void 0)P(a.value,!0);else{const p=S(a.value);h(),e.modelValue!==p&&o("update:modelValue",p)}}),j(()=>e.fillMask+e.reverseFillMask,()=>{y.value===!0&&P(a.value,!0)}),j(()=>e.unmaskedValue,()=>{y.value===!0&&P(a.value)});function f(){if(h(),y.value===!0){const u=B(S(e.modelValue));return e.fillMask!==!1?D(u):u}return e.modelValue}function C(u){if(u<t.length)return t.slice(-u);let p="",b=t;const g=b.indexOf(Z);if(g>-1){for(let w=u-b.length;w>0;w--)p+=Z;b=b.slice(0,g)+p+b.slice(g)}return b}function h(){if(y.value=e.mask!==void 0&&e.mask.length>0&&L(),y.value===!1){n=void 0,t="",l="";return}const u=mt[e.mask]===void 0?e.mask:mt[e.mask],p=typeof e.fillMask=="string"&&e.fillMask.length>0?e.fillMask.slice(0,1):"_",b=p.replace(ht,"\\$&"),g=[],w=[],x=[];let T=e.reverseFillMask===!0,$="",I="";u.replace(xo,(M,c,A,ae,oe)=>{if(ae!==void 0){const G=$e[ae];x.push(G),I=G.negate,T===!0&&(w.push("(?:"+I+"+)?("+G.pattern+"+)?(?:"+I+"+)?("+G.pattern+"+)?"),T=!1),w.push("(?:"+I+"+)?("+G.pattern+")?")}else if(A!==void 0)$="\\"+(A==="\\"?"":A),x.push(A),g.push("([^"+$+"]+)?"+$+"?");else{const G=c!==void 0?c:oe;$=G==="\\"?"\\\\\\\\":G.replace(ht,"\\\\$&"),x.push(G),g.push("([^"+$+"]+)?"+$+"?")}});const Y=new RegExp("^"+g.join("")+"("+($===""?".":"[^"+$+"]")+"+)?$"),m=w.length-1,v=w.map((M,c)=>c===0&&e.reverseFillMask===!0?new RegExp("^"+b+"*"+M):c===m?new RegExp("^"+M+"("+(I===""?".":I)+"+)?"+(e.reverseFillMask===!0?"$":b+"*")):new RegExp("^"+M));s=x,n=M=>{const c=Y.exec(M);c!==null&&(M=c.slice(1).join(""));const A=[],ae=v.length;for(let oe=0,G=M;oe<ae;oe++){const be=v[oe].exec(G);if(be===null)break;G=G.slice(be.shift().length),A.push(...be)}return A.length>0?A.join(""):M},t=x.map(M=>typeof M=="string"?M:Z).join(""),l=t.split(Z).join(p)}function P(u,p,b){const g=r.value,w=g.selectionEnd,x=g.value.length-w,T=S(u);p===!0&&h();const $=B(T),I=e.fillMask!==!1?D($):$,Y=a.value!==I;g.value!==I&&(g.value=I),Y===!0&&(a.value=I),document.activeElement===g&&fe(()=>{if(I===l){const v=e.reverseFillMask===!0?l.length:0;g.setSelectionRange(v,v,"forward");return}if(b==="insertFromPaste"&&e.reverseFillMask!==!0){const v=w-1;q.right(g,v,v);return}if(["deleteContentBackward","deleteContentForward"].indexOf(b)>-1){const v=e.reverseFillMask===!0?w===0?I.length>$.length?1:0:Math.max(0,I.length-(I===l?0:Math.min($.length,x)+1))+1:w;g.setSelectionRange(v,v,"forward");return}if(e.reverseFillMask===!0)if(Y===!0){const v=Math.max(0,I.length-(I===l?0:Math.min($.length,x+1)));v===1&&w===1?g.setSelectionRange(v,v,"forward"):q.rightReverse(g,v,v)}else{const v=I.length-x;g.setSelectionRange(v,v,"backward")}else if(Y===!0){const v=Math.max(0,t.indexOf(Z),Math.min($.length,w)-1);q.right(g,v,v)}else{const v=w-1;q.right(g,v,v)}});const m=e.unmaskedValue===!0?S(I):I;String(e.modelValue)!==m&&i(m,!0)}function R(u,p,b){const g=B(S(u.value));p=Math.max(0,t.indexOf(Z),Math.min(g.length,p)),u.setSelectionRange(p,b,"forward")}const q={left(u,p,b,g){const w=t.slice(p-1).indexOf(Z)===-1;let x=Math.max(0,p-1);for(;x>=0;x--)if(t[x]===Z){p=x,w===!0&&p++;break}if(x<0&&t[p]!==void 0&&t[p]!==Z)return q.right(u,0,0);p>=0&&u.setSelectionRange(p,g===!0?b:p,"backward")},right(u,p,b,g){const w=u.value.length;let x=Math.min(w,b+1);for(;x<=w;x++)if(t[x]===Z){b=x;break}else t[x-1]===Z&&(b=x);if(x>w&&t[b-1]!==void 0&&t[b-1]!==Z)return q.left(u,w,w);u.setSelectionRange(g?p:b,b,"forward")},leftReverse(u,p,b,g){const w=C(u.value.length);let x=Math.max(0,p-1);for(;x>=0;x--)if(w[x-1]===Z){p=x;break}else if(w[x]===Z&&(p=x,x===0))break;if(x<0&&w[p]!==void 0&&w[p]!==Z)return q.rightReverse(u,0,0);p>=0&&u.setSelectionRange(p,g===!0?b:p,"backward")},rightReverse(u,p,b,g){const w=u.value.length,x=C(w),T=x.slice(0,b+1).indexOf(Z)===-1;let $=Math.min(w,b+1);for(;$<=w;$++)if(x[$-1]===Z){b=$,b>0&&T===!0&&b--;break}if($>w&&x[b-1]!==void 0&&x[b-1]!==Z)return q.leftReverse(u,w,w);u.setSelectionRange(g===!0?p:b,b,"forward")}};function E(u){if(ia(u)===!0)return;const p=r.value,b=p.selectionStart,g=p.selectionEnd;if(u.keyCode===37||u.keyCode===39){const w=q[(u.keyCode===39?"right":"left")+(e.reverseFillMask===!0?"Reverse":"")];u.preventDefault(),w(p,b,g,u.shiftKey)}else u.keyCode===8&&e.reverseFillMask!==!0&&b===g?q.left(p,b,g,!0):u.keyCode===46&&e.reverseFillMask===!0&&b===g&&q.rightReverse(p,b,g,!0)}function B(u){if(u==null||u==="")return"";if(e.reverseFillMask===!0)return V(u);const p=s;let b=0,g="";for(let w=0;w<p.length;w++){const x=u[b],T=p[w];if(typeof T=="string")g+=T,x===T&&b++;else if(x!==void 0&&T.regex.test(x))g+=T.transform!==void 0?T.transform(x):x,b++;else return g}return g}function V(u){const p=s,b=t.indexOf(Z);let g=u.length-1,w="";for(let x=p.length-1;x>=0&&g>-1;x--){const T=p[x];let $=u[g];if(typeof T=="string")w=T+w,$===T&&g--;else if($!==void 0&&T.regex.test($))do w=(T.transform!==void 0?T.transform($):$)+w,g--,$=u[g];while(b===x&&$!==void 0&&T.regex.test($));else return w}return w}function S(u){return typeof u!="string"||n===void 0?typeof u=="number"?n(""+u):u:n(u)}function D(u){return l.length-u.length<=0?u:e.reverseFillMask===!0&&u.length>0?l.slice(0,-u.length)+u:u+l.slice(u.length)}return{innerValue:a,hasMask:y,moveCursorForPaste:R,updateMaskValue:P,onMaskedKeydown:E}}function Co(e,o){function i(){const r=e.modelValue;try{const t="DataTransfer"in window?new DataTransfer:"ClipboardEvent"in window?new ClipboardEvent("").clipboardData:void 0;return Object(r)===r&&("length"in r?Array.from(r):[r]).forEach(l=>{t.items.add(l)}),{files:t.files}}catch{return{files:void 0}}}return o===!0?k(()=>{if(e.type==="file")return i()}):k(i)}var zo=ge({name:"QInput",inheritAttrs:!1,props:ue(K(K(K({},qa),ko),za),{modelValue:{required:!1},shadowText:String,type:{type:String,default:"text"},debounce:[String,Number],autogrow:Boolean,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]}),emits:[...$a,"paste","change"],setup(e,{emit:o,attrs:i}){const r={};let t=NaN,l,s,n,y;const a=F(null),L=Ma(e),{innerValue:f,hasMask:C,moveCursorForPaste:h,updateMaskValue:P,onMaskedKeydown:R}=So(e,o,T,a),q=Co(e,!0),E=k(()=>lt(f.value)),B=Ba(x),V=Ta(),S=k(()=>e.type==="textarea"||e.autogrow===!0),D=k(()=>S.value===!0||["text","search","url","tel","password"].includes(e.type)),u=k(()=>{const c=ue(K({},V.splitAttrs.listeners.value),{onInput:x,onPaste:w,onChange:I,onBlur:Y,onFocus:_e});return c.onCompositionstart=c.onCompositionupdate=c.onCompositionend=B,C.value===!0&&(c.onKeydown=R),e.autogrow===!0&&(c.onAnimationend=$),c}),p=k(()=>{const c=ue(K({tabindex:0,"data-autofocus":e.autofocus===!0||void 0,rows:e.type==="textarea"?6:void 0,"aria-label":e.label,name:L.value},V.splitAttrs.attributes.value),{id:V.targetUid.value,maxlength:e.maxlength,disabled:e.disable===!0,readonly:e.readonly===!0});return S.value===!1&&(c.type=e.type),e.autogrow===!0&&(c.rows=1),c});j(()=>e.type,()=>{a.value&&(a.value.value=e.modelValue)}),j(()=>e.modelValue,c=>{if(C.value===!0){if(s===!0&&(s=!1,String(c)===t))return;P(c)}else f.value!==c&&(f.value=c,e.type==="number"&&r.hasOwnProperty("value")===!0&&(l===!0?l=!1:delete r.value));e.autogrow===!0&&fe($)}),j(()=>e.autogrow,c=>{c===!0?fe($):a.value!==null&&i.rows>0&&(a.value.style.height="auto")}),j(()=>e.dense,()=>{e.autogrow===!0&&fe($)});function b(){Ra(()=>{const c=document.activeElement;a.value!==null&&a.value!==c&&(c===null||c.id!==V.targetUid.value)&&a.value.focus({preventScroll:!0})})}function g(){a.value!==null&&a.value.select()}function w(c){if(C.value===!0&&e.reverseFillMask!==!0){const A=c.target;h(A,A.selectionStart,A.selectionEnd)}o("paste",c)}function x(c){if(!c||!c.target)return;if(e.type==="file"){o("update:modelValue",c.target.files);return}const A=c.target.value;if(c.target.qComposing===!0){r.value=A;return}if(C.value===!0)P(A,!1,c.inputType);else if(T(A),D.value===!0&&c.target===document.activeElement){const{selectionStart:ae,selectionEnd:oe}=c.target;ae!==void 0&&oe!==void 0&&fe(()=>{c.target===document.activeElement&&A.indexOf(c.target.value)===0&&c.target.setSelectionRange(ae,oe)})}e.autogrow===!0&&$()}function T(c,A){y=()=>{e.type!=="number"&&r.hasOwnProperty("value")===!0&&delete r.value,e.modelValue!==c&&t!==c&&(t=c,A===!0&&(s=!0),o("update:modelValue",c),fe(()=>{t===c&&(t=NaN)})),y=void 0},e.type==="number"&&(l=!0,r.value=c),e.debounce!==void 0?(clearTimeout(n),r.value=c,n=setTimeout(y,e.debounce)):y()}function $(){const c=a.value;if(c!==null){const A=c.parentNode.style,{overflow:ae}=c.style;A.marginBottom=c.scrollHeight-1+"px",c.style.height="1px",c.style.overflow="hidden",c.style.height=c.scrollHeight+"px",c.style.overflow=ae,A.marginBottom=""}}function I(c){B(c),clearTimeout(n),y!==void 0&&y(),o("change",c.target.value)}function Y(c){c!==void 0&&_e(c),clearTimeout(n),y!==void 0&&y(),l=!1,s=!1,delete r.value,e.type!=="file"&&setTimeout(()=>{a.value!==null&&(a.value.value=f.value!==void 0?f.value:"")})}function m(){return r.hasOwnProperty("value")===!0?r.value:f.value!==void 0?f.value:""}ke(()=>{Y()}),Te(()=>{e.autogrow===!0&&$()}),Object.assign(V,{innerValue:f,fieldClass:k(()=>`q-${S.value===!0?"textarea":"input"}`+(e.autogrow===!0?" q-textarea--autogrow":"")),hasShadow:k(()=>e.type!=="file"&&typeof e.shadowText=="string"&&e.shadowText.length>0),inputRef:a,emitValue:T,hasValue:E,floatingLabel:k(()=>E.value===!0||lt(e.displayValue)),getControl:()=>Q(S.value===!0?"textarea":"input",K(K(K({ref:a,class:["q-field__native q-placeholder",e.inputClass],style:e.inputStyle},p.value),u.value),e.type!=="file"?{value:m()}:q.value)),getShadowControl:()=>Q("div",{class:"q-field__native q-field__shadow absolute-bottom no-pointer-events"+(S.value===!0?"":" text-no-wrap")},[Q("span",{class:"invisible"},m()),Q("span",e.shadowText)])});const v=Fa(V),M=pe();return Object.assign(M.proxy,{focus:b,select:g,getNativeElement:()=>a.value}),v}});const Mo={class:"flex column items-start justify-start fit no-wrap"},qo={class:"q-px-md full-width completion-input"},$o={class:"text-bold"},To={class:"text-italic"},Fo={class:"completion-footer full-width q-px-md q-py-xs text-center color-reverse"},gt=48,pt=me({__name:"CompletionResult",setup(e){const o=F(),i=He(),{candidates:r,filter:t,selectedIndex:l,total:s,candidateSelectedByDirection:n,placeholder:y}=kt(i),a=Mt(),{executeCommand:L}=xe();sa(()=>a.registerDynamicCommands()),ke(()=>a.unregisterDynamicCommands());const f=F(null);Te(()=>setTimeout(()=>{var E;return(E=f.value)==null?void 0:E.focus()}));const C=La(i.search,300),h=(E,B)=>{const V=Object.freeze(new Array(B).fill(null));return C(t.value,B,E),V};j(()=>n.value,()=>{var V;const E=Qa(".completion-scroll",".completion-item.selected");if(!E)return;const B=E===-1?"end":"start";(V=o.value)==null||V.scrollTo(l.value,B)});let R=[0,0];const q=(E,B)=>{(R[0]!==E.clientX||R[1]!==E.clientY)&&(R=[E.clientX,E.clientY],i.focusCandidate(B))};return(E,B)=>(H(),se("div",Mo,[U("div",qo,[_(zo,{modelValue:N(t),"onUpdate:modelValue":B[0]||(B[0]=V=>ua(t)?t.value=V:null),ref_key:"completionInput",ref:f,borderless:"",placeholder:E.$t(N(y))},{prepend:z(()=>[_(le,{name:"keyboard_arrow_right"})]),_:1},8,["modelValue","placeholder"])]),_(N(Da),{ref_key:"scrollTarget",ref:o,"items-size":N(s),"virtual-scroll-slice-size":N(ca)*3,"virtual-scroll-item-size":gt,"items-fn":h,"scroll-target":o.value,class:"completion-scroll full-width flex-1"},{default:z(({index:V})=>[_(Aa,{"items-list":N(r),index:V,height:gt},{default:z(({item:S,index:D})=>[(H(),te(J,{key:S.command,class:Ke(["flex column completion-item",{selected:D===N(l)}]),clickable:!0,onClick:u=>N(L)(S),onMouseover:u=>q(u,D)},{default:z(()=>[U("div",null,[S.icon?(H(),te(le,{key:0,name:S.icon,class:"q-pr-md"},null,8,["name"])):re("",!0),U("span",$o,"["+X(S.group)+"]: ",1),U("span",null,X(S.command),1)]),U("div",null,[U("span",To,X(S.description),1)])]),_:2},1032,["class","onClick","onMouseover"]))]),_:2},1032,["items-list","index"])]),_:1},8,["items-size","virtual-scroll-slice-size","scroll-target"]),U("div",Fo," Total items: "+X(N(s))+", Current item number: "+X(N(l)),1)]))}});const Po={key:1,class:"completion-container"},Eo=me({__name:"CompletionPromt",setup(e){const o=He(),{opened:i}=kt(o),r=wa();return(t,l)=>N(i)?(H(),se(Me,{key:0},[N(r).completionPosition==="bottom"?(H(),te(da,{key:0,to:"#mini-buffer"},[_(pt)])):(H(),se("div",Po,[_(pt)]))],64)):re("",!0)}}),Bo=["ase","art","bmp","blp","cd5","cit","cpt","cr2","cut","dds","dib","djvu","egt","exif","gif","gpl","grf","icns","ico","iff","jng","jpeg","jpg","jfif","jp2","jps","lbm","max","miff","mng","msp","nef","nitf","ota","pbm","pc1","pc2","pc3","pcf","pcx","pdn","pgm","PI1","PI2","PI3","pict","pct","pnm","pns","ppm","psb","psd","pdd","psp","px","pxm","pxr","qfx","raw","rle","sct","sgi","rgb","int","bw","tga","tiff","tif","vtf","xbm","xcf","xpm","3dv","amf","ai","awg","cgm","cdr","cmx","dxf","e2d","egt","eps","fs","gbr","odg","svg","stl","vrml","x3d","sxd","v2d","vnd","wmf","emf","art","xar","png","webp","jxr","hdp","wdp","cur","ecw","iff","lbm","liff","nrrd","pam","pcx","pgf","sgi","rgb","rgba","bw","int","inta","sid","ras","sun","tga","heic","heif"];const Oo=["onDrop","onDragenter","onDragleave"],Ro={key:0,class:"upload-overlay fit q-p-xl"},Do={class:"uploader-info fit flex justify-center items-center text-h1"},Ao=me({__name:"FileUploader",props:{accept:{default:()=>["org",...Bo]},multiple:{type:Boolean},directory:{type:Boolean}},emits:["uploaded","dropped"],setup(e,{emit:o}){const i=e,r=F(0),t=k(()=>r.value>0),l=f=>{var h;if(!i.accept)return!0;const C=f.split(".").pop();return(h=i.accept)==null?void 0:h.includes(C)},s=f=>{const C=f.createReader(),h=[],P=[];return new Promise((R,q)=>(C.readEntries(E=>{if(!E.length){R(h);return}P.push(E.map(async B=>{if(B.isFile&&l(B.name)&&h.push(B),B.isFile){R(h);return}return await s(B)}))},E=>q(E)),h))},n=f=>Array.from(f).reduce(async(C,h)=>{const P=await C,R=h.webkitGetAsEntry();if(R.isFile)return P.push(R),P;const q=await s(R);return P.push(...q),P},Promise.resolve([])),y=async f=>{var h;o("dropped"),r.value=0,f.preventDefault();const C=await n((h=f.dataTransfer)==null?void 0:h.items);o("uploaded",C)},a=f=>{r.value+=1,f.preventDefault()},L=f=>{r.value-=1,f.preventDefault()};return window.addEventListener("dragover",function(f){f=f||event,f.preventDefault()},!1),window.addEventListener("drop",function(f){f=f||event,f.preventDefault()},!1),(f,C)=>(H(),se("div",{onDrop:Ae(y,["prevent"]),onDragenter:Ae(a,["prevent"]),onDragleave:Ae(L,["prevent"]),class:Ke(["file-uploader",{"drag-target":t.value}])},[t.value?(H(),se("div",Ro,[U("div",Do,X(f.$t("Drag&drop your notes here!")),1)])):re("",!0),fa(f.$slots,"default",{},void 0,!0)],42,Oo))}});var Lo=We(Ao,[["__scopeId","data-v-fa4e0a04"]]);const Vo=va("importStore",()=>{const e=async s=>{if(Va(s.name)){i(s);return}t(s)},o=ma(),i=async s=>{const n=await ja(s),y=ga(pa(n.content));if(!y.meta.id)return;const a=new Date().toISOString();o.upsertNotesLocally([{content:n.content,id:y.meta.id,createdAt:a,updatedAt:a,filePath:n.filePath,meta:y.meta}])},r=ha(),t=async s=>{console.log("\u270E: [line 44][import-store.ts] fileEntry: ",s);const n=await zt(s);await r.saveFile(n)};return{uploadFiles:async s=>{s.forEach(async n=>{await e(n)})}}});const ln=me({__name:"MainLayout",setup(e){const o=F(!0),i=()=>o.value=!o.value,r=Ue(),t=k(()=>r.user);r.verifyUser();const{registerKeybindings:l}=xe();Mt().register(),l([{handler:()=>i(),command:"toggleLeftBar",keySequence:"o p",description:"Toggle left sidebar"}]);const s=Vo();return(n,y)=>{const a=ba("router-view");return H(),te(Ua,{view:"lHh Lpr lFf"},{default:z(()=>[_(Lo,{class:"main-content",onUploaded:N(s).uploadFiles},{default:z(()=>[_(po,{user:t.value,opened:o.value},null,8,["user","opened"]),_(Ha,{class:"height-max-dynamic"},{default:z(()=>[_(a)]),_:1}),_(wo),_(Eo)]),_:1},8,["onUploaded"])]),_:1})}}});export{ln as default};
