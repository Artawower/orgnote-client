var me=Object.defineProperty,he=Object.defineProperties;var pe=Object.getOwnPropertyDescriptors;var X=Object.getOwnPropertySymbols;var be=Object.prototype.hasOwnProperty,_e=Object.prototype.propertyIsEnumerable;var ee=(e,a,t)=>a in e?me(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,x=(e,a)=>{for(var t in a||(a={}))be.call(a,t)&&ee(e,t,a[t]);if(X)for(var t of X(a))_e.call(a,t)&&ee(e,t,a[t]);return e},N=(e,a)=>he(e,pe(a));import{q as B,e as g,l as f,L as oe,r as q,w as se,C as ye,aG as ke,x as T,aF as we,k as F,ar as xe,aj as qe,o as d,f as _,h as b,bh as ie,bi as ue,y as Se,aq as Ce,B as $e,a3 as k,ag as K,aY as O,a7 as Y,ac as y,ao as G,ab as C,a9 as j,a8 as S,a4 as h,a5 as p,aa as Be,af as A,av as Ne,aw as ze,ae as Z,bj as Pe,bk as ce,M as Qe,ax as Ie,bl as Fe,an as Re,a6 as I,Z as V,t as te,aN as Te,u as Le,aL as Ee,ad as Me}from"./index.ee248633.js";import{u as Ae,Q as je}from"./view.913dc8a4.js";import{u as Ve,a as Ue}from"./use-dark.6eb9a25b.js";import{u as De,a as He,b as We}from"./use-checkbox.72934353.js";import{l as Ke,m as Oe,Q as ae}from"./QMenu.d1f6c36e.js";import{a as U,Q as D}from"./QItemSection.18fcffc9.js";import{Q as Ye}from"./QList.b92d5e2d.js";import{_ as de}from"./plugin-vue_export-helper.21dcd24c.js";const Ge=e=>!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e);function Ze(e){return e.split("/").pop()}function le(e){const a=Ze(e);return Ge(e)?e:`/media/${a}`}function Je(e){return e.replace(/\.[^/.]+$/,"")}const Xe=e=>e.split("/").pop(),et=["top","middle","bottom"];var tt=B({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>et.includes(e)}},setup(e,{slots:a}){const t=g(()=>e.align!==void 0?{verticalAlign:e.align}:null),n=g(()=>{const s=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(s!==void 0?` text-${s}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>f("div",{class:n.value,style:t.value,role:"alert","aria-label":e.label},oe(a.default,e.label!==void 0?[e.label]:[]))}});const at={ratio:[String,Number]};function lt(e,a){return g(()=>{const t=Number(e.ratio||(a!==void 0?a.value:void 0));return isNaN(t)!==!0&&t>0?{paddingBottom:`${100/t}%`}:null})}const nt=16/9;var rt=B({name:"QImg",props:N(x({},at),{src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:nt},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String}),emits:["load","error"],setup(e,{slots:a,emit:t}){const n=q(e.initialRatio),s=lt(e,n);let v;const o=[q(null),q(e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null)],r=q(0),l=q(!1),u=q(!1),$=g(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),c=g(()=>({width:e.width,height:e.height})),w=g(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition`),z=g(()=>N(x({},e.imgStyle),{objectFit:e.fit,objectPosition:e.position}));se(()=>m(),R);function m(){return e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null}function R(i){if(clearTimeout(v),u.value=!1,i===null){l.value=!1,o[0].value=null,o[1].value=null;return}l.value=!0,o[r.value].value=i}function L({target:i}){v!==null&&(clearTimeout(v),n.value=i.naturalHeight===0?.5:i.naturalWidth/i.naturalHeight,P(i,1))}function P(i,Q){v===null||Q===1e3||(i.complete===!0?E(i):v=setTimeout(()=>{P(i,Q+1)},50))}function E(i){v!==null&&(r.value=r.value===1?0:1,o[r.value].value=null,l.value=!1,u.value=!1,t("load",i.currentSrc||i.src))}function ve(i){clearTimeout(v),l.value=!1,u.value=!0,o[0].value=null,o[1].value=null,t("error",i)}function fe(i,Q){return f("div",{class:"q-img__container absolute-full",key:i},Q)}function J(i){const Q=o[i].value,M=x({key:"img_"+i,class:w.value,style:z.value,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable},Q);return r.value===i?(M.class+=" q-img__image--waiting",Object.assign(M,{onLoad:L,onError:ve})):M.class+=" q-img__image--loaded",fe("img"+i,f("img",M))}function ge(){return l.value!==!0?f("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},T(a[u.value===!0?"error":"default"])):f("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},a.loading!==void 0?a.loading():e.noSpinner===!0?void 0:[f(we,{color:e.spinnerColor,size:e.spinnerSize})])}return R(m()),ye(()=>{clearTimeout(v),v=null}),()=>{const i=[];return s.value!==null&&i.push(f("div",{key:"filler",style:s.value})),u.value!==!0&&(o[0].value!==null&&i.push(J(0)),o[1].value!==null&&i.push(J(1))),i.push(f(ke,{name:"q-transition--fade"},ge)),f("div",{class:$.value,style:c.value,role:"img","aria-label":e.alt},i)}}});const ot=F({__name:"ImageResolver",props:{src:{}},setup(e){const a=e,t=xe(),n=q(null);qe(async()=>{await s()});const s=async()=>{const o=Xe(a.src),r=await t.getFile(o);!r||(n.value=URL.createObjectURL(r))},v=g(()=>le(a.src));return(o,r)=>{var l;return d(),_(rt,{class:"pointer rounded-borders image-preview",src:(l=n.value)!=null?l:b(le)(v.value)},null,8,["src"])}}});var ne=de(ot,[["__scopeId","data-v-476a70f8"]]),H=B({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:a}){const t=g(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>f(e.tag,{class:t.value},T(a.default))}}),st=B({name:"QCardActions",props:N(x({},ie),{vertical:Boolean}),setup(e,{slots:a}){const t=ue(e),n=g(()=>`q-card__actions ${t.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>f("div",{class:n.value},T(a.default))}}),it=B({name:"QCard",props:N(x({},Ve),{tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean}),setup(e,{slots:a}){const t=Se(),n=Ue(e,t.proxy.$q),s=g(()=>"q-card"+(n.value===!0?" q-card--dark q-dark":"")+(e.bordered===!0?" q-card--bordered":"")+(e.square===!0?" q-card--square no-border-radius":"")+(e.flat===!0?" q-card--flat no-shadow":""));return()=>f(e.tag,{class:s.value},T(a.default))}});const ut=["onClick"],ct=F({__name:"TagList",props:{tags:{},type:{default:"text"},inline:{type:Boolean,default:!0}},setup(e){const a=e,t=g(()=>Array.from(new Set(a.tags))),n=Ce(),s=l=>n.setFilters({searchText:l}),v=q(!1),o=q(null),r=()=>{if(o.value){const{scrollWidth:l,offsetWidth:u}=o.value;v.value=l>u}};return $e(()=>{r()}),(l,u)=>{var $;return($=t.value)!=null&&$.length?(d(),k("div",{key:0,ref_key:"tagsWrapperRef",ref:o,class:Y(["tags-wrapper",[v.value&&"long",{inline:a.inline}]])},[l.type==="badges"?(d(!0),k(K,{key:0},O(t.value,c=>(d(),_(tt,{class:"tag q-px-sm q-py-xs",key:c,onClick:G(w=>s(c),["stop","prevent"]),rounded:"",color:l.$q.dark.isActive?"grey-3":"grey-9",outline:"","text-color":l.$q.dark.isActive?"grey-3":"grey-9",size:"2rem",label:c},null,8,["onClick","color","text-color","label"]))),128)):(d(!0),k(K,{key:1},O(t.value,c=>(d(),k("span",{class:"text-tag text-italic text-weight-medium",key:c,onClick:G(w=>s(c),["stop","prevent"])}," #"+C(c),9,ut))),128))],2)):y("",!0)}}}),dt={class:"q-mr-md"},vt=["src"],ft={class:"col"},gt={key:0},mt={key:1,class:"text-italic"},ht=F({__name:"AuthorInfo",props:{author:{}},setup(e){const t=j(e,"author"),n=()=>window.open(t.value.profileUrl,"_blank");return(s,v)=>(d(),k("div",{onClick:n,class:"row cursor-pointer flex-center"},[S("div",dt,[h(Be,{size:"24px",class:"q-mx-auto"},{default:p(()=>[S("img",{src:t.value.avatarUrl},null,8,vt)]),_:1})]),S("div",ft,[t.value.nickName?(d(),k("span",gt,C(t.value.nickName),1)):y("",!0),A("\xA0 "),t.value.email?(d(),k("span",mt,C(t.value.email),1)):y("",!0)])]))}});var pt=B({name:"QBreadcrumbsEl",props:N(x({},Ne),{label:String,icon:String,tag:{type:String,default:"span"}}),setup(e,{slots:a}){const{linkTag:t,linkProps:n,linkClass:s,hasRouterLink:v,navigateToRouterLink:o}=ze(),r=g(()=>{const u=x({class:"q-breadcrumbs__el q-link flex inline items-center relative-position "+(e.disable!==!0?"q-link--focusable"+s.value:"q-breadcrumbs__el--disable")},n.value);return v.value===!0&&(u.onClick=o),u}),l=g(()=>"q-breadcrumbs__el-icon"+(e.label!==void 0?" q-breadcrumbs__el-icon--with-label":""));return()=>{const u=[];return e.icon!==void 0&&u.push(f(Z,{class:l.value,name:e.icon})),e.label!==void 0&&u.push(e.label),f(t.value,x({},r.value),oe(a.default,u))}}});const bt=["",!0];var _t=B({name:"QBreadcrumbs",props:N(x({},ie),{separator:{type:String,default:"/"},separatorColor:String,activeColor:{type:String,default:"primary"},gutter:{type:String,validator:e=>["none","xs","sm","md","lg","xl"].includes(e),default:"sm"}}),setup(e,{slots:a}){const t=ue(e),n=g(()=>`flex items-center ${t.value}${e.gutter==="none"?"":` q-gutter-${e.gutter}`}`),s=g(()=>e.separatorColor?` text-${e.separatorColor}`:""),v=g(()=>` text-${e.activeColor}`);return()=>{const o=Pe(T(a.default));if(o.length===0)return;let r=1;const l=[],u=o.filter(c=>c.type!==void 0&&c.type.name==="QBreadcrumbsEl").length,$=a.separator!==void 0?a.separator:()=>e.separator;return o.forEach(c=>{if(c.type!==void 0&&c.type.name==="QBreadcrumbsEl"){const w=r<u,z=c.props!==null&&bt.includes(c.props.disable),m=(w===!0?"":" q-breadcrumbs--last")+(z!==!0&&w===!0?v.value:"");r++,l.push(f("div",{class:`flex items-center${m}`},[c])),w===!0&&l.push(f("div",{class:"q-breadcrumbs__separator"+s.value},$()))}else l.push(c)}),f("div",{class:"q-breadcrumbs"},[f("div",{class:n.value},l)])}}});const yt=F({__name:"FilePath",props:{filePath:{}},setup(e){const t=j(e,"filePath"),n=ce(),s=v=>n.notify(`This functionality is not implemented yet. You clicked on ${v}`);return(v,o)=>(d(),_(_t,{class:"text-italic color-secondary pointer flex breadcrumbs"},{separator:p(()=>[h(Z,{size:"1.5em",name:"chevron_right",class:"color-secondary"})]),default:p(()=>[(d(!0),k(K,null,O(t.value,(r,l)=>(d(),_(pt,{class:"color-secondary text-no-wrap",label:l===t.value.length-1?b(Je)(r):r,key:r,onClick:G(u=>s(r),["stop","prevent"])},null,8,["label","onClick"]))),128))]),_:1}))}}),kt=f("div",{key:"svg",class:"q-checkbox__bg absolute"},[f("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24","aria-hidden":"true"},[f("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),f("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]);var wt=B({name:"QCheckbox",props:De,emits:He,setup(e){function a(t,n){const s=g(()=>(t.value===!0?e.checkedIcon:n.value===!0?e.indeterminateIcon:e.uncheckedIcon)||null);return()=>s.value!==null?[f("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[f(Z,{class:"q-checkbox__icon",name:s.value})])]:[kt]}return We("checkbox",a)}});function re(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const a=parseInt(e,10);return isNaN(a)?0:a}var W=Qe({name:"close-popup",beforeMount(e,{value:a}){const t={depth:re(a),handler(n){t.depth!==0&&setTimeout(()=>{const s=Ke(e);s!==void 0&&Oe(s,n,t.depth)})},handlerKey(n){Ie(n,13)===!0&&t.handler(n)}};e.__qclosepopup=t,e.addEventListener("click",t.handler),e.addEventListener("keyup",t.handlerKey)},updated(e,{value:a,oldValue:t}){a!==t&&(e.__qclosepopup.depth=re(a))},beforeUnmount(e){const a=e.__qclosepopup;e.removeEventListener("click",a.handler),e.removeEventListener("keyup",a.handlerKey),delete e.__qclosepopup}});const xt={class:"footer column q-py-bp-lg full-width"},qt={class:"note-actions full-width row justify-between"},St={class:"left"},Ct={class:"right row gap-sm action-btns"},$t=F({__name:"NoteFooter",props:{selectable:{type:Boolean},note:{}},setup(e){const a=e,t=j(a,"selectable"),n=j(a,"note"),s=Fe(),v=ce(),o=r=>{v.notify(`Feature ${r} is not implemented yet!`)};return(r,l)=>(d(),k("div",xt,[Re(r.$slots,"default"),S("div",qt,[S("div",St,[t.value?(d(),_(wt,{key:0,size:"sm","model-value":b(s).isNoteSelected(n.value.id),"onUpdate:modelValue":l[0]||(l[0]=u=>b(s).toggleNoteSelection(n.value.id))},null,8,["model-value"])):y("",!0)]),S("div",Ct,[h(I,{size:"sm",flat:"",round:"",icon:"far fa-bookmark",class:"q-pa-none"}),h(I,{size:"sm",flat:"",round:"",icon:"far fa-paper-plane",class:"q-pa-none"},{default:p(()=>[h(ae,{class:"flex row no-wrap q-pa-sm"},{default:p(()=>[h(I,{flat:"",rounded:"",size:"md",icon:"fa-brands fa-square-twitter",class:"q-pa-sm",onClick:l[1]||(l[1]=u=>o("Twitter share"))}),h(I,{flat:"",rounded:"",size:"md",icon:"fa-brands fa-telegram",class:"q-pa-sm",onClick:l[2]||(l[2]=u=>o("Telegram share"))}),h(I,{flat:"",rounded:"",size:"md",icon:"far fa-copy",class:"q-pa-sm",onClick:l[3]||(l[3]=u=>o("Copy link"))})]),_:1})]),_:1}),h(I,{size:"sm",flat:"",round:"",icon:"fas fa-ellipsis",class:"q-pa-none"},{default:p(()=>[h(ae,null,{default:p(()=>[h(Ye,{style:{"min-width":"100px"}},{default:p(()=>[n.value.isMy?V((d(),_(D,{key:0,clickable:"",onClick:l[4]||(l[4]=u=>o(r.$t("delete")))},{default:p(()=>[h(U,{class:"text-capitalize"},{default:p(()=>[A(C(r.$t("delete")),1)]),_:1})]),_:1})),[[W]]):y("",!0),n.value.isMy?y("",!0):V((d(),_(D,{key:1,clickable:"",onClick:l[5]||(l[5]=u=>o(r.$t("report")))},{default:p(()=>[h(U,{class:"text-capitalize"},{default:p(()=>[A(C(r.$t("report")),1)]),_:1})]),_:1})),[[W]]),n.value.isMy?y("",!0):V((d(),_(D,{key:2,clickable:"",onClick:l[6]||(l[6]=u=>o(r.$t("save")))},{default:p(()=>[h(U,{class:"text-capitalize"},{default:p(()=>[A(C(r.$t("save")),1)]),_:1})]),_:1})),[[W]])]),_:1})]),_:1})]),_:1})])])]))}});const Bt={key:0,class:"q-px-sm"},Nt={class:"full-width"},zt={class:"text-overline"},Pt={class:"text-h4 text-weight-bold pointer"},Qt={class:"text-caption rft description"},It={key:1,class:"mock-picture pointer rounded-borders"},Ft=F({__name:"PublicNotePreview",props:{notePreview:{},showAuthor:{type:Boolean},selectable:{type:Boolean},height:{},hideFooter:{type:Boolean},fullHeight:{type:Boolean}},setup(e){var w,z;const a=e,{notePreview:t,selectable:n}=te(a),s=g(()=>`${a.height}px`),v=Te(),o=m=>{v.push({name:Me.NoteDetail,params:{id:m.id}})},r=Ae(),l=g(()=>r.tile),u=Le(),{showUserProfiles:$}=te(u),c=q((z=(w=t.value)==null?void 0:w.meta.images)==null?void 0:z[0]);return se(()=>{var m;return(m=t.value)==null?void 0:m.meta.images},m=>{c.value=m==null?void 0:m[0]}),(m,R)=>(d(),k("article",{style:Ee({height:s.value})},[b(t)?(d(),_(it,{key:0,class:"full-height",flat:""},{default:p(()=>{var L;return[((L=b(t))==null?void 0:L.author)&&b($)&&m.showAuthor?(d(),k("div",Bt,[h(ht,{author:b(t).author},null,8,["author"])])):y("",!0),h(H,{horizontal:"",class:Y([{"note-card-content":l.value||!m.fullHeight,column:l.value,"full-height":m.fullHeight},"pointer q-px-sm"]),onClick:R[0]||(R[0]=P=>o(b(t)))},{default:p(()=>[l.value&&c.value?(d(),_(ne,{key:0,src:c.value},null,8,["src"])):y("",!0),h(H,{class:Y(["fit q-pa-none q-pt-sm note-text-content",{"content-with-img":!!c.value}])},{default:p(()=>{var P,E;return[S("div",Nt,[S("div",zt,C(b(t).meta.category),1),S("div",Pt,C(b(t).meta.title),1),b(t).filePath?(d(),_(yt,{key:0,filePath:b(t).filePath,class:"q-py-xs"},null,8,["filePath"])):y("",!0),S("div",Qt,C(b(t).meta.description),1)]),h(ct,{tags:(E=(P=b(t))==null?void 0:P.meta)==null?void 0:E.fileTags},null,8,["tags"])]}),_:1},8,["class"]),!l.value&&c.value?(d(),_(H,{key:1,class:"flex col-3 flex-start q-pa-none q-pt-sm justify-end img-preview-section"},{default:p(()=>[c.value?(d(),_(ne,{key:0,src:c.value},null,8,["src"])):(d(),k("div",It))]),_:1})):y("",!0)]),_:1},8,["class"]),m.hideFooter?y("",!0):(d(),_(st,{key:1,class:"q-px-none justify-between q-my-sm actions"},{default:p(()=>[h($t,{note:b(t),selectable:b(n)},null,8,["note","selectable"])]),_:1})),m.hideFooter?y("",!0):(d(),_(je,{key:2}))]}),_:1})):y("",!0)],4))}});var Dt=de(Ft,[["__scopeId","data-v-187fba07"]]);export{ne as I,Dt as P,tt as Q,yt as _,$t as a,le as b,ct as c,ht as d,wt as e};
