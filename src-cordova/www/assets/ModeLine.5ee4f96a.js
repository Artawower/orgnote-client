import{q as Se,r as h,e as d,D as ne,w as L,a0 as $,v as xe,C as Ae,X as Be,Y as Me,l as R,x as ke,ag as ae,y as Ie,aI as qe,k as $e,ac as pe,o as D,f as re,a5 as le,aK as p,a3 as Pe}from"./index.a68bc811.js";import{Q as Ee,a as Fe}from"./QFooter.da2957db.js";import{u as Ve}from"./use-tick.65c3baf2.js";import{u as ie}from"./use-timeout.ef68d622.js";import{r as We}from"./rtl.4b414a6d.js";function ze(t,S,_){const u=_===!0?["left","right"]:["top","bottom"];return`absolute-${S===!0?u[0]:u[1]}${t?` text-${t}`:""}`}const He=["left","center","right","justify"],se=()=>{};var Qe=Se({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:t=>He.includes(t)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(t,{slots:S,emit:_}){const u=Ie(),{proxy:{$q:b}}=u,{registerTick:ue}=Ve(),{registerTimeout:ce,removeTimeout:fe}=ie(),{registerTimeout:de}=ie(),T=h(null),c=h(null),C=h(t.modelValue),y=h(!1),P=h(!0),E=h(!1),F=h(!1),x=d(()=>b.platform.is.desktop===!0||t.mobileArrows===!0),w=[],A=h(!1);let O=!1,V,K,g,m=x.value===!0?G:ne;const ve=d(()=>({activeClass:t.activeClass,activeColor:t.activeColor,activeBgColor:t.activeBgColor,indicatorClass:ze(t.indicatorColor,t.switchIndicator,t.vertical),narrowIndicator:t.narrowIndicator,inlineLabel:t.inlineLabel,noCaps:t.noCaps})),he=d(()=>`q-tabs__content--align-${y.value===!0?"left":F.value===!0?"justify":t.align}`),ge=d(()=>`q-tabs row no-wrap items-center q-tabs--${y.value===!0?"":"not-"}scrollable q-tabs--${t.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${x.value===!0&&t.outsideArrows===!0?"outside":"inside"}`+(t.dense===!0?" q-tabs--dense":"")+(t.shrink===!0?" col-shrink":"")+(t.stretch===!0?" self-stretch":"")),me=d(()=>"q-tabs__content row no-wrap items-center self-stretch hide-scrollbar relative-position "+he.value+(t.contentClass!==void 0?` ${t.contentClass}`:"")+(b.platform.is.mobile===!0?" scroll":"")),B=d(()=>t.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),M=d(()=>t.vertical!==!0&&b.lang.rtl===!0),W=d(()=>We===!1&&M.value===!0);L(M,m),L(()=>t.modelValue,e=>{z({name:e,setCurrent:!0,skipEmit:!0})}),L(()=>t.outsideArrows,()=>{$(k())}),L(x,e=>{m=e===!0?G:ne,$(k())});function z({name:e,setCurrent:o,skipEmit:n,fromRoute:l}){C.value!==e&&(n!==!0&&_("update:modelValue",e),(o===!0||t["onUpdate:modelValue"]===void 0)&&(be(C.value,e),C.value=e)),l!==void 0&&(O=l)}function k(){ue(()=>{u.isDeactivated!==!0&&u.isUnmounted!==!0&&X({width:T.value.offsetWidth,height:T.value.offsetHeight})})}function X(e){if(B.value===void 0||c.value===null)return;const o=e[B.value.container],n=Math.min(c.value[B.value.scroll],Array.prototype.reduce.call(c.value.children,(a,i)=>a+(i[B.value.content]||0),0)),l=o>0&&n>o;y.value!==l&&(y.value=l),l===!0&&$(m);const s=o<parseInt(t.breakpoint,10);F.value!==s&&(F.value=s)}function be(e,o){const n=e!=null&&e!==""?w.find(s=>s.name.value===e):null,l=o!=null&&o!==""?w.find(s=>s.name.value===o):null;if(n&&l){const s=n.tabIndicatorRef.value,a=l.tabIndicatorRef.value;clearTimeout(V),s.style.transition="none",s.style.transform="none",a.style.transition="none",a.style.transform="none";const i=s.getBoundingClientRect(),r=a.getBoundingClientRect();a.style.transform=t.vertical===!0?`translate3d(0,${i.top-r.top}px,0) scale3d(1,${r.height?i.height/r.height:1},1)`:`translate3d(${i.left-r.left}px,0,0) scale3d(${r.width?i.width/r.width:1},1,1)`,$(()=>{V=setTimeout(()=>{a.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",a.style.transform="none"},70)})}l&&y.value===!0&&I(l.rootRef.value)}function I(e){const{left:o,width:n,top:l,height:s}=c.value.getBoundingClientRect(),a=e.getBoundingClientRect();let i=t.vertical===!0?a.top-l:a.left-o;if(i<0){c.value[t.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(i),m();return}i+=t.vertical===!0?a.height-s:a.width-n,i>0&&(c.value[t.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(i),m())}function G(){const e=c.value;if(e!==null){const o=e.getBoundingClientRect(),n=t.vertical===!0?e.scrollTop:Math.abs(e.scrollLeft);M.value===!0?(P.value=Math.ceil(n+o.width)<e.scrollWidth-1,E.value=n>0):(P.value=n>0,E.value=t.vertical===!0?Math.ceil(n+o.height)<e.scrollHeight:Math.ceil(n+o.width)<e.scrollWidth)}}function N(e){v(),Z(e),K=setInterval(()=>{Z(e)===!0&&v()},5)}function J(){N(W.value===!0?Number.MAX_SAFE_INTEGER:0)}function Y(){N(W.value===!0?0:Number.MAX_SAFE_INTEGER)}function v(){clearInterval(K)}function we(e,o){const n=Array.prototype.filter.call(c.value.children,r=>r===o||r.matches&&r.matches(".q-tab.q-focusable")===!0),l=n.length;if(l===0)return;if(e===36)return I(n[0]),!0;if(e===35)return I(n[l-1]),!0;const s=e===(t.vertical===!0?38:37),a=e===(t.vertical===!0?40:39),i=s===!0?-1:a===!0?1:void 0;if(i!==void 0){const r=M.value===!0?-1:1,f=n.indexOf(o)+i*r;return f>=0&&f<l&&(I(n[f]),n[f].focus({preventScroll:!0})),!0}}const _e=d(()=>W.value===!0?{get:e=>Math.abs(e.scrollLeft),set:(e,o)=>{e.scrollLeft=-o}}:t.vertical===!0?{get:e=>e.scrollTop,set:(e,o)=>{e.scrollTop=o}}:{get:e=>e.scrollLeft,set:(e,o)=>{e.scrollLeft=o}});function Z(e){const o=c.value,{get:n,set:l}=_e.value;let s=!1,a=n(o);const i=e<a?-1:1;return a+=i*5,a<0?(s=!0,a=0):(i===-1&&a<=e||i===1&&a>=e)&&(s=!0,a=e),l(o,a),m(),s}function H(){return w.filter(e=>e.routerProps!==void 0&&e.routerProps.hasRouterLink.value===!0)}function Te(){let e=null,o=O;const n={matchedLen:0,hrefLen:0,exact:!1,found:!1},{hash:l}=u.proxy.$route,s=C.value;let a=o===!0?se:r=>{s===r.name.value&&(o=!0,a=se)};const i=H();for(const r of i){const f=r.routerProps.exact.value===!0;if(r.routerProps[f===!0?"linkIsExactActive":"linkIsActive"].value!==!0||n.exact===!0&&f!==!0){a(r);continue}const Q=r.routerProps.linkRoute.value,j=Q.hash;if(f===!0){if(l===j){e=r.name.value;break}else if(l!==""&&j!==""){a(r);continue}}const U=Q.matched.length,oe=Q.href.length-j.length;if(U===n.matchedLen?oe>n.hrefLen:U>n.matchedLen){e=r.name.value,Object.assign(n,{matchedLen:U,hrefLen:oe,exact:f});continue}a(r)}(o===!0||e!==null)&&z({name:e,setCurrent:!0,fromRoute:!0})}function Ce(e){if(fe(),A.value!==!0&&T.value!==null&&e.target&&typeof e.target.closest=="function"){const o=e.target.closest(".q-tab");o&&T.value.contains(o)===!0&&(A.value=!0)}}function ye(){ce(()=>{A.value=!1},30)}function q(){ee.avoidRouteWatcher!==!0&&de(Te)}function Le(e){w.push(e),H().length>0&&(g===void 0&&(g=L(()=>u.proxy.$route,q)),q())}function Re(e){w.splice(w.indexOf(e),1),g!==void 0&&(H().length===0&&(g(),g=void 0),q())}const ee={currentModel:C,tabProps:ve,hasFocus:A,registerTab:Le,unregisterTab:Re,verifyRouteModel:q,updateModel:z,recalculateScroll:k,onKbdNavigate:we,avoidRouteWatcher:!1};xe(qe,ee),Ae(()=>{clearTimeout(V),g!==void 0&&g()});let te=!1;return Be(()=>{te=!0}),Me(()=>{te===!0&&k()}),()=>{const e=[R(Ee,{onResize:X}),R("div",{ref:c,class:me.value,onScroll:m},ke(S.default))];return x.value===!0&&e.push(R(ae,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(P.value===!0?"":" q-tabs__arrow--faded"),name:t.leftIcon||b.iconSet.tabs[t.vertical===!0?"up":"left"],onMousedown:J,onTouchstartPassive:J,onMouseup:v,onMouseleave:v,onTouchend:v}),R(ae,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(E.value===!0?"":" q-tabs__arrow--faded"),name:t.rightIcon||b.iconSet.tabs[t.vertical===!0?"down":"right"],onMousedown:Y,onTouchstartPassive:Y,onMouseup:v,onMouseleave:v,onTouchend:v})),R("div",{ref:T,class:ge.value,role:"tablist",onFocusin:Ce,onFocusout:ye},e)}}});const je={key:1,class:"footer-content q-px-lg"},Ge=$e({__name:"ModeLine",props:{tabMode:{type:Boolean,default:!0}},setup(t){const _=pe(t,"tabMode");return(u,b)=>(D(),re(Fe,{class:"no-shadow modeline"},{default:le(()=>[_.value?(D(),re(Qe,{key:0,"inline-label":"","indicator-color":"red"},{default:le(()=>[p(u.$slots,"default")]),_:3})):(D(),Pe("div",je,[p(u.$slots,"left"),p(u.$slots,"middle"),p(u.$slots,"right")]))]),_:3}))}});export{Ge as _};
