import{i as J,b as ve,Q as $e}from"./ClosePopup.6775e2be.js";import{j as Pe,r as m,a as f,w as A,p as xe,x as De,O as Ve,P as pe,h as N,m as Ee,a5 as he,bu as Fe,n as Qe,g as ge,aE as We,o as q,d as Q,Z as te,aj as F,X as oe,I as je,b5 as ze,bs as Ue,bv as He,a0 as Oe,Y as me,e as S,ac as ee,am as Xe,_ as Ge}from"./index.446b2176.js";import{N as Ke}from"./NoteList.6d44b4e3.js";import{Q as Ye,a as Ze}from"./QFooter.4d1ffcb9.js";import{r as Je}from"./AsyncItemContainer.c33b9601.js";import"./selection.f044c102.js";import"./PublicNotePreview.3f55e05d.js";import"./plugin-vue_export-helper.21dcd24c.js";function et(o,i,v){const u=v===!0?["left","right"]:["top","bottom"];return`absolute-${i===!0?u[0]:u[1]}${o?` text-${o}`:""}`}const tt=["left","center","right","justify"];var ot=Pe({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:o=>tt.includes(o)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(o,{slots:i,emit:v}){const{proxy:u}=Qe(),{$q:I}=u,{registerTick:W}=J(),{registerTick:j}=J(),{registerTick:$}=J(),{registerTimeout:g,removeTimeout:z}=ve(),{registerTimeout:P,removeTimeout:U}=ve(),b=m(null),d=m(null),C=m(o.modelValue),k=m(!1),H=m(!0),O=m(!1),ne=m(!1),h=[],X=m(0),x=m(!1);let L=null,B=null,T;const be=f(()=>({activeClass:o.activeClass,activeColor:o.activeColor,activeBgColor:o.activeBgColor,indicatorClass:et(o.indicatorColor,o.switchIndicator,o.vertical),narrowIndicator:o.narrowIndicator,inlineLabel:o.inlineLabel,noCaps:o.noCaps})),_e=f(()=>{const e=X.value,t=C.value;for(let n=0;n<e;n++)if(h[n].name.value===t)return!0;return!1}),Te=f(()=>`q-tabs__content--align-${k.value===!0?"left":ne.value===!0?"justify":o.align}`),ye=f(()=>`q-tabs row no-wrap items-center q-tabs--${k.value===!0?"":"not-"}scrollable q-tabs--${o.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${o.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${o.mobileArrows===!0?"":"out"}-arrows`+(o.dense===!0?" q-tabs--dense":"")+(o.shrink===!0?" col-shrink":"")+(o.stretch===!0?" self-stretch":"")),we=f(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+Te.value+(o.contentClass!==void 0?` ${o.contentClass}`:"")),D=f(()=>o.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),V=f(()=>o.vertical!==!0&&I.lang.rtl===!0),G=f(()=>Je===!1&&V.value===!0);A(V,M),A(()=>o.modelValue,e=>{K({name:e,setCurrent:!0,skipEmit:!0})}),A(()=>o.outsideArrows,p);function K({name:e,setCurrent:t,skipEmit:n}){C.value!==e&&(n!==!0&&o["onUpdate:modelValue"]!==void 0&&v("update:modelValue",e),(t===!0||o["onUpdate:modelValue"]===void 0)&&(Se(C.value,e),C.value=e))}function p(){W(()=>{le({width:b.value.offsetWidth,height:b.value.offsetHeight})})}function le(e){if(D.value===void 0||d.value===null)return;const t=e[D.value.container],n=Math.min(d.value[D.value.scroll],Array.prototype.reduce.call(d.value.children,(s,a)=>s+(a[D.value.content]||0),0)),r=t>0&&n>t;k.value=r,r===!0&&j(M),ne.value=t<parseInt(o.breakpoint,10)}function Se(e,t){const n=e!=null&&e!==""?h.find(s=>s.name.value===e):null,r=t!=null&&t!==""?h.find(s=>s.name.value===t):null;if(n&&r){const s=n.tabIndicatorRef.value,a=r.tabIndicatorRef.value;L!==null&&(clearTimeout(L),L=null),s.style.transition="none",s.style.transform="none",a.style.transition="none",a.style.transform="none";const l=s.getBoundingClientRect(),c=a.getBoundingClientRect();a.style.transform=o.vertical===!0?`translate3d(0,${l.top-c.top}px,0) scale3d(1,${c.height?l.height/c.height:1},1)`:`translate3d(${l.left-c.left}px,0,0) scale3d(${c.width?l.width/c.width:1},1,1)`,$(()=>{L=setTimeout(()=>{L=null,a.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",a.style.transform="none"},70)})}r&&k.value===!0&&R(r.rootRef.value)}function R(e){const{left:t,width:n,top:r,height:s}=d.value.getBoundingClientRect(),a=e.getBoundingClientRect();let l=o.vertical===!0?a.top-r:a.left-t;if(l<0){d.value[o.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(l),M();return}l+=o.vertical===!0?a.height-s:a.width-n,l>0&&(d.value[o.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(l),M())}function M(){const e=d.value;if(e===null)return;const t=e.getBoundingClientRect(),n=o.vertical===!0?e.scrollTop:Math.abs(e.scrollLeft);V.value===!0?(H.value=Math.ceil(n+t.width)<e.scrollWidth-1,O.value=n>0):(H.value=n>0,O.value=o.vertical===!0?Math.ceil(n+t.height)<e.scrollHeight:Math.ceil(n+t.width)<e.scrollWidth)}function ae(e){B!==null&&clearInterval(B),B=setInterval(()=>{qe(e)===!0&&y()},5)}function re(){ae(G.value===!0?Number.MAX_SAFE_INTEGER:0)}function se(){ae(G.value===!0?0:Number.MAX_SAFE_INTEGER)}function y(){B!==null&&(clearInterval(B),B=null)}function Ce(e,t){const n=Array.prototype.filter.call(d.value.children,c=>c===t||c.matches&&c.matches(".q-tab.q-focusable")===!0),r=n.length;if(r===0)return;if(e===36)return R(n[0]),n[0].focus(),!0;if(e===35)return R(n[r-1]),n[r-1].focus(),!0;const s=e===(o.vertical===!0?38:37),a=e===(o.vertical===!0?40:39),l=s===!0?-1:a===!0?1:void 0;if(l!==void 0){const c=V.value===!0?-1:1,_=n.indexOf(t)+l*c;return _>=0&&_<r&&(R(n[_]),n[_].focus({preventScroll:!0})),!0}}const Le=f(()=>G.value===!0?{get:e=>Math.abs(e.scrollLeft),set:(e,t)=>{e.scrollLeft=-t}}:o.vertical===!0?{get:e=>e.scrollTop,set:(e,t)=>{e.scrollTop=t}}:{get:e=>e.scrollLeft,set:(e,t)=>{e.scrollLeft=t}});function qe(e){const t=d.value,{get:n,set:r}=Le.value;let s=!1,a=n(t);const l=e<a?-1:1;return a+=l*5,a<0?(s=!0,a=0):(l===-1&&a<=e||l===1&&a>=e)&&(s=!0,a=e),r(t,a),M(),s}function ie(e,t){for(const n in e)if(e[n]!==t[n])return!1;return!0}function Ie(){let e=null,t={matchedLen:0,queryDiff:9999,hrefLen:0};const n=h.filter(l=>l.routeData!==void 0&&l.routeData.hasRouterLink.value===!0),{hash:r,query:s}=u.$route,a=Object.keys(s).length;for(const l of n){const c=l.routeData.exact.value===!0;if(l.routeData[c===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:_,query:Y,matched:Ne,href:Ae}=l.routeData.resolvedLink.value,Z=Object.keys(Y).length;if(c===!0){if(_!==r||Z!==a||ie(s,Y)===!1)continue;e=l.name.value;break}if(_!==""&&_!==r||Z!==0&&ie(Y,s)===!1)continue;const w={matchedLen:Ne.length,queryDiff:a-Z,hrefLen:Ae.length-_.length};if(w.matchedLen>t.matchedLen){e=l.name.value,t=w;continue}else if(w.matchedLen!==t.matchedLen)continue;if(w.queryDiff<t.queryDiff)e=l.name.value,t=w;else if(w.queryDiff!==t.queryDiff)continue;w.hrefLen>t.hrefLen&&(e=l.name.value,t=w)}e===null&&h.some(l=>l.routeData===void 0&&l.name.value===C.value)===!0||K({name:e,setCurrent:!0})}function ke(e){if(z(),x.value!==!0&&b.value!==null&&e.target&&typeof e.target.closest=="function"){const t=e.target.closest(".q-tab");t&&b.value.contains(t)===!0&&(x.value=!0,k.value===!0&&R(t))}}function Be(){g(()=>{x.value=!1},30)}function E(){ce.avoidRouteWatcher===!1?P(Ie):U()}function ue(){if(T===void 0){const e=A(()=>u.$route.fullPath,E);T=()=>{e(),T=void 0}}}function Re(e){h.push(e),X.value++,p(),e.routeData===void 0||u.$route===void 0?P(()=>{if(k.value===!0){const t=C.value,n=t!=null&&t!==""?h.find(r=>r.name.value===t):null;n&&R(n.rootRef.value)}}):(ue(),e.routeData.hasRouterLink.value===!0&&E())}function Me(e){h.splice(h.indexOf(e),1),X.value--,p(),T!==void 0&&e.routeData!==void 0&&(h.every(t=>t.routeData===void 0)===!0&&T(),E())}const ce={currentModel:C,tabProps:be,hasFocus:x,hasActiveTab:_e,registerTab:Re,unregisterTab:Me,verifyRouteModel:E,updateModel:K,onKbdNavigate:Ce,avoidRouteWatcher:!1};xe(Fe,ce);function fe(){L!==null&&clearTimeout(L),y(),T!==void 0&&T()}let de;return De(fe),Ve(()=>{de=T!==void 0,fe()}),pe(()=>{de===!0&&ue(),p()}),()=>N("div",{ref:b,class:ye.value,role:"tablist",onFocusin:ke,onFocusout:Be},[N(Ye,{onResize:le}),N("div",{ref:d,class:we.value,onScroll:M},Ee(i.default)),N(he,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(H.value===!0?"":" q-tabs__arrow--faded"),name:o.leftIcon||I.iconSet.tabs[o.vertical===!0?"up":"left"],onMousedownPassive:re,onTouchstartPassive:re,onMouseupPassive:y,onMouseleavePassive:y,onTouchendPassive:y}),N(he,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(O.value===!0?"":" q-tabs__arrow--faded"),name:o.rightIcon||I.iconSet.tabs[o.vertical===!0?"down":"right"],onMousedownPassive:se,onTouchstartPassive:se,onMouseupPassive:y,onMouseleavePassive:y,onTouchendPassive:y})])}});const nt={key:1,class:"footer-content q-px-lg"},lt=ge({__name:"ModeLine",props:{tabMode:{type:Boolean,default:!0}},setup(o){const v=We(o,"tabMode");return(u,I)=>(q(),Q(Ze,{class:"no-shadow modeline"},{default:te(()=>[v.value?(q(),Q(ot,{key:0,"inline-label":"","indicator-color":"red"},{default:te(()=>[F(u.$slots,"default")]),_:3})):(q(),oe("div",nt,[F(u.$slots,"left"),F(u.$slots,"middle"),F(u.$slots,"right")]))]),_:3}))}});const at={class:"container page-container"},rt={key:0},mt=ge({__name:"PrivateNotesPage",setup(o){const i=je(),v=ze(),u=m(null),I=()=>{i.setFilters({searchText:v.query.search,userId:v.params.userId})},W=f(()=>i.filters.limit),j=f(()=>i.filters.offset),$=()=>{I(),i.loadNotes()};$(),A(()=>v.params.userId,()=>{var b;((b=i.filters)==null?void 0:b.userId)!=v.params.userId&&$()});const g=Ue(),z=He(),P=async()=>{await i.deleteNotes(g.selectedNotesIds),z.syncNotes(),g.clearSelectedNotes()},U=f(()=>i.notes.length);return(b,d)=>(q(),oe("div",{ref_key:"scrollTarget",ref:u,class:"scroll-container"},[Oe("div",at,[me(Ke,{selectable:!0,limit:W.value,offset:j.value,total:S(i).total,"fetch-notes":S(i).fetchNotes,notes:S(i).notes,"scroll-target":u.value},null,8,["limit","offset","total","fetch-notes","notes","scroll-target"]),U.value?(q(),Q(lt,{key:0,tabMode:!1},{left:te(()=>[me($e,{style:{"margin-left":"-3px"},modelValue:S(g).isAllNotesSelected,size:"sm","onUpdate:modelValue":S(g).toggleBulkNotesSelection},null,8,["modelValue","onUpdate:modelValue"]),S(g).selectedNotesIds.length?(q(),oe("div",rt,Xe(S(g).selectedNotesIds.length),1)):ee("",!0),S(g).isSomeNotesSelected?(q(),Q(Ge,{key:1,square:"",class:"themed-button",icon:"delete",flat:"",onClick:P})):ee("",!0)]),_:1})):ee("",!0)])],512))}});export{mt as default};
