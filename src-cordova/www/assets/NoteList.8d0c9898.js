import{P as h}from"./PublicNotePreview.a26a84e6.js";import{u as L}from"./view.9ba803d1.js";import{Q as A,_ as F}from"./AsyncItemContainer.9709dcfe.js";import{k as p,a9 as i,e as I,aN as M,r as n,aM as Q,w as g,B as j,o as _,a3 as D,f as E,a5 as w,h as O,ac as W,a7 as N,a4 as b,a8 as $}from"./index.816ed836.js";import{d as G}from"./debounce.124e7565.js";import{_ as H}from"./plugin-vue_export-helper.21dcd24c.js";const J=p({__name:"NoteList",props:{selectable:{type:Boolean},limit:{},offset:{},total:{},notes:{},fetchNotes:{},scrollTarget:{},height:{default:230}},setup(y){const l=y;p({PublicNotePreview:h});const c=i(l,"selectable"),S=i(l,"limit"),u=i(l,"total"),k=i(l,"notes"),V=L(),o=I(()=>V.tile),z=M(),a=n(null),B=Q(),R=G(l.fetchNotes,300),f=n(0);g(()=>f.value,e=>z.replace({query:{from:e}}));const m=+B.query.from||0,T=(e,t)=>{const s=Object.freeze(new Array(t).fill(null));return R(e,t),s};let v=!1;const d=()=>{v||!m||!u.value||!a.value||(setTimeout(()=>{a.value.scrollTo(m,"start")}),v=!0)},x=e=>{f.value=e.index};g([u,a],()=>d()),j(()=>{d()});const r=n([]),C=(e,t)=>{if(!!c.value){if(t){r.value=[...r.value,e];return}r.value=r.value.filter(s=>s.id!==e.id)}};return(e,t)=>(_(),D("div",{class:N(["q-pa-lg items-start public-notes",{row:o.value,column:!o.value}])},[e.scrollTarget?(_(),E(O(A),{key:0,ref_key:"virtualScrollRef",ref:a,onVirtualScroll:x,"items-size":u.value,"virtual-scroll-slice-size":(S.value||10)*3,"virtual-scroll-item-size":230,"items-fn":T,"scroll-target":e.scrollTarget,class:"full-width",style:{"max-height":"cacl(100vh - 66px)"}},{default:w(({index:s})=>[b(F,{"items-list":k.value,index:s,height:e.height},{default:w(({item:P})=>[$("div",{class:N({fit:!o.value,"col-4":o.value})},[b(h,{"note-preview":P,"show-author":!c.value,selectable:c.value,height:e.height,onSelected:t[0]||(t[0]=q=>C(e.note,q))},null,8,["note-preview","show-author","selectable","height"])],2)]),_:2},1032,["items-list","index","height"])]),_:1},8,["items-size","virtual-scroll-slice-size","scroll-target"])):W("",!0)],2))}});var te=H(J,[["__scopeId","data-v-189b38f2"]]);export{te as N};
