var y=Object.defineProperty;var m=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable;var p=(t,s,i)=>s in t?y(t,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[s]=i,c=(t,s)=>{for(var i in s||(s={}))v.call(s,i)&&p(t,i,s[i]);if(m)for(var i of m(s))h.call(s,i)&&p(t,i,s[i]);return t};import{ac as C,ad as K,r as E,c as f,a6 as O}from"./index.e5e5ad80.js";function j(t){if(t===null)return!1;const s=t.tagName.toLowerCase();return["input","textarea"].includes(s)}function w(t,s,i=!0){const a=i?Object.fromEntries(Object.entries(s).map(([d,l])=>[d,u=>{j(u.target)||l(u)}])):s;return C(t,a)}const x="default",T=K("keybindings",()=>{const t=E({}),s=f(()=>Object.values(t).reduce((n,e)=>{var r;const o=e.group;return(r=n[o])!=null||(n[o]=[]),n[o].push(e),n},{})),i=f(()=>Object.values(t.value));let a=[];const d=()=>{a.forEach(n=>n()),a=[]},l=n=>{const e=c({},t.value);e[n]&&delete e[n],t.value=e},u=()=>{Object.values(t.value).forEach(n=>{const e={[n.keySequence]:n.handler};a.push(w(window,e,!n.allowOnInput))})},b=O();return{keybindingList:i,executeCommand:({command:n,commandHandler:e})=>{var o,r;if(e){e();return}(r=(o=t.value[n])==null?void 0:o.handler)==null||r.call(o)},registerKeybindings:n=>{d();const e=n.reduce((o,r)=>{var g;return(g=r.group)!=null||(r.group=x),o[r.command]=r,o},{});t.value=c(c({},t.value),e),u()},deleteKeybinding:l,groupedKeybindings:s,uregisterKeybindings:n=>{d(),n.forEach(e=>{delete t.value[e.command]}),u()},initCompletionCandidatesGetter:()=>{const n=i.value.filter(e=>!e.ignorePrompt).map(e=>({command:e.command,description:e.description,group:e.group,icon:"settings"}));b.setCandidateGetter(e=>n.filter(o=>o.command.includes(e)))}}});export{T as u};
