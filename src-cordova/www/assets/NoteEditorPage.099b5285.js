import{j as E,r as y,a as n,w as p,U as M,h as q,m as k,V as R,G as Q,n as $,g as A,b6 as T,o as b,X as j,am as F,b5 as L,ab as O,ak as U,b7 as G,x as X,a9 as Y,ah as Z,aP as H,d as C,Z as N,$ as J,e as w,ac as K,Y as D,al as W}from"./index.446b2176.js";import{T as ee}from"./TouchPan.20c65915.js";import{u as te,a as ae}from"./selection.f044c102.js";import{Q as re}from"./QPage.6c51e21a.js";import{o as oe}from"./change-toolbar-actions.cbc5385b.js";import{_ as le}from"./plugin-vue_export-helper.21dcd24c.js";var se=E({name:"QSplitter",props:{...te,modelValue:{type:Number,required:!0},reverse:Boolean,unit:{type:String,default:"%",validator:e=>["%","px"].includes(e)},limits:{type:Array,validator:e=>e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"?!1:e[0]>=0&&e[0]<=e[1]},emitImmediately:Boolean,horizontal:Boolean,disable:Boolean,beforeClass:[Array,String,Object],afterClass:[Array,String,Object],separatorClass:[Array,String,Object],separatorStyle:[Array,String,Object]},emits:["update:modelValue"],setup(e,{slots:a,emit:i}){const{proxy:{$q:r}}=$(),u=ae(e,r),l=y(null),v={before:y(null),after:y(null)},S=n(()=>`q-splitter no-wrap ${e.horizontal===!0?"q-splitter--horizontal column":"q-splitter--vertical row"} q-splitter--${e.disable===!0?"disabled":"workable"}`+(u.value===!0?" q-splitter--dark":"")),d=n(()=>e.horizontal===!0?"height":"width"),c=n(()=>e.reverse!==!0?"before":"after"),o=n(()=>e.limits!==void 0?e.limits:e.unit==="%"?[10,90]:[50,1/0]);function g(t){return(e.unit==="%"?t:Math.round(t))+e.unit}const x=n(()=>({[c.value]:{[d.value]:g(e.modelValue)}}));let s,m,h,V,_;function I(t){if(t.isFirst===!0){const z=l.value.getBoundingClientRect()[d.value];s=e.horizontal===!0?"up":"left",m=e.unit==="%"?100:z,h=Math.min(m,o.value[1],Math.max(o.value[0],e.modelValue)),V=(e.reverse!==!0?1:-1)*(e.horizontal===!0?1:r.lang.rtl===!0?-1:1)*(e.unit==="%"?z===0?0:100/z:1),l.value.classList.add("q-splitter--active");return}if(t.isFinal===!0){_!==e.modelValue&&i("update:modelValue",_),l.value.classList.remove("q-splitter--active");return}const f=h+V*(t.direction===s?-1:1)*t.distance[e.horizontal===!0?"y":"x"];_=Math.min(m,o.value[1],Math.max(o.value[0],f)),v[c.value].value.style[d.value]=g(_),e.emitImmediately===!0&&e.modelValue!==_&&i("update:modelValue",_)}const P=n(()=>[[ee,I,void 0,{[e.horizontal===!0?"vertical":"horizontal"]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function B(t,f){t<f[0]?i("update:modelValue",f[0]):t>f[1]&&i("update:modelValue",f[1])}return p(()=>e.modelValue,t=>{B(t,o.value)}),p(()=>e.limits,()=>{M(()=>{B(e.modelValue,o.value)})}),()=>{const t=[q("div",{ref:v.before,class:["q-splitter__panel q-splitter__before"+(e.reverse===!0?" col":""),e.beforeClass],style:x.value.before},k(a.before)),q("div",{class:["q-splitter__separator",e.separatorClass],style:e.separatorStyle,"aria-disabled":e.disable===!0?"true":void 0},[R("div",{class:"q-splitter__separator-area absolute-full"},k(a.separator),"sep",e.disable!==!0,()=>P.value)]),q("div",{ref:v.after,class:["q-splitter__panel q-splitter__after"+(e.reverse===!0?"":" col"),e.afterClass],style:x.value.after},k(a.after))];return q("div",{class:S.value,ref:l},Q(a.default,t))}}});const ie={class:"org-debug q-py-sm q-px-md"},ne=A({__name:"NoteDebugger",setup(e){const a=T(),i=n(()=>{var r;return(r=a.orgTree)==null?void 0:r.toString()});return(r,u)=>(b(),j("div",ie,F(i.value),1))}});var ue=le(ne,[["__scopeId","data-v-9cbfbcd0"]]);const ge=A({__name:"NoteEditorPage",setup(e){const a=L(),i=a.params.id,r=T(),u=O(),{currentNote:l,currentOrgTree:v}=U(u),S=y(50),d=()=>{!l.value||(r.setFilePath(l.value.filePath),r.setNoteContent(v.value),r.setCreatedTime(l.value.createdAt))};d(),p(()=>l.value,()=>d()),u.selectNoteById(i),p(()=>a.params.id,s=>s&&u.selectNoteById(s));const c=n(()=>{var s;return!a.params.id||((s=l.value)==null?void 0:s.id)===a.params.id}),o=G(),g=()=>{(c.value?o.loading.hide:o.loading.show)()};g(),p(()=>c.value,()=>g()),X(()=>{o.loading.hide()});const x=Y();return oe({observe:y(a.params),setupMainAction:()=>({icon:"done",name:"save",handler:()=>x.push({name:Z.NoteDetail,params:{id:i}})})}),(s,m)=>{const h=H("router-view");return b(),C(re,{class:J(["q-pa-md height-auto with-modeline",{flex:w(r).debug}])},{default:N(()=>[w(r).debug?(b(),C(se,{key:0,modelValue:S.value,"onUpdate:modelValue":m[0]||(m[0]=V=>S.value=V),horizontal:w(o).screen.lt.sm,class:"debug-splitter"},{before:N(()=>[c.value?(b(),C(h,{key:0})):K("",!0)]),separator:N(()=>[D(W,{color:"primary","text-color":"white",size:"40px",icon:"drag_indicator"})]),after:N(()=>[D(ue)]),_:1},8,["modelValue","horizontal"])):(b(),C(h,{key:1}))]),_:1},8,["class"])}}});export{ge as default};
