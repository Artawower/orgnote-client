import{j as N,a as g,h,G as le,r as $,w as se,x as me,a1 as ge,m as R,a4 as _e,g as Q,J as he,aG as pe,bo as ye,o as i,d as y,e as p,bp as ne,bq as oe,n as be,I as re,v as ke,X as w,af as H,ao as W,$ as O,ac as k,ag as G,am as C,aE as U,a0 as x,Y as m,Z as f,al as Se,an as I,aQ as qe,aR as we,a5 as ie,br as $e,bb as ue,bs as Ce,a9 as ce,aj as xe,_ as P,Q as M,ah as Y,t as K,u as Ne,b4 as ze}from"./index.446b2176.js";import{Q as Be,s as ee,f as Pe,e as L,d as j,C as D,y as Qe,x as Fe}from"./ClosePopup.6775e2be.js";import{u as Ie,a as Re}from"./selection.f044c102.js";import{_ as J}from"./plugin-vue_export-helper.21dcd24c.js";const Te=e=>!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e);function Ae(e){return e.split("/").pop()}function te(e){const l=Ae(e);return Te(e)?e:`/media/${l}`}function Ee(e){return e.replace(/\.[^/.]+$/,"")}const Me=["top","middle","bottom"];var Le=N({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>Me.includes(e)}},setup(e,{slots:l}){const t=g(()=>e.align!==void 0?{verticalAlign:e.align}:null),n=g(()=>{const d=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(d!==void 0?` text-${d}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>h("div",{class:n.value,style:t.value,role:"status","aria-label":e.label},le(l.default,e.label!==void 0?[e.label]:[]))}});const je={ratio:[String,Number]};function De(e,l){return g(()=>{const t=Number(e.ratio||(l!==void 0?l.value:void 0));return isNaN(t)!==!0&&t>0?{paddingBottom:`${100/t}%`}:null})}const Ue=16/9;var Ve=N({name:"QImg",props:{...je,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:Ue},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:l,emit:t}){const n=$(e.initialRatio),d=De(e,n);let o=null,c=!1;const r=[$(null),$(z())],a=$(0),b=$(!1),S=$(!1),s=g(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),v=g(()=>({width:e.width,height:e.height})),q=g(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition`),_=g(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));se(()=>F(),B);function F(){return e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null}function z(){return e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null}function B(u){o!==null&&(clearTimeout(o),o=null),S.value=!1,u===null?(b.value=!1,r[a.value^1].value=z()):b.value=!0,r[a.value].value=u}function T({target:u}){c!==!0&&(o!==null&&(clearTimeout(o),o=null),n.value=u.naturalHeight===0?.5:u.naturalWidth/u.naturalHeight,X(u,1))}function X(u,A){c===!0||A===1e3||(u.complete===!0?de(u):o=setTimeout(()=>{o=null,X(u,A+1)},50))}function de(u){c!==!0&&(a.value=a.value^1,r[a.value].value=null,b.value=!1,S.value=!1,t("load",u.currentSrc||u.src))}function ve(u){o!==null&&(clearTimeout(o),o=null),b.value=!1,S.value=!0,r[a.value].value=null,r[a.value^1].value=z(),t("error",u)}function Z(u){const A=r[u].value,E={key:"img_"+u,class:q.value,style:_.value,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...A};return a.value===u?(E.class+=" q-img__image--waiting",Object.assign(E,{onLoad:T,onError:ve})):E.class+=" q-img__image--loaded",h("div",{class:"q-img__container absolute-full",key:"img"+u},h("img",E))}function fe(){return b.value!==!0?h("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},R(l[S.value===!0?"error":"default"])):h("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},l.loading!==void 0?l.loading():e.noSpinner===!0?void 0:[h(_e,{color:e.spinnerColor,size:e.spinnerSize})])}return B(F()),me(()=>{c=!0,o!==null&&(clearTimeout(o),o=null)}),()=>{const u=[];return d.value!==null&&u.push(h("div",{key:"filler",style:d.value})),S.value!==!0&&(r[0].value!==null&&u.push(Z(0)),r[1].value!==null&&u.push(Z(1))),u.push(h(ge,{name:"q-transition--fade"},fe)),h("div",{class:s.value,style:v.value,role:"img","aria-label":e.alt},u)}}});const He=Q({__name:"ImageResolver",props:{src:{}},setup(e){const l=e,t=he(),n=$(null);pe(async()=>{await d()});const d=async()=>{const c=ye(l.src),r=await t.getFile(c);!r||(n.value=URL.createObjectURL(r))},o=g(()=>te(l.src));return(c,r)=>{var a;return i(),y(Ve,{class:"pointer rounded-borders image-preview","no-transition":!0,"no-spinner":!0,src:(a=n.value)!=null?a:p(te)(o.value)},null,8,["src"])}}});var ae=J(He,[["__scopeId","data-v-411623aa"]]),V=N({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:l}){const t=g(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>h(e.tag,{class:t.value},R(l.default))}}),We=N({name:"QCardActions",props:{...ne,vertical:Boolean},setup(e,{slots:l}){const t=oe(e),n=g(()=>`q-card__actions ${t.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>h("div",{class:n.value},R(l.default))}}),Oe=N({name:"QCard",props:{...Ie,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(e,{slots:l}){const{proxy:{$q:t}}=be(),n=Re(e,t),d=g(()=>"q-card"+(n.value===!0?" q-card--dark q-dark":"")+(e.bordered===!0?" q-card--bordered":"")+(e.square===!0?" q-card--square no-border-radius":"")+(e.flat===!0?" q-card--flat no-shadow":""));return()=>h(e.tag,{class:d.value},R(l.default))}});const Ge=["onClick"],Ye=Q({__name:"TagList",props:{tags:{},type:{default:"text"},inline:{type:Boolean,default:!0}},setup(e){const l=e,t=g(()=>Array.from(new Set(l.tags))),n=re(),d=a=>n.setFilters({searchText:a}),o=$(!1),c=$(null),r=()=>{if(c.value){const{scrollWidth:a,offsetWidth:b}=c.value;o.value=a>b}};return ke(()=>{r()}),(a,b)=>{var S;return(S=t.value)!=null&&S.length?(i(),w("div",{key:0,ref_key:"tagsWrapperRef",ref:c,class:O(["tags-wrapper",[o.value&&"long",{inline:l.inline}]])},[a.type==="badges"?(i(!0),w(H,{key:0},W(t.value,s=>(i(),y(Le,{class:"tag q-px-sm q-py-xs",key:s,onClick:G(v=>d(s),["stop","prevent"]),rounded:"",color:a.$q.dark.isActive?"grey-3":"grey-9",outline:"","text-color":a.$q.dark.isActive?"grey-3":"grey-9",size:"2rem",label:s},null,8,["onClick","color","text-color","label"]))),128)):(i(!0),w(H,{key:1},W(t.value,s=>(i(),w("span",{class:"text-tag text-italic text-weight-medium",key:s,onClick:G(v=>d(s),["stop","prevent"])}," #"+C(s),9,Ge))),128))],2)):k("",!0)}}}),Je={class:"q-mr-md"},Xe=["src"],Ze={class:"col"},Ke={key:0},et={key:1,class:"text-italic"},tt=Q({__name:"AuthorInfo",props:{author:{}},setup(e){const t=U(e,"author"),n=()=>window.open(t.value.profileUrl,"_blank");return(d,o)=>(i(),w("div",{onClick:n,class:"row cursor-pointer flex-center"},[x("div",Je,[m(Se,{size:"24px",class:"q-mx-auto"},{default:f(()=>[x("img",{src:t.value.avatarUrl},null,8,Xe)]),_:1})]),x("div",Ze,[t.value.nickName?(i(),w("span",Ke,C(t.value.nickName),1)):k("",!0),I("\xA0 "),t.value.email?(i(),w("span",et,C(t.value.email),1)):k("",!0)])]))}});var at=N({name:"QBreadcrumbsEl",props:{...qe,label:String,icon:String,tag:{type:String,default:"span"}},emits:["click"],setup(e,{slots:l}){const{linkTag:t,linkAttrs:n,linkClass:d,navigateOnClick:o}=we(),c=g(()=>({class:"q-breadcrumbs__el q-link flex inline items-center relative-position "+(e.disable!==!0?"q-link--focusable"+d.value:"q-breadcrumbs__el--disable"),...n.value,onClick:o})),r=g(()=>"q-breadcrumbs__el-icon"+(e.label!==void 0?" q-breadcrumbs__el-icon--with-label":""));return()=>{const a=[];return e.icon!==void 0&&a.push(h(ie,{class:r.value,name:e.icon})),e.label!==void 0&&a.push(e.label),h(t.value,{...c.value},le(l.default,a))}}});const lt=["",!0];var st=N({name:"QBreadcrumbs",props:{...ne,separator:{type:String,default:"/"},separatorColor:String,activeColor:{type:String,default:"primary"},gutter:{type:String,validator:e=>["none","xs","sm","md","lg","xl"].includes(e),default:"sm"}},setup(e,{slots:l}){const t=oe(e),n=g(()=>`flex items-center ${t.value}${e.gutter==="none"?"":` q-gutter-${e.gutter}`}`),d=g(()=>e.separatorColor?` text-${e.separatorColor}`:""),o=g(()=>` text-${e.activeColor}`);return()=>{const c=$e(R(l.default));if(c.length===0)return;let r=1;const a=[],b=c.filter(s=>s.type!==void 0&&s.type.name==="QBreadcrumbsEl").length,S=l.separator!==void 0?l.separator:()=>e.separator;return c.forEach(s=>{if(s.type!==void 0&&s.type.name==="QBreadcrumbsEl"){const v=r<b,q=s.props!==null&&lt.includes(s.props.disable),_=(v===!0?"":" q-breadcrumbs--last")+(q!==!0&&v===!0?o.value:"");r++,a.push(h("div",{class:`flex items-center${_}`},[s])),v===!0&&a.push(h("div",{class:"q-breadcrumbs__separator"+d.value},S()))}else a.push(s)}),h("div",{class:"q-breadcrumbs"},[h("div",{class:n.value},a)])}}});const nt=Q({__name:"FilePath",props:{filePath:{}},setup(e){const t=U(e,"filePath"),n=ue(),d=o=>n.notify(`This functionality is not implemented yet. You clicked on ${o}`);return(o,c)=>(i(),y(st,{class:"text-italic color-secondary pointer flex breadcrumbs"},{separator:f(()=>[m(ie,{size:"1.5em",name:"chevron_right",class:"color-secondary"})]),default:f(()=>[(i(!0),w(H,null,W(t.value,(r,a)=>(i(),y(at,{class:"color-secondary text-no-wrap",label:a===t.value.length-1?p(Ee)(r):r,key:r,onClick:G(b=>d(r),["stop","prevent"])},null,8,["label","onClick"]))),128))]),_:1}))}});const ot={class:"footer column q-py-bp-lg full-width"},rt={class:"note-actions full-width row justify-between"},it={class:"left"},ut={class:"right row gap-sm action-btns"},ct=Q({__name:"NoteFooter",props:{selectable:{type:Boolean},note:{}},setup(e){const l=e,t=U(l,"selectable"),n=U(l,"note"),d=Ce(),o=ue(),c=s=>{o.notify(`Feature ${s} is not implemented yet!`)},r=re(),a=ce(),b=async()=>{await r.markAsDeleted([n.value.id]),a.push({name:Y.Home})},S=()=>{a.push({name:Y.EditNote,params:{id:n.value.id}})};return(s,v)=>(i(),w("div",ot,[xe(s.$slots,"default",{},void 0,!0),x("div",rt,[x("div",it,[t.value?(i(),y(Be,{key:0,size:"sm","model-value":p(d).isNoteSelected(n.value.id),"onUpdate:modelValue":v[0]||(v[0]=q=>p(d).toggleNoteSelection(n.value.id))},null,8,["model-value"])):k("",!0)]),x("div",ut,[m(P,{size:"sm",flat:"",round:"",icon:"far fa-bookmark",class:"q-pa-none"}),m(P,{size:"sm",flat:"",round:"",icon:"far fa-paper-plane",class:"q-pa-none"},{default:f(()=>[m(ee,{class:"flex row no-wrap q-pa-sm"},{default:f(()=>[m(P,{flat:"",rounded:"",size:"md",icon:"fa-brands fa-square-twitter",class:"q-pa-sm",onClick:v[1]||(v[1]=q=>c("Twitter share"))}),m(P,{flat:"",rounded:"",size:"md",icon:"fa-brands fa-telegram",class:"q-pa-sm",onClick:v[2]||(v[2]=q=>c("Telegram share"))}),m(P,{flat:"",rounded:"",size:"md",icon:"far fa-copy",class:"q-pa-sm",onClick:v[3]||(v[3]=q=>c("Copy link"))})]),_:1})]),_:1}),m(P,{size:"sm",flat:"",round:"",icon:"fas fa-ellipsis",class:"q-pa-none"},{default:f(()=>[m(ee,null,{default:f(()=>[m(Pe,{style:{"min-width":"100px"}},{default:f(()=>[n.value.isMy?M((i(),y(j,{key:0,clickable:"",onClick:b},{default:f(()=>[m(L,{class:"text-capitalize"},{default:f(()=>[I(C(s.$t("delete")),1)]),_:1})]),_:1})),[[D]]):k("",!0),n.value.isMy?M((i(),y(j,{key:1,clickable:"",onClick:S},{default:f(()=>[m(L,{class:"text-capitalize"},{default:f(()=>[I(C(s.$t("edit")),1)]),_:1})]),_:1})),[[D]]):k("",!0),n.value.isMy?k("",!0):M((i(),y(j,{key:2,clickable:"",onClick:v[4]||(v[4]=q=>c(s.$t("report")))},{default:f(()=>[m(L,{class:"text-capitalize"},{default:f(()=>[I(C(s.$t("report")),1)]),_:1})]),_:1})),[[D]]),n.value.isMy?k("",!0):M((i(),y(j,{key:3,clickable:"",onClick:v[5]||(v[5]=q=>c(s.$t("save")))},{default:f(()=>[m(L,{class:"text-capitalize"},{default:f(()=>[I(C(s.$t("save")),1)]),_:1})]),_:1})),[[D]])]),_:1})]),_:1})]),_:1})])])]))}});var dt=J(ct,[["__scopeId","data-v-816d6d64"]]);const vt={key:0,class:"q-px-sm"},ft={class:"full-width"},mt={class:"text-overline"},gt={class:"text-h4 text-weight-bold pointer"},_t={class:"text-caption rft description"},ht={key:1,class:"mock-picture pointer rounded-borders"},pt=Q({__name:"PublicNotePreview",props:{notePreview:{},showAuthor:{type:Boolean},selectable:{type:Boolean},height:{},hideFooter:{type:Boolean},fullHeight:{type:Boolean}},setup(e){var v,q;const l=e,{notePreview:t,selectable:n}=K(l),d=g(()=>`${l.height}px`),o=ce(),c=_=>{o.push({name:Y.NoteDetail,params:{id:_.id}})},r=Qe(),a=g(()=>r.tile),b=Ne(),{showUserProfiles:S}=K(b),s=$((q=(v=t.value)==null?void 0:v.meta.images)==null?void 0:q[0]);return se(()=>{var _;return(_=t.value)==null?void 0:_.meta.images},_=>{s.value=_==null?void 0:_[0]}),(_,F)=>(i(),w("article",{style:ze({height:d.value})},[p(t)?(i(),y(Oe,{key:0,class:"full-height",flat:""},{default:f(()=>{var z;return[((z=p(t))==null?void 0:z.author)&&p(S)&&_.showAuthor?(i(),w("div",vt,[m(tt,{author:p(t).author},null,8,["author"])])):k("",!0),m(V,{horizontal:"",class:O([{"note-card-content":a.value||!_.fullHeight,column:a.value,"full-height":_.fullHeight},"pointer q-px-sm"]),onClick:F[0]||(F[0]=B=>c(p(t)))},{default:f(()=>[a.value&&s.value?(i(),y(ae,{key:0,src:s.value},null,8,["src"])):k("",!0),m(V,{class:O(["fit q-pa-none q-pt-sm note-text-content",{"content-with-img":!!s.value}])},{default:f(()=>{var B,T;return[x("div",ft,[x("div",mt,C(p(t).meta.category),1),x("div",gt,C(p(t).meta.title),1),p(t).filePath?(i(),y(nt,{key:0,filePath:p(t).filePath,class:"q-py-xs"},null,8,["filePath"])):k("",!0),x("div",_t,C(p(t).meta.description),1)]),m(Ye,{tags:(T=(B=p(t))==null?void 0:B.meta)==null?void 0:T.fileTags},null,8,["tags"])]}),_:1},8,["class"]),!a.value&&s.value?(i(),y(V,{key:1,class:"flex col-3 flex-start q-pa-none q-pt-sm justify-end img-preview-section"},{default:f(()=>[s.value?(i(),y(ae,{key:0,src:s.value},null,8,["src"])):(i(),w("div",ht))]),_:1})):k("",!0)]),_:1},8,["class"]),_.hideFooter?k("",!0):(i(),y(We,{key:1,class:"q-px-none justify-between q-my-sm actions"},{default:f(()=>[m(dt,{note:p(t),selectable:p(n)},null,8,["note","selectable"])]),_:1})),_.hideFooter?k("",!0):(i(),y(Fe,{key:2}))]}),_:1})):k("",!0)],4))}});var qt=J(pt,[["__scopeId","data-v-187fba07"]]);export{ae as I,qt as P,Le as Q,tt as _,te as b};
